{"version":3,"sources":["duocoder.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_$","$","extend","panelVars","language","editor","matchings","lines","_this","this","panel","exam_mode","setLanguage","index","setEditor","setMatchings","setCode","setLines","enterExamMode","exitExamMode","getLanguage","getEditor","getMatchings","getCode","readable","replace","getLines","isExamMode","2","3","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_class","name","dir","children","arguments","undefined","parent","element","next","forEach","child","value","4","Language","Category","./category","./language","5","ace","ext","Server","languages","getLanguages","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","../server","6","app","viewCode","to","enter","addClass","css","setReadOnly","setValue","exit","keep_code","removeClass","../app","./view_code","7","setupMain","initEditor","initCategories","setupLayout","setupMatching","setupExam","viewDesc","viewComparison","exam","./exam","./init_categories","./init_editor","./set_language","./setup_exam","./setup_layout","./setup_main","./setup_matching","./view_comparison","./view_desc","8","Storage","from","loadCategory","category","loadCode","then","loadDesc","categories","$index","append","$sub_index","j","click","$li","$ul","data","sub","set","get","../storage","9","afterRender","$panel","$code","find","edit","attr","setTheme","getSession","setMode","setUseWrapMode","setShowFoldWidgets","renderer","on","10","$title","text","11","util","calculateProgress","code_answer","code_user","similarity","zip","progress","getValue","s1","s2","longer","shorter","longerLength","editDistance","parseFloat","costs","lastValue","newValue","charAt","Math","min","../util","12","$next","hasClass","$active","is","$active_parent","alert","13","setupLanguages","setupStickToBottom","setupSmoothScroll","./setup_languages","./setup_smooth_scroll","./setup_stick_to_bottom","14","_arr","_loop","container","_i","$container","$lang","$logo","$lang_to","$lang_from_selected","$lang_to_selected","from_index","to_index","val","submit","../../server","15","location","pathname","hostname","hash","slice","animate","scrollTop","offset","top","$unfocused","onScroll","toggleClass","document","window","scroll","16","$stick_to_bottom_fake","$stick_to_bottom_real","$lang_from","$fullscreen","onResize","height","bottom","resize","17","mousemove","pageX","pageY","each","$match","_$match$offset","left","right","width","match","filter","18","split","omit_num","num","content","parseInt","push","join","19","_slicedToArray","sliceIterator","arr","_n","_d","_e","_s","Array","isArray","$desc","pair","max","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","matching","editors","$temp_snippets","_i4","html","line","$textLayer","$renderLine","comparisons","_arr2","_loop2","_i2","_i3","_matchings","every","empty","last_line","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop3","comparison","_comparison","pieces_from","pieces_to","is_same","$line","_arr3","_i5","pieces","$group","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","piece","$piece","clone","_iterator2","20","desc","converter","showdown","Converter","makeHtml","21","RSVP","DOM","App","_require","getCategories","reason","console","assert","main","learn","lang_from_ext","getUrlParameter","lang_to_ext","changed","lang_from","getWithExt","lang_to","sParam","params","decodeURIComponent","search","substring","param","./app","./app/constructor","./bean","./dom","./server","./storage","rsvp","22","request","url","type","./request","23","ajax","defaults","options","Promise","resolve","reject","callbacks","success","response","error","opts","24","../bean","25","26","./get_categories","./get_languages","./load_code","./load_desc","27","path","./ajax/get","28","29","_typeof","obj","constructor","_set","_get","getName","substr","dirs","grep","v","_ret","./manager","30","31","32","Cookies","remove","33","trim","34","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","noop","process","nextTick","args","apply","title","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","umask","35","global","factory","define","amd","indexOf","callback","callbacksFor","object","_promiseCallbacks","configure","config","objectOrFunction","x","isFunction","isMaybeThenable","F","scheduleFlush","entry","payload","guid","id","childGuid","childId","stack","instrument","eventName","promise","_guidKey","_id","detail","_result","label","_label","timeStamp","now","resolve$1","withOwnPromise","getThen","GET_THEN_ERROR","tryThen","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","async","sealed","fulfill","handleOwnThenable","_state","FULFILLED","REJECTED","_onError","subscribe","handleMaybeThenable","maybeThenable","then$$","publishRejection","publish","PENDING","_subscribers","onFulfillment","onRejection","subscribers","settled","invokeCallback","ErrorObject","tryCatch","TRY_CATCH_ERROR","hasCallback","succeeded","failed","initializePromise","resolver","resolved","_arguments","state","result","makeSettledResult","position","Enumerator","input","abortOnReject","_instanceConstructor","_abortOnReject","_validateInput","_input","_remaining","_init","_enumerate","_validationError","all","entries","race","reject$1","needsResolver","needsNew","counter","Result","getThen$1","ERROR","tryApply","makeObject","_","argumentNames","_name","arrayResult","wrapThenable","_then","onFulFillment","denodeify","nodeFunc","fn","self","promiseInput","arg","needsPromiseInput","GET_THEN_ERROR$1","p","handlePromiseInput","handleValueInput","__proto__","all$1","AllSettled","_superConstructor","allSettled","race$1","PromiseHash","HashSettled","hashSettled","rethrow","defer","deferred","map","promises","mapFn","values","results","resolve$2","reject$2","resolveAll","resolveSingle","filterFn","filtered","newLength","asap","queue$1","scheduleFlush$1","useNextTick","node","setImmediate","flush","useVertxTimer","vertxNext","useSetTimeout","useMutationObserver","iterations","observer","BrowserMutationObserver","createTextNode","observe","characterData","useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","attemptVertex","vertx","runOnLoop","runOnContext","_defineProperty","EventTarget","mixin","allCallbacks","splice","trigger","_isArray","toString","Date","getTime","o_create","create","_eachEntry","_settleMaybeThenable","c","_settledAt","_makeResult","_willSettleAt","enumerator","guidKey","cast","after","catch","finally","hasOwnProperty","browserWindow","browserGlobal","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","platform","_async$filter","cb","_process"],"mappings":"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","file":"duocoder.js","sourcesContent":["/**\n * DuoCoder - Duolingo for Coders\n * @version v0.0.1\n * @author Jason Park\n * @link https://github.com/parkjs814/DuoCoder\n * @license MIT\n */\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _$ = $,\n    extend = _$.extend;\n\n\nvar panelVars = {\n  language: null,\n  editor: null,\n  matchings: null,\n  code: '',\n  lines: -1\n};\n\nmodule.exports = function () {\n  var _this = this;\n\n  this.panel = [extend(true, {}, panelVars), extend(true, {}, panelVars)];\n  this.exam_mode = false;\n\n  this.setLanguage = function (index, language) {\n    _this.panel[index].language = language;\n  };\n\n  this.setEditor = function (index, editor) {\n    _this.panel[index].editor = editor;\n  };\n\n  this.setMatchings = function (index, matchings) {\n    _this.panel[index].matchings = matchings;\n  };\n\n  this.setCode = function (index, code) {\n    _this.panel[index].code = code;\n  };\n\n  this.setLines = function (index, lines) {\n    _this.panel[index].lines = lines;\n  };\n\n  this.enterExamMode = function () {\n    _this.exam_mode = true;\n  };\n\n  this.exitExamMode = function () {\n    _this.exam_mode = false;\n  };\n\n  this.getLanguage = function (index) {\n    return _this.panel[index].language;\n  };\n\n  this.getEditor = function (index) {\n    return _this.panel[index].editor;\n  };\n\n  this.getMatchings = function (index) {\n    return _this.panel[index].matchings;\n  };\n\n  this.getCode = function (index, readable) {\n    var code = _this.panel[index].code;\n    if (readable) return code.replace(/#(\\d+)\\{\\[(((?!\\]\\}).)*)\\]\\}/g, '$2');else return code;\n  };\n\n  this.getLines = function (index) {\n    return _this.panel[index].lines;\n  };\n\n  this.isExamMode = function () {\n    return _this.exam_mode;\n  };\n};\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = {};\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nmodule.exports = function () {\n  function _class(name, dir) {\n    var _this = this;\n\n    var children = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n    _classCallCheck(this, _class);\n\n    this.parent = null;\n    this.name = name;\n    this.dir = dir;\n    this.children = children;\n    this.element = null;\n    this.next = null;\n    children.forEach(function (child) {\n      child.parent = _this;\n    });\n  }\n\n  _createClass(_class, [{\n    key: \"sub\",\n    value: function sub(index) {\n      return this.children[index];\n    }\n  }]);\n\n  return _class;\n}();\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar Language = require('./language');\nvar Category = require('./category');\n\nmodule.exports = {\n  Language: Language,\n  Category: Category\n};\n\n},{\"./category\":3,\"./language\":5}],5:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nmodule.exports = function () {\n  function _class(name, ace, ext) {\n    _classCallCheck(this, _class);\n\n    this.name = name;\n    this.ace = ace;\n    this.ext = ext;\n  }\n\n  _createClass(_class, null, [{\n    key: 'getWithExt',\n    value: function getWithExt(ext) {\n      var Server = require('../server');\n      var languages = Server.getLanguages();\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = languages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var language = _step.value;\n\n          if (language.ext == ext) return language;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }]);\n\n  return _class;\n}();\n\n},{\"../server\":26}],6:[function(require,module,exports){\n'use strict';\n\nvar app = require('../app');\nvar viewCode = require('./view_code');\n\nvar from = 0,\n    to = 1;\n\nmodule.exports = {\n  enter: function enter() {\n    app.enterExamMode();\n    $('#next').addClass('selected');\n    $('.desc-container .blur').css('display', 'block');\n    var editor = app.getEditor(to);\n    editor.setReadOnly(false);\n    editor.setValue('');\n  },\n  exit: function exit(keep_code) {\n    app.exitExamMode();\n    $('#next').removeClass('selected next');\n    $('.desc-container .blur').css('display', '');\n    var editor = app.getEditor(to);\n    editor.setReadOnly(true);\n    if (!keep_code) viewCode(to, app.getCode(to));\n  }\n};\n\n},{\"../app\":2,\"./view_code\":18}],7:[function(require,module,exports){\n'use strict';\n\nvar setupMain = require('./setup_main');\nvar initEditor = require('./init_editor');\nvar initCategories = require('./init_categories');\nvar setupLayout = require('./setup_layout');\nvar setupMatching = require('./setup_matching');\nvar setupExam = require('./setup_exam');\nvar setLanguage = require('./set_language');\nvar viewCode = require('./view_code');\nvar viewDesc = require('./view_desc');\nvar viewComparison = require('./view_comparison');\nvar exam = require('./exam');\n\nmodule.exports = {\n  setupMain: setupMain,\n  initEditor: initEditor,\n  initCategories: initCategories,\n  setupLayout: setupLayout,\n  setupMatching: setupMatching,\n  setupExam: setupExam,\n  setLanguage: setLanguage,\n  viewCode: viewCode,\n  viewDesc: viewDesc,\n  viewComparison: viewComparison,\n  exam: exam\n};\n\n},{\"./exam\":6,\"./init_categories\":8,\"./init_editor\":9,\"./set_language\":10,\"./setup_exam\":11,\"./setup_layout\":12,\"./setup_main\":13,\"./setup_matching\":17,\"./view_code\":18,\"./view_comparison\":19,\"./view_desc\":20}],8:[function(require,module,exports){\n'use strict';\n\nvar Server = require('../server');\nvar Storage = require('../storage');\nvar app = require('../app');\nvar viewCode = require('./view_code');\nvar viewDesc = require('./view_desc');\nvar exam = require('./exam');\n\nvar from = 0,\n    to = 1;\n\nvar loadCategory = function loadCategory(index, category, language) {\n  Server.loadCode(category, language).then(function (code) {\n    exam.exit();\n    app.setCode(index, code);\n    viewCode(index, code);\n  });\n  if (index == to) {\n    Server.loadDesc(category, language).then(viewDesc);\n  }\n};\n\nmodule.exports = function (categories) {\n  var $index = $('#index');\n  categories.forEach(function (category, i) {\n    category.element = $('<li>' + (i + 1) + '| ' + category.name + '</li>');\n    $index.append(category.element);\n    var $sub_index = $('<ul class=\"sub\" data-category=\"' + i + '\"></ul>');\n    $index.append($sub_index);\n    category.children.forEach(function (category, j) {\n      category.element = $('<li data-subcategory=\"' + j + '\">' + category.name + '</li>');\n      $sub_index.append(category.element);\n    });\n  });\n\n  $('#index > li').click(function () {\n    $('#index > li.active').removeClass('active');\n    $(this).addClass('active');\n  });\n\n  $('ul.sub > li').click(function () {\n    $('ul.sub > li.active').removeClass('active');\n    $(this).addClass('active');\n    var $li = $(this);\n    var $ul = $(this).parent();\n    var category = categories[$ul.data('category')].sub($li.data('subcategory'));\n    Storage.category.set(category);\n    loadCategory(from, category, app.getLanguage(from));\n    loadCategory(to, category, app.getLanguage(to));\n    exam.exit();\n  });\n\n  var category = Storage.category.get();\n  do {\n    category.element.click();\n    category = category.parent;\n  } while (category);\n};\n\n},{\"../app\":2,\"../server\":26,\"../storage\":30,\"./exam\":6,\"./view_code\":18,\"./view_desc\":20}],9:[function(require,module,exports){\n'use strict';\n\nvar app = require('../app');\nvar viewComparison = require('./view_comparison');\n\nmodule.exports = function (index, language, afterRender) {\n  var $panel = $('.panel:eq(' + index + ')');\n  var $code = $panel.find('.code');\n  var editor = ace.edit($code.attr('id'));\n  editor.setTheme('ace/theme/monokai');\n  if (index == 0) $panel.find('.desc').addClass('ace-monokai');\n  editor.getSession().setMode('ace/mode/' + language.ace);\n  editor.getSession().setUseWrapMode(true);\n  editor.setShowFoldWidgets(false);\n  editor.setReadOnly(true);\n  editor.renderer.on('timeToUpdateComparison', function () {\n    if (app.isExamMode()) return;\n    viewComparison();\n  });\n  return editor;\n};\n\n},{\"../app\":2,\"./view_comparison\":19}],10:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function (index, language) {\n  var $panel = $('.panel:eq(' + index + ')');\n  var $title = $panel.find('.title');\n  $title.text(language.name);\n};\n\n},{}],11:[function(require,module,exports){\n'use strict';\n\nvar app = require('../app');\nvar exam = require('./exam');\nvar util = require('../util');\n\nvar from = 0,\n    to = 1;\n\nvar calculateProgress = function calculateProgress(code_answer, code_user) {\n  return similarity(util.zip(code_answer), util.zip(code_user));\n};\n\nmodule.exports = function () {\n  var editor = app.getEditor(to);\n  editor.on('change', function (e) {\n    if (!app.isExamMode()) return;\n    var progress = calculateProgress(app.getCode(to, true), editor.getValue());\n    $('.progress').css('width', progress * 100 + '%');\n    if (progress == 1) {\n      exam.exit(true);\n      $('#next').addClass('next');\n      $('.progress').css('width', '');\n    }\n  });\n};\n\n/**\n * http://stackoverflow.com/questions/10473745/compare-strings-javascript-return-of-likely\n */\n\nvar similarity = function similarity(s1, s2) {\n  var longer = s1;\n  var shorter = s2;\n  if (s1.length < s2.length) {\n    longer = s2;\n    shorter = s1;\n  }\n  var longerLength = longer.length;\n  if (longerLength == 0) {\n    return 1.0;\n  }\n  return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);\n};\n\nvar editDistance = function editDistance(s1, s2) {\n  var costs = [];\n  for (var i = 0; i <= s1.length; i++) {\n    var lastValue = i;\n    for (var j = 0; j <= s2.length; j++) {\n      if (i == 0) costs[j] = j;else {\n        if (j > 0) {\n          var newValue = costs[j - 1];\n          if (s1.charAt(i - 1) != s2.charAt(j - 1)) newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;\n          costs[j - 1] = lastValue;\n          lastValue = newValue;\n        }\n      }\n    }\n    if (i > 0) costs[s2.length] = lastValue;\n  }\n  return costs[s2.length];\n};\n\n},{\"../app\":2,\"../util\":33,\"./exam\":6}],12:[function(require,module,exports){\n'use strict';\n\nvar app = require('../app');\nvar exam = require('./exam');\n\nmodule.exports = function () {\n  $('#next').click(function () {\n    var $next = $(this);\n    if ($next.hasClass('next')) {\n      var $active = $('.sub > li.active');\n      if ($active.is(':last-child')) {\n        var $active_parent = $('#index > li.active');\n        if ($active_parent.is(':nth-last-child(2)')) {\n          alert('Congrats!');\n        } else {\n          $active_parent.next().next().click();\n          $('#index > li.active + .sub > li:first-child').click();\n        }\n      } else {\n        $active.next().click();\n      }\n      $next.removeClass('next');\n    } else {\n      if (app.isExamMode()) {\n        exam.exit();\n      } else {\n        exam.enter();\n      }\n    }\n  });\n};\n\n},{\"../app\":2,\"./exam\":6}],13:[function(require,module,exports){\n'use strict';\n\nvar setupLanguages = require('./setup_languages');\nvar setupStickToBottom = require('./setup_stick_to_bottom');\nvar setupSmoothScroll = require('./setup_smooth_scroll');\n\nmodule.exports = function () {\n  setupLanguages();\n  setupStickToBottom();\n  setupSmoothScroll();\n};\n\n},{\"./setup_languages\":14,\"./setup_smooth_scroll\":15,\"./setup_stick_to_bottom\":16}],14:[function(require,module,exports){\n'use strict';\n\nvar Server = require('../../server');\n\nvar languages = Server.getLanguages();\n\nmodule.exports = function () {\n  var _arr = ['#lang-from', '#lang-to'];\n\n  var _loop = function _loop() {\n    var container = _arr[_i];\n    var $container = $(container);\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = languages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var language = _step.value;\n\n        var $lang = $('<a class=\"lang\" href=\"' + (container == '#lang-from' ? '#dots' : '#top') + '\"></a>');\n        $container.append($lang);\n        var $logo = $('<div class=\"logo\" style=\"background-image: url(\\'./images/lang_' + language.ext + '.png\\')\"></div>');\n        $lang.append($logo);\n        $logo.append('<div class=\"logo mono\" style=\"background-image: url(\\'./images/lang_' + language.ext + '_mono.png\\')\"></div>');\n        $lang.append('<div class=\"name\">' + language.name + '</div>');\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    $container.find('.lang').click(function () {\n      $container.find('.lang.selected').removeClass('selected');\n      $(this).addClass('selected');\n    });\n  };\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    _loop();\n  }\n  $('.lang').click(function () {\n    var $lang_to = $('#lang-to');\n    var $lang_from_selected = $('#lang-from .lang.selected');\n    var $lang_to_selected = $('#lang-to .lang.selected');\n    if ($lang_from_selected.length && $lang_to_selected.length) {\n      var from_index = $lang_from_selected.index();\n      var to_index = $lang_to_selected.index() - 2;\n      $lang_to.find('[name=\"lang_from\"]').val(languages[from_index].ext);\n      $lang_to.find('[name=\"lang_to\"]').val(languages[to_index].ext);\n      $lang_to.submit();\n    }\n  });\n};\n\n},{\"../../server\":26}],15:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function () {\n  $('a[href*=\"#\"]:not([href=\"#\"])').click(function () {\n    if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') && location.hostname == this.hostname) {\n      var target = $(this.hash);\n      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\n      if (target.length) {\n        $('html, body').animate({\n          scrollTop: target.offset().top\n        }, 500);\n        return false;\n      }\n    }\n  });\n  var $unfocused = $('.focused');\n  var onScroll = function onScroll() {\n    $unfocused.toggleClass('unfocused', $(document).scrollTop() <= 168);\n  };\n  onScroll();\n  $(window).scroll(onScroll);\n};\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function () {\n  var $stick_to_bottom_fake = $('.stick-to-bottom.fake');\n  var $stick_to_bottom_real = $('.stick-to-bottom.real');\n  var $lang_from = $('#lang-from');\n  var $fullscreen = $('.fullscreen');\n  var onResize = function onResize() {\n    var top = $lang_from.offset().top + $lang_from.height();\n    var bottom = $stick_to_bottom_fake.offset().top;\n    $fullscreen.toggleClass('full', top < bottom);\n    $stick_to_bottom_real.toggleClass('stick', top < bottom);\n  };\n  onResize();\n  $(window).resize(onResize);\n};\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function () {\n  $('.code, #comparison').mousemove(function (e) {\n    $('.match').removeClass('selected');\n    var $code = $(this);\n    var pageX = e.pageX,\n        pageY = e.pageY;\n\n    $code.find('.match').each(function () {\n      var $match = $(this);\n\n      var _$match$offset = $match.offset(),\n          top = _$match$offset.top,\n          left = _$match$offset.left;\n\n      var bottom = top + $match.height();\n      var right = left + $match.width();\n      if (top < pageY && pageY < bottom && left < pageX && pageX < right) {\n        (function () {\n          var match = $match.data('match');\n          $('.match').filter(function () {\n            return $(this).data('match') == match;\n          }).addClass('selected');\n        })();\n      }\n    });\n  });\n};\n\n},{}],18:[function(require,module,exports){\n'use strict';\n\nvar app = require('../app');\n\nmodule.exports = function (index, code) {\n  var matchings = [];\n  app.setMatchings(index, matchings);\n  var lines = code.split(/\\r?\\n/);\n  app.setLines(index, lines.length);\n  var omit_num = 99999;\n\n  var _loop = function _loop(i) {\n    lines[i] = lines[i].replace(/(^|\\]\\})(((?!#\\d+\\{\\[).)+)/gm, '$1#' + omit_num + '{[$2]}');\n    lines[i] = lines[i].replace(/#(\\d+)\\{\\[(((?!\\]\\}).)*)\\]\\}/g, function (match, num, content) {\n      num = parseInt(num);\n      if (num == omit_num) num = -1;\n      matchings.push([content, num, i]);\n      return content;\n    });\n  };\n\n  for (var i = 0; i < lines.length; i++) {\n    _loop(i);\n  }\n  code = lines.join('\\n');\n  app.getEditor(index).setValue(code, -1);\n};\n\n},{\"../app\":2}],19:[function(require,module,exports){\n'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar app = require('../app');\n\nvar from = 0,\n    to = 1;\n\nmodule.exports = function () {\n  var $desc = $('#comparison');\n  var pair = [app.getMatchings(from), app.getMatchings(to)];\n\n  var max = -1;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = pair[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var matchings = _step.value;\n\n      if (matchings == null) return;\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = matchings[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var matching = _step3.value;\n\n          max = Math.max(max, matching[1]);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var editors = [app.getEditor(from), app.getEditor(to)];\n  var $temp_snippets = [$('.temp-snippet:eq(0)'), $('.temp-snippet:eq(1)')];\n  var _arr = [from, to];\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var _i4 = _arr[_i];\n    var html = [];\n    var editor = editors[_i4];\n    var lines = app.getLines(_i4);\n    for (var line = 0; line <= lines; line++) {\n      editor.renderer.$textLayer.$renderLine(html, line, true, false);\n    }\n    $temp_snippets[_i4].html(html.join(''));\n  }\n\n  var comparisons = [];\n  for (var i = 0; i <= max; i++) {\n    comparisons.push([[], [], -1]);\n  }\n  var _arr2 = [from, to];\n\n  var _loop2 = function _loop2() {\n    var i = _arr2[_i2];\n    $temp_snippets[i].find('.match').each(function () {\n      var $match = $(this);\n      var match = $match.data('match');\n      comparisons[match][i].push($match);\n      if (i == 0 && comparisons[match][2] == -1) {\n        comparisons[match][2] = $match.parent().parent().index();\n      }\n    });\n  };\n\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    _loop2();\n  }\n\n  var _loop = function _loop(_i3) {\n    if (comparisons[_i3][2] == -1) {\n      var _matchings = pair[0];\n      _matchings.every(function (matching) {\n        if (matching[1] == _i3) {\n          comparisons[_i3][2] = matching[2];\n          return false;\n        }\n        return true;\n      });\n    }\n  };\n\n  for (var _i3 = 0; _i3 <= max; _i3++) {\n    _loop(_i3);\n  }\n  $desc.empty();\n  $desc.append('<h2>Key Changes</h2>');\n  $desc.append('<h6>Not all changes are shown.</h6>');\n  var last_line = -1;\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    var _loop3 = function _loop3() {\n      var comparison = _step2.value;\n\n      var _comparison = _slicedToArray(comparison, 2),\n          pieces_from = _comparison[0],\n          pieces_to = _comparison[1];\n\n      var is_same = pieces_from.length == pieces_to.length && pieces_from.every(function (element, index) {\n        return element.text() == pieces_to[index].text();\n      });\n      if (is_same) return 'continue';\n      var line = comparison[2];\n      if (last_line != line) {\n        last_line = line;\n        $desc.append('<div class=\"line line-number\">Line ' + (line + 1) + '</div>');\n      }\n      var $line = $('<div class=\"line\"></div>');\n      $desc.append($line);\n      var _arr3 = [pieces_from, pieces_to];\n      for (var _i5 = 0; _i5 < _arr3.length; _i5++) {\n        var pieces = _arr3[_i5];\n        var $group = $('<span class=\"group\"></span>');\n        $line.append($group);\n        if (!pieces.length) {\n          $group.append('<span class=\"empty\"></span>');\n        }\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = pieces[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var piece = _step4.value;\n\n            var $piece = piece.clone();\n            $piece.data('match', piece.data('match'));\n            $group.append($piece);\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n      }\n    };\n\n    for (var _iterator2 = comparisons[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _ret3 = _loop3();\n\n      if (_ret3 === 'continue') continue;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n};\n\n},{\"../app\":2}],20:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function (desc) {\n  var converter = new showdown.Converter();\n\n  var $desc = $('#description');\n  $desc.html(converter.makeHtml(desc));\n};\n\n},{}],21:[function(require,module,exports){\n'use strict';\n\nvar RSVP = require('rsvp');\nvar DOM = require('./dom');\nvar Server = require('./server');\nvar Storage = require('./storage');\nvar app = require('./app');\nvar App = require('./app/constructor');\n\nvar _require = require('./bean'),\n    Language = _require.Language;\n\nvar _$ = $,\n    extend = _$.extend;\n\n\nvar categories = Server.getCategories();\nvar from = 0,\n    to = 1;\n\n// set global promise error handler\nRSVP.on('error', function (reason) {\n  console.assert(false, reason);\n});\n\nextend(true, window, {\n  main: DOM.setupMain,\n  learn: function learn() {\n    extend(true, app, new App());\n    extend(true, window, { app: app });\n    var lang_from_ext = getUrlParameter('lang_from');\n    var lang_to_ext = getUrlParameter('lang_to');\n    if (lang_from_ext && lang_to_ext) {\n      var changed = Storage.language.set(from, lang_from_ext) || Storage.language.set(to, lang_to_ext);\n      if (changed) Storage.category.set(categories[0].sub(0));\n    } else {\n      lang_from_ext = Storage.language.get(from);\n      lang_to_ext = Storage.language.get(to);\n    }\n    var lang_from = Language.getWithExt(lang_from_ext);\n    var lang_to = Language.getWithExt(lang_to_ext);\n    app.setLanguage(from, lang_from);\n    app.setLanguage(to, lang_to);\n    app.setEditor(from, DOM.initEditor(from, lang_from));\n    app.setEditor(to, DOM.initEditor(to, lang_to));\n    DOM.initCategories(categories);\n    DOM.setupLayout();\n    DOM.setupMatching();\n    DOM.setupExam();\n    DOM.setLanguage(from, lang_from);\n    DOM.setLanguage(to, lang_to);\n  }\n});\n\nvar getUrlParameter = function getUrlParameter(sParam) {\n  var params = decodeURIComponent(window.location.search.substring(1)).split('&');\n  for (var i = 0; i < params.length; i++) {\n    var param = params[i].split('=');\n    if (param[0] === sParam) {\n      return param[1] === undefined ? true : param[1];\n    }\n  }\n  return null;\n};\n\n},{\"./app\":2,\"./app/constructor\":1,\"./bean\":4,\"./dom\":7,\"./server\":26,\"./storage\":30,\"rsvp\":35}],22:[function(require,module,exports){\n'use strict';\n\nvar request = require('./request');\n\nmodule.exports = function (url) {\n  return request(url, {\n    type: 'GET'\n  });\n};\n\n},{\"./request\":23}],23:[function(require,module,exports){\n'use strict';\n\nvar RSVP = require('rsvp');\nvar _$ = $,\n    ajax = _$.ajax,\n    extend = _$.extend;\n\n\nvar defaults = {};\n\nmodule.exports = function (url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  return new RSVP.Promise(function (resolve, reject) {\n    var callbacks = {\n      success: function success(response) {\n        resolve(response);\n      },\n      error: function error(reason) {\n        reject(reason);\n      }\n    };\n    var opts = extend({}, defaults, options, callbacks, { url: url });\n    ajax(opts);\n  });\n};\n\n},{\"rsvp\":35}],24:[function(require,module,exports){\n'use strict';\n\nvar _require = require('../bean'),\n    Category = _require.Category;\n\nmodule.exports = function () {\n  return categories;\n};\n\nvar categories = [new Category('Comments', 'comment', [new Category('Single Line Comments', 'single'), new Category('Multiple Lines Comments', 'multi')]), new Category('Variables', 'var', [new Category('Definition', 'def'), new Category('Boolean Type', 'bool'), new Category('Numeric Types', 'num'), new Category('Strings', 'str'), new Category('Data Structures', 'data_structure'), new Category('Constants', 'const')]), new Category('Operators', 'operator', [new Category('Boolean Operations', 'bool'), new Category('Comparisons', 'compare'), new Category('Bitwise Operations', 'bitwise')]), new Category('Conditionals', 'conditional', [new Category('If / Else Statement', 'if_else'), new Category('Switch / Case Statement', 'switch_case'), new Category('Ternary Operator', 'ternary')]), new Category('Loops', 'loop', [new Category('For Statement', 'for'), new Category('While Statement', 'while'), new Category('Continue Statement', 'continue'), new Category('Break Statement', 'break')]), new Category('Functions', 'func', [new Category('Definition', 'def'), new Category('Parameters', 'param'), new Category('Return Statement', 'return')]), new Category('Classes', 'class', [new Category('Definition', 'def'), new Category('Class Variables', 'cls_var'), new Category('Class Functions', 'cls_func'), new Category('Instances', 'obj'), new Category('Instance Variables', 'obj_var'), new Category('Instance Functions', 'obj_func'), new Category('Inheritance', 'inherit')]), new Category('Built-In', 'built_in', [new Category('Math Functions', 'math'), new Category('String Functions', 'str'), new Category('Data Structure Operations', 'data_structure'), new Category('Others', 'etc')])];\n\n},{\"../bean\":4}],25:[function(require,module,exports){\n'use strict';\n\nvar _require = require('../bean'),\n    Language = _require.Language;\n\nmodule.exports = function () {\n  return languages;\n};\n\nvar languages = [new Language('C++', 'c_cpp', 'cpp'), new Language('Python', 'python', 'py'), new Language('Java', 'java', 'java'), new Language('EMCAScript', 'javascript', 'js'), new Language('Nada.', null, 'idk')];\n\n},{\"../bean\":4}],26:[function(require,module,exports){\n'use strict';\n\nvar loadCode = require('./load_code');\nvar loadDesc = require('./load_desc');\nvar getCategories = require('./get_categories');\nvar getLanguages = require('./get_languages');\n\nmodule.exports = {\n  loadCode: loadCode,\n  loadDesc: loadDesc,\n  getCategories: getCategories,\n  getLanguages: getLanguages\n};\n\n},{\"./get_categories\":24,\"./get_languages\":25,\"./load_code\":27,\"./load_desc\":28}],27:[function(require,module,exports){\n'use strict';\n\nvar get = require('./ajax/get');\n\nmodule.exports = function (category, language) {\n  var path = language.ext + '/code.' + language.ext;\n  do {\n    path = category.dir + '/' + path;\n    category = category.parent;\n  } while (category);\n  return get('./data/' + path);\n};\n\n},{\"./ajax/get\":22}],28:[function(require,module,exports){\n'use strict';\n\nvar get = require('./ajax/get');\n\nmodule.exports = function (category, language) {\n  var path = language.ext + '/desc.md';\n  do {\n    path = category.dir + '/' + path;\n    category = category.parent;\n  } while (category);\n  return get('./data/' + path);\n};\n\n},{\"./ajax/get\":22}],29:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _require = require('./manager'),\n    _set = _require.set,\n    _get = _require.get;\n\nvar Server = require('../server');\n\nvar getName = function getName() {\n  return 'category';\n};\n\nmodule.exports = {\n  set: function set(category) {\n    var path = '';\n    do {\n      path = category.dir + '/' + path;\n      category = category.parent;\n    } while (category);\n    path.substr(0, path.length - 1);\n    return _set(getName(), path);\n  },\n  get: function get() {\n    var categories = Server.getCategories();\n    var dirs = _get(getName()).split('/');\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      var _loop = function _loop() {\n        var dir = _step.value;\n\n        var category = $.grep(categories, function (category) {\n          return category.dir == dir;\n        })[0];\n        categories = category.children;\n        if (!categories.length) return {\n            v: category\n          };\n      };\n\n      for (var _iterator = dirs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var _ret = _loop();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return null;\n  }\n};\n\n},{\"../server\":26,\"./manager\":32}],30:[function(require,module,exports){\n'use strict';\n\nvar language = require('./language');\nvar category = require('./category');\n\nmodule.exports = {\n  language: language,\n  category: category\n};\n\n},{\"./category\":29,\"./language\":31}],31:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./manager'),\n    _set = _require.set,\n    _get = _require.get;\n\nvar getName = function getName(index) {\n  return 'lang_' + index;\n};\n\nmodule.exports = {\n  set: function set(index, ext) {\n    return _set(getName(index), ext);\n  },\n  get: function get(index) {\n    return _get(getName(index));\n  }\n};\n\n},{\"./manager\":32}],32:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = {\n  set: function set(name, value) {\n    if (Cookies.get(name) == value) return false;\n    Cookies.set(name, value);\n    return true;\n  },\n  get: function get(name) {\n    return Cookies.get(name);\n  },\n  remove: function remove(name) {\n    Cookies.remove(name);\n    return true;\n  }\n};\n\n},{}],33:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  zip: function zip(code) {\n    return code.trim().replace(/^\\s*[\\r\\n]/gm, '').replace(/\\b\\s+\\B/g, '').replace(/\\B\\s+\\b/g, '').replace(/\\B\\s+\\B/g, '');\n  }\n};\n\n},{}],34:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],35:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview RSVP - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2016 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE\n * @version   3.3.3\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.RSVP = global.RSVP || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction indexOf(callbacks, callback) {\n  for (var i = 0, l = callbacks.length; i < l; i++) {\n    if (callbacks[i] === callback) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction callbacksFor(object) {\n  var callbacks = object._promiseCallbacks;\n\n  if (!callbacks) {\n    callbacks = object._promiseCallbacks = {};\n  }\n\n  return callbacks;\n}\n\n/**\n  @class RSVP.EventTarget\n*/\nvar EventTarget = {\n\n  /**\n    `RSVP.EventTarget.mixin` extends an object with EventTarget methods. For\n    Example:\n     ```javascript\n    let object = {};\n     RSVP.EventTarget.mixin(object);\n     object.on('finished', function(event) {\n      // handle event\n    });\n     object.trigger('finished', { detail: value });\n    ```\n     `EventTarget.mixin` also works with prototypes:\n     ```javascript\n    let Person = function() {};\n    RSVP.EventTarget.mixin(Person.prototype);\n     let yehuda = new Person();\n    let tom = new Person();\n     yehuda.on('poke', function(event) {\n      console.log('Yehuda says OW');\n    });\n     tom.on('poke', function(event) {\n      console.log('Tom says OW');\n    });\n     yehuda.trigger('poke');\n    tom.trigger('poke');\n    ```\n     @method mixin\n    @for RSVP.EventTarget\n    @private\n    @param {Object} object object to extend with EventTarget methods\n  */\n  mixin: function mixin(object) {\n    object['on'] = this['on'];\n    object['off'] = this['off'];\n    object['trigger'] = this['trigger'];\n    object._promiseCallbacks = undefined;\n    return object;\n  },\n\n  /**\n    Registers a callback to be executed when `eventName` is triggered\n     ```javascript\n    object.on('event', function(eventInfo){\n      // handle the event\n    });\n     object.trigger('event');\n    ```\n     @method on\n    @for RSVP.EventTarget\n    @private\n    @param {String} eventName name of the event to listen for\n    @param {Function} callback function to be called when the event is triggered.\n  */\n  on: function on(eventName, callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('Callback must be a function');\n    }\n\n    var allCallbacks = callbacksFor(this),\n        callbacks = undefined;\n\n    callbacks = allCallbacks[eventName];\n\n    if (!callbacks) {\n      callbacks = allCallbacks[eventName] = [];\n    }\n\n    if (indexOf(callbacks, callback) === -1) {\n      callbacks.push(callback);\n    }\n  },\n\n  /**\n    You can use `off` to stop firing a particular callback for an event:\n     ```javascript\n    function doStuff() { // do stuff! }\n    object.on('stuff', doStuff);\n     object.trigger('stuff'); // doStuff will be called\n     // Unregister ONLY the doStuff callback\n    object.off('stuff', doStuff);\n    object.trigger('stuff'); // doStuff will NOT be called\n    ```\n     If you don't pass a `callback` argument to `off`, ALL callbacks for the\n    event will not be executed when the event fires. For example:\n     ```javascript\n    let callback1 = function(){};\n    let callback2 = function(){};\n     object.on('stuff', callback1);\n    object.on('stuff', callback2);\n     object.trigger('stuff'); // callback1 and callback2 will be executed.\n     object.off('stuff');\n    object.trigger('stuff'); // callback1 and callback2 will not be executed!\n    ```\n     @method off\n    @for RSVP.EventTarget\n    @private\n    @param {String} eventName event to stop listening to\n    @param {Function} callback optional argument. If given, only the function\n    given will be removed from the event's callback queue. If no `callback`\n    argument is given, all callbacks will be removed from the event's callback\n    queue.\n  */\n  off: function off(eventName, callback) {\n    var allCallbacks = callbacksFor(this),\n        callbacks = undefined,\n        index = undefined;\n\n    if (!callback) {\n      allCallbacks[eventName] = [];\n      return;\n    }\n\n    callbacks = allCallbacks[eventName];\n\n    index = indexOf(callbacks, callback);\n\n    if (index !== -1) {\n      callbacks.splice(index, 1);\n    }\n  },\n\n  /**\n    Use `trigger` to fire custom events. For example:\n     ```javascript\n    object.on('foo', function(){\n      console.log('foo event happened!');\n    });\n    object.trigger('foo');\n    // 'foo event happened!' logged to the console\n    ```\n     You can also pass a value as a second argument to `trigger` that will be\n    passed as an argument to all event listeners for the event:\n     ```javascript\n    object.on('foo', function(value){\n      console.log(value.name);\n    });\n     object.trigger('foo', { name: 'bar' });\n    // 'bar' logged to the console\n    ```\n     @method trigger\n    @for RSVP.EventTarget\n    @private\n    @param {String} eventName name of the event to be triggered\n    @param {*} options optional value to be passed to any event handlers for\n    the given `eventName`\n  */\n  trigger: function trigger(eventName, options, label) {\n    var allCallbacks = callbacksFor(this),\n        callbacks = undefined,\n        callback = undefined;\n\n    if (callbacks = allCallbacks[eventName]) {\n      // Don't cache the callbacks.length since it may grow\n      for (var i = 0; i < callbacks.length; i++) {\n        callback = callbacks[i];\n\n        callback(options, label);\n      }\n    }\n  }\n};\n\nvar config = {\n  instrument: false\n};\n\nEventTarget['mixin'](config);\n\nfunction configure(name, value) {\n  if (name === 'onerror') {\n    // handle for legacy users that expect the actual\n    // error to be passed to their function added via\n    // `RSVP.configure('onerror', someFunctionHere);`\n    config['on']('error', value);\n    return;\n  }\n\n  if (arguments.length === 2) {\n    config[name] = value;\n  } else {\n    return config[name];\n  }\n}\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nfunction isMaybeThenable(x) {\n  return typeof x === 'object' && x !== null;\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\n// Date.now is not available in browsers < IE9\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now#Compatibility\nvar now = Date.now || function () {\n  return new Date().getTime();\n};\n\nfunction F() {}\n\nvar o_create = Object.create || function (o) {\n  if (arguments.length > 1) {\n    throw new Error('Second argument not supported');\n  }\n  if (typeof o !== 'object') {\n    throw new TypeError('Argument must be an object');\n  }\n  F.prototype = o;\n  return new F();\n};\n\nvar queue = [];\n\nfunction scheduleFlush() {\n  setTimeout(function () {\n    for (var i = 0; i < queue.length; i++) {\n      var entry = queue[i];\n\n      var payload = entry.payload;\n\n      payload.guid = payload.key + payload.id;\n      payload.childGuid = payload.key + payload.childId;\n      if (payload.error) {\n        payload.stack = payload.error.stack;\n      }\n\n      config['trigger'](entry.name, entry.payload);\n    }\n    queue.length = 0;\n  }, 50);\n}\nfunction instrument(eventName, promise, child) {\n  if (1 === queue.push({\n    name: eventName,\n    payload: {\n      key: promise._guidKey,\n      id: promise._id,\n      eventName: eventName,\n      detail: promise._result,\n      childId: child && child._id,\n      label: promise._label,\n      timeStamp: now(),\n      error: config[\"instrument-with-stack\"] ? new Error(promise._label) : null\n    } })) {\n    scheduleFlush();\n  }\n}\n\n/**\n  `RSVP.Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new RSVP.Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = RSVP.Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {*} object value that the returned promise will be resolved with\n  @param {String} label optional string for identifying the returned promise.\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object, label) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop, label);\n  resolve(promise, object);\n  return promise;\n}\n\nfunction withOwnPromise() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  config.async(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value, undefined);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    thenable._onError = null;\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      if (thenable !== value) {\n        resolve(promise, value, undefined);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && promise.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    fulfill(promise, value);\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onError) {\n    promise._onError(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length === 0) {\n    if (config.instrument) {\n      instrument('fulfilled', promise);\n    }\n  } else {\n    config.async(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n  config.async(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var subscribers = parent._subscribers;\n  var length = subscribers.length;\n\n  parent._onError = null;\n\n  subscribers[length] = child;\n  subscribers[length + FULFILLED] = onFulfillment;\n  subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    config.async(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (config.instrument) {\n    instrument(settled === FULFILLED ? 'fulfilled' : 'rejected', promise);\n  }\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, withOwnPromise());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  var resolved = false;\n  try {\n    resolver(function (value) {\n      if (resolved) {\n        return;\n      }\n      resolved = true;\n      resolve(promise, value);\n    }, function (reason) {\n      if (resolved) {\n        return;\n      }\n      resolved = true;\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nfunction then(onFulfillment, onRejection, label) {\n  var _arguments = arguments;\n\n  var parent = this;\n  var state = parent._state;\n\n  if (state === FULFILLED && !onFulfillment || state === REJECTED && !onRejection) {\n    config.instrument && instrument('chained', parent, parent);\n    return parent;\n  }\n\n  parent._onError = null;\n\n  var child = new parent.constructor(noop, label);\n  var result = parent._result;\n\n  config.instrument && instrument('chained', parent, child);\n\n  if (state) {\n    (function () {\n      var callback = _arguments[state - 1];\n      config.async(function () {\n        return invokeCallback(state, child, callback, result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\nfunction makeSettledResult(state, position, value) {\n  if (state === FULFILLED) {\n    return {\n      state: 'fulfilled',\n      value: value\n    };\n  } else {\n    return {\n      state: 'rejected',\n      reason: value\n    };\n  }\n}\n\nfunction Enumerator(Constructor, input, abortOnReject, label) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop, label);\n  this._abortOnReject = abortOnReject;\n\n  if (this._validateInput(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._init();\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, this._validationError());\n  }\n}\n\nEnumerator.prototype._validateInput = function (input) {\n  return isArray(input);\n};\n\nEnumerator.prototype._validationError = function () {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._init = function () {\n  this._result = new Array(this.length);\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var promise = this.promise;\n  var input = this._input;\n\n  for (var i = 0; promise._state === PENDING && i < length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator.prototype._settleMaybeThenable = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve = c.resolve;\n\n  if (resolve === resolve$1) {\n    var then$$ = getThen(entry);\n\n    if (then$$ === then && entry._state !== PENDING) {\n      entry._onError = null;\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof then$$ !== 'function') {\n      this._remaining--;\n      this._result[i] = this._makeResult(FULFILLED, i, entry);\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, then$$);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve) {\n        return resolve(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve(entry), i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  if (isMaybeThenable(entry)) {\n    this._settleMaybeThenable(entry, i);\n  } else {\n    this._remaining--;\n    this._result[i] = this._makeResult(FULFILLED, i, entry);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (this._abortOnReject && state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = this._makeResult(state, i, value);\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._makeResult = function (state, i, value) {\n  return value;\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `RSVP.Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = RSVP.resolve(1);\n  let promise2 = RSVP.resolve(2);\n  let promise3 = RSVP.resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  RSVP.Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `RSVP.all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = RSVP.resolve(1);\n  let promise2 = RSVP.reject(new Error(\"2\"));\n  let promise3 = RSVP.reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  RSVP.Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries, label) {\n  return new Enumerator(this, entries, true, /* abort on reject */label).promise;\n}\n\n/**\n  `RSVP.Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new RSVP.Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new RSVP.Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  RSVP.Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `RSVP.Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new RSVP.Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new RSVP.Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  RSVP.Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  RSVP.Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} entries array of promises to observe\n  @param {String} label optional string for describing the promise returned.\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries, label) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  var promise = new Constructor(noop, label);\n\n  if (!isArray(entries)) {\n    reject(promise, new TypeError('You must pass an array to race.'));\n    return promise;\n  }\n\n  for (var i = 0; promise._state === PENDING && i < entries.length; i++) {\n    subscribe(Constructor.resolve(entries[i]), undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n\n  return promise;\n}\n\n/**\n  `RSVP.Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new RSVP.Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = RSVP.Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {*} reason value that the returned promise will be rejected with.\n  @param {String} label optional string for identifying the returned promise.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason, label) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop, label);\n  reject(promise, reason);\n  return promise;\n}\n\nvar guidKey = 'rsvp_' + now() + '-';\nvar counter = 0;\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise’s eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class RSVP.Promise\n  @param {function} resolver\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver, label) {\n  this._id = counter++;\n  this._label = label;\n  this._state = undefined;\n  this._result = undefined;\n  this._subscribers = [];\n\n  config.instrument && instrument('created', this);\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.cast = resolve$1; // deprecated\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve$1;\nPromise.reject = reject$1;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  _guidKey: guidKey,\n\n  _onError: function _onError(reason) {\n    var promise = this;\n    config.after(function () {\n      if (promise._onError) {\n        config['trigger']('error', reason, promise._label);\n      }\n    });\n  },\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we\\'re unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we\\'re unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfillment\n    @param {Function} onRejection\n    @param {String} label optional string for labeling the promise.\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn\\'t find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    @param {String} label optional string for labeling the promise.\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection, label) {\n    return this.then(undefined, onRejection, label);\n  },\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @param {String} label optional string for labeling the promise.\n    Useful for tooling.\n    @return {Promise}\n  */\n  'finally': function _finally(callback, label) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    return promise.then(function (value) {\n      return constructor.resolve(callback()).then(function () {\n        return value;\n      });\n    }, function (reason) {\n      return constructor.resolve(callback()).then(function () {\n        throw reason;\n      });\n    }, label);\n  }\n};\n\nfunction Result() {\n  this.value = undefined;\n}\n\nvar ERROR = new Result();\nvar GET_THEN_ERROR$1 = new Result();\n\nfunction getThen$1(obj) {\n  try {\n    return obj.then;\n  } catch (error) {\n    ERROR.value = error;\n    return ERROR;\n  }\n}\n\nfunction tryApply(f, s, a) {\n  try {\n    f.apply(s, a);\n  } catch (error) {\n    ERROR.value = error;\n    return ERROR;\n  }\n}\n\nfunction makeObject(_, argumentNames) {\n  var obj = {};\n  var length = _.length;\n  var args = new Array(length);\n\n  for (var x = 0; x < length; x++) {\n    args[x] = _[x];\n  }\n\n  for (var i = 0; i < argumentNames.length; i++) {\n    var _name = argumentNames[i];\n    obj[_name] = args[i + 1];\n  }\n\n  return obj;\n}\n\nfunction arrayResult(_) {\n  var length = _.length;\n  var args = new Array(length - 1);\n\n  for (var i = 1; i < length; i++) {\n    args[i - 1] = _[i];\n  }\n\n  return args;\n}\n\nfunction wrapThenable(_then, promise) {\n  return {\n    then: function then(onFulFillment, onRejection) {\n      return _then.call(promise, onFulFillment, onRejection);\n    }\n  };\n}\n\n/**\n  `RSVP.denodeify` takes a 'node-style' function and returns a function that\n  will return an `RSVP.Promise`. You can use `denodeify` in Node.js or the\n  browser when you'd prefer to use promises over using callbacks. For example,\n  `denodeify` transforms the following:\n\n  ```javascript\n  let fs = require('fs');\n\n  fs.readFile('myfile.txt', function(err, data){\n    if (err) return handleError(err);\n    handleData(data);\n  });\n  ```\n\n  into:\n\n  ```javascript\n  let fs = require('fs');\n  let readFile = RSVP.denodeify(fs.readFile);\n\n  readFile('myfile.txt').then(handleData, handleError);\n  ```\n\n  If the node function has multiple success parameters, then `denodeify`\n  just returns the first one:\n\n  ```javascript\n  let request = RSVP.denodeify(require('request'));\n\n  request('http://example.com').then(function(res) {\n    // ...\n  });\n  ```\n\n  However, if you need all success parameters, setting `denodeify`'s\n  second parameter to `true` causes it to return all success parameters\n  as an array:\n\n  ```javascript\n  let request = RSVP.denodeify(require('request'), true);\n\n  request('http://example.com').then(function(result) {\n    // result[0] -> res\n    // result[1] -> body\n  });\n  ```\n\n  Or if you pass it an array with names it returns the parameters as a hash:\n\n  ```javascript\n  let request = RSVP.denodeify(require('request'), ['res', 'body']);\n\n  request('http://example.com').then(function(result) {\n    // result.res\n    // result.body\n  });\n  ```\n\n  Sometimes you need to retain the `this`:\n\n  ```javascript\n  let app = require('express')();\n  let render = RSVP.denodeify(app.render.bind(app));\n  ```\n\n  The denodified function inherits from the original function. It works in all\n  environments, except IE 10 and below. Consequently all properties of the original\n  function are available to you. However, any properties you change on the\n  denodeified function won't be changed on the original function. Example:\n\n  ```javascript\n  let request = RSVP.denodeify(require('request')),\n      cookieJar = request.jar(); // <- Inheritance is used here\n\n  request('http://example.com', {jar: cookieJar}).then(function(res) {\n    // cookieJar.cookies holds now the cookies returned by example.com\n  });\n  ```\n\n  Using `denodeify` makes it easier to compose asynchronous operations instead\n  of using callbacks. For example, instead of:\n\n  ```javascript\n  let fs = require('fs');\n\n  fs.readFile('myfile.txt', function(err, data){\n    if (err) { ... } // Handle error\n    fs.writeFile('myfile2.txt', data, function(err){\n      if (err) { ... } // Handle error\n      console.log('done')\n    });\n  });\n  ```\n\n  you can chain the operations together using `then` from the returned promise:\n\n  ```javascript\n  let fs = require('fs');\n  let readFile = RSVP.denodeify(fs.readFile);\n  let writeFile = RSVP.denodeify(fs.writeFile);\n\n  readFile('myfile.txt').then(function(data){\n    return writeFile('myfile2.txt', data);\n  }).then(function(){\n    console.log('done')\n  }).catch(function(error){\n    // Handle error\n  });\n  ```\n\n  @method denodeify\n  @static\n  @for RSVP\n  @param {Function} nodeFunc a 'node-style' function that takes a callback as\n  its last argument. The callback expects an error to be passed as its first\n  argument (if an error occurred, otherwise null), and the value from the\n  operation as its second argument ('function(err, value){ }').\n  @param {Boolean|Array} [options] An optional paramter that if set\n  to `true` causes the promise to fulfill with the callback's success arguments\n  as an array. This is useful if the node function has multiple success\n  paramters. If you set this paramter to an array with names, the promise will\n  fulfill with a hash with these names as keys and the success parameters as\n  values.\n  @return {Function} a function that wraps `nodeFunc` to return an\n  `RSVP.Promise`\n  @static\n*/\nfunction denodeify(nodeFunc, options) {\n  var fn = function fn() {\n    var self = this;\n    var l = arguments.length;\n    var args = new Array(l + 1);\n    var promiseInput = false;\n\n    for (var i = 0; i < l; ++i) {\n      var arg = arguments[i];\n\n      if (!promiseInput) {\n        // TODO: clean this up\n        promiseInput = needsPromiseInput(arg);\n        if (promiseInput === GET_THEN_ERROR$1) {\n          var p = new Promise(noop);\n          reject(p, GET_THEN_ERROR$1.value);\n          return p;\n        } else if (promiseInput && promiseInput !== true) {\n          arg = wrapThenable(promiseInput, arg);\n        }\n      }\n      args[i] = arg;\n    }\n\n    var promise = new Promise(noop);\n\n    args[l] = function (err, val) {\n      if (err) reject(promise, err);else if (options === undefined) resolve(promise, val);else if (options === true) resolve(promise, arrayResult(arguments));else if (isArray(options)) resolve(promise, makeObject(arguments, options));else resolve(promise, val);\n    };\n\n    if (promiseInput) {\n      return handlePromiseInput(promise, args, nodeFunc, self);\n    } else {\n      return handleValueInput(promise, args, nodeFunc, self);\n    }\n  };\n\n  fn.__proto__ = nodeFunc;\n\n  return fn;\n}\n\nfunction handleValueInput(promise, args, nodeFunc, self) {\n  var result = tryApply(nodeFunc, self, args);\n  if (result === ERROR) {\n    reject(promise, result.value);\n  }\n  return promise;\n}\n\nfunction handlePromiseInput(promise, args, nodeFunc, self) {\n  return Promise.all(args).then(function (args) {\n    var result = tryApply(nodeFunc, self, args);\n    if (result === ERROR) {\n      reject(promise, result.value);\n    }\n    return promise;\n  });\n}\n\nfunction needsPromiseInput(arg) {\n  if (arg && typeof arg === 'object') {\n    if (arg.constructor === Promise) {\n      return true;\n    } else {\n      return getThen$1(arg);\n    }\n  } else {\n    return false;\n  }\n}\n\n/**\n  This is a convenient alias for `RSVP.Promise.all`.\n\n  @method all\n  @static\n  @for RSVP\n  @param {Array} array Array of promises.\n  @param {String} label An optional label. This is useful\n  for tooling.\n*/\nfunction all$1(array, label) {\n  return Promise.all(array, label);\n}\n\nfunction AllSettled(Constructor, entries, label) {\n  this._superConstructor(Constructor, entries, false, /* don't abort on reject */label);\n}\n\nAllSettled.prototype = o_create(Enumerator.prototype);\nAllSettled.prototype._superConstructor = Enumerator;\nAllSettled.prototype._makeResult = makeSettledResult;\nAllSettled.prototype._validationError = function () {\n  return new Error('allSettled must be called with an array');\n};\n\n/**\n  `RSVP.allSettled` is similar to `RSVP.all`, but instead of implementing\n  a fail-fast method, it waits until all the promises have returned and\n  shows you all the results. This is useful if you want to handle multiple\n  promises' failure states together as a set.\n\n  Returns a promise that is fulfilled when all the given promises have been\n  settled. The return promise is fulfilled with an array of the states of\n  the promises passed into the `promises` array argument.\n\n  Each state object will either indicate fulfillment or rejection, and\n  provide the corresponding value or reason. The states will take one of\n  the following formats:\n\n  ```javascript\n  { state: 'fulfilled', value: value }\n    or\n  { state: 'rejected', reason: reason }\n  ```\n\n  Example:\n\n  ```javascript\n  let promise1 = RSVP.Promise.resolve(1);\n  let promise2 = RSVP.Promise.reject(new Error('2'));\n  let promise3 = RSVP.Promise.reject(new Error('3'));\n  let promises = [ promise1, promise2, promise3 ];\n\n  RSVP.allSettled(promises).then(function(array){\n    // array == [\n    //   { state: 'fulfilled', value: 1 },\n    //   { state: 'rejected', reason: Error },\n    //   { state: 'rejected', reason: Error }\n    // ]\n    // Note that for the second item, reason.message will be '2', and for the\n    // third item, reason.message will be '3'.\n  }, function(error) {\n    // Not run. (This block would only be called if allSettled had failed,\n    // for instance if passed an incorrect argument type.)\n  });\n  ```\n\n  @method allSettled\n  @static\n  @for RSVP\n  @param {Array} entries\n  @param {String} label - optional string that describes the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled with an array of the settled\n  states of the constituent promises.\n*/\nfunction allSettled(entries, label) {\n  return new AllSettled(Promise, entries, label).promise;\n}\n\n/**\n  This is a convenient alias for `RSVP.Promise.race`.\n\n  @method race\n  @static\n  @for RSVP\n  @param {Array} array Array of promises.\n  @param {String} label An optional label. This is useful\n  for tooling.\n */\nfunction race$1(array, label) {\n  return Promise.race(array, label);\n}\n\nfunction PromiseHash(Constructor, object, label) {\n  this._superConstructor(Constructor, object, true, label);\n}\n\nPromiseHash.prototype = o_create(Enumerator.prototype);\nPromiseHash.prototype._superConstructor = Enumerator;\nPromiseHash.prototype._init = function () {\n  this._result = {};\n};\n\nPromiseHash.prototype._validateInput = function (input) {\n  return input && typeof input === 'object';\n};\n\nPromiseHash.prototype._validationError = function () {\n  return new Error('Promise.hash must be called with an object');\n};\n\nPromiseHash.prototype._enumerate = function () {\n  var enumerator = this;\n  var promise = enumerator.promise;\n  var input = enumerator._input;\n  var results = [];\n\n  for (var key in input) {\n    if (promise._state === PENDING && Object.prototype.hasOwnProperty.call(input, key)) {\n      results.push({\n        position: key,\n        entry: input[key]\n      });\n    }\n  }\n\n  var length = results.length;\n  enumerator._remaining = length;\n  var result = undefined;\n\n  for (var i = 0; promise._state === PENDING && i < length; i++) {\n    result = results[i];\n    enumerator._eachEntry(result.entry, result.position);\n  }\n};\n\n/**\n  `RSVP.hash` is similar to `RSVP.all`, but takes an object instead of an array\n  for its `promises` argument.\n\n  Returns a promise that is fulfilled when all the given promises have been\n  fulfilled, or rejected if any of them become rejected. The returned promise\n  is fulfilled with a hash that has the same key names as the `promises` object\n  argument. If any of the values in the object are not promises, they will\n  simply be copied over to the fulfilled object.\n\n  Example:\n\n  ```javascript\n  let promises = {\n    myPromise: RSVP.resolve(1),\n    yourPromise: RSVP.resolve(2),\n    theirPromise: RSVP.resolve(3),\n    notAPromise: 4\n  };\n\n  RSVP.hash(promises).then(function(hash){\n    // hash here is an object that looks like:\n    // {\n    //   myPromise: 1,\n    //   yourPromise: 2,\n    //   theirPromise: 3,\n    //   notAPromise: 4\n    // }\n  });\n  ````\n\n  If any of the `promises` given to `RSVP.hash` are rejected, the first promise\n  that is rejected will be given as the reason to the rejection handler.\n\n  Example:\n\n  ```javascript\n  let promises = {\n    myPromise: RSVP.resolve(1),\n    rejectedPromise: RSVP.reject(new Error('rejectedPromise')),\n    anotherRejectedPromise: RSVP.reject(new Error('anotherRejectedPromise')),\n  };\n\n  RSVP.hash(promises).then(function(hash){\n    // Code here never runs because there are rejected promises!\n  }, function(reason) {\n    // reason.message === 'rejectedPromise'\n  });\n  ```\n\n  An important note: `RSVP.hash` is intended for plain JavaScript objects that\n  are just a set of keys and values. `RSVP.hash` will NOT preserve prototype\n  chains.\n\n  Example:\n\n  ```javascript\n  function MyConstructor(){\n    this.example = RSVP.resolve('Example');\n  }\n\n  MyConstructor.prototype = {\n    protoProperty: RSVP.resolve('Proto Property')\n  };\n\n  let myObject = new MyConstructor();\n\n  RSVP.hash(myObject).then(function(hash){\n    // protoProperty will not be present, instead you will just have an\n    // object that looks like:\n    // {\n    //   example: 'Example'\n    // }\n    //\n    // hash.hasOwnProperty('protoProperty'); // false\n    // 'undefined' === typeof hash.protoProperty\n  });\n  ```\n\n  @method hash\n  @static\n  @for RSVP\n  @param {Object} object\n  @param {String} label optional string that describes the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all properties of `promises`\n  have been fulfilled, or rejected if any of them become rejected.\n*/\nfunction hash(object, label) {\n  return new PromiseHash(Promise, object, label).promise;\n}\n\nfunction HashSettled(Constructor, object, label) {\n  this._superConstructor(Constructor, object, false, label);\n}\n\nHashSettled.prototype = o_create(PromiseHash.prototype);\nHashSettled.prototype._superConstructor = Enumerator;\nHashSettled.prototype._makeResult = makeSettledResult;\n\nHashSettled.prototype._validationError = function () {\n  return new Error('hashSettled must be called with an object');\n};\n\n/**\n  `RSVP.hashSettled` is similar to `RSVP.allSettled`, but takes an object\n  instead of an array for its `promises` argument.\n\n  Unlike `RSVP.all` or `RSVP.hash`, which implement a fail-fast method,\n  but like `RSVP.allSettled`, `hashSettled` waits until all the\n  constituent promises have returned and then shows you all the results\n  with their states and values/reasons. This is useful if you want to\n  handle multiple promises' failure states together as a set.\n\n  Returns a promise that is fulfilled when all the given promises have been\n  settled, or rejected if the passed parameters are invalid.\n\n  The returned promise is fulfilled with a hash that has the same key names as\n  the `promises` object argument. If any of the values in the object are not\n  promises, they will be copied over to the fulfilled object and marked with state\n  'fulfilled'.\n\n  Example:\n\n  ```javascript\n  let promises = {\n    myPromise: RSVP.Promise.resolve(1),\n    yourPromise: RSVP.Promise.resolve(2),\n    theirPromise: RSVP.Promise.resolve(3),\n    notAPromise: 4\n  };\n\n  RSVP.hashSettled(promises).then(function(hash){\n    // hash here is an object that looks like:\n    // {\n    //   myPromise: { state: 'fulfilled', value: 1 },\n    //   yourPromise: { state: 'fulfilled', value: 2 },\n    //   theirPromise: { state: 'fulfilled', value: 3 },\n    //   notAPromise: { state: 'fulfilled', value: 4 }\n    // }\n  });\n  ```\n\n  If any of the `promises` given to `RSVP.hash` are rejected, the state will\n  be set to 'rejected' and the reason for rejection provided.\n\n  Example:\n\n  ```javascript\n  let promises = {\n    myPromise: RSVP.Promise.resolve(1),\n    rejectedPromise: RSVP.Promise.reject(new Error('rejection')),\n    anotherRejectedPromise: RSVP.Promise.reject(new Error('more rejection')),\n  };\n\n  RSVP.hashSettled(promises).then(function(hash){\n    // hash here is an object that looks like:\n    // {\n    //   myPromise:              { state: 'fulfilled', value: 1 },\n    //   rejectedPromise:        { state: 'rejected', reason: Error },\n    //   anotherRejectedPromise: { state: 'rejected', reason: Error },\n    // }\n    // Note that for rejectedPromise, reason.message == 'rejection',\n    // and for anotherRejectedPromise, reason.message == 'more rejection'.\n  });\n  ```\n\n  An important note: `RSVP.hashSettled` is intended for plain JavaScript objects that\n  are just a set of keys and values. `RSVP.hashSettled` will NOT preserve prototype\n  chains.\n\n  Example:\n\n  ```javascript\n  function MyConstructor(){\n    this.example = RSVP.Promise.resolve('Example');\n  }\n\n  MyConstructor.prototype = {\n    protoProperty: RSVP.Promise.resolve('Proto Property')\n  };\n\n  let myObject = new MyConstructor();\n\n  RSVP.hashSettled(myObject).then(function(hash){\n    // protoProperty will not be present, instead you will just have an\n    // object that looks like:\n    // {\n    //   example: { state: 'fulfilled', value: 'Example' }\n    // }\n    //\n    // hash.hasOwnProperty('protoProperty'); // false\n    // 'undefined' === typeof hash.protoProperty\n  });\n  ```\n\n  @method hashSettled\n  @for RSVP\n  @param {Object} object\n  @param {String} label optional string that describes the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when when all properties of `promises`\n  have been settled.\n  @static\n*/\nfunction hashSettled(object, label) {\n  return new HashSettled(Promise, object, label).promise;\n}\n\nfunction rethrow(reason) {\n  setTimeout(function () {\n    throw reason;\n  });\n  throw reason;\n}\n\n/**\n  `RSVP.defer` returns an object similar to jQuery's `$.Deferred`.\n  `RSVP.defer` should be used when porting over code reliant on `$.Deferred`'s\n  interface. New code should use the `RSVP.Promise` constructor instead.\n\n  The object returned from `RSVP.defer` is a plain object with three properties:\n\n  * promise - an `RSVP.Promise`.\n  * reject - a function that causes the `promise` property on this object to\n    become rejected\n  * resolve - a function that causes the `promise` property on this object to\n    become fulfilled.\n\n  Example:\n\n   ```javascript\n   let deferred = RSVP.defer();\n\n   deferred.resolve(\"Success!\");\n\n   deferred.promise.then(function(value){\n     // value here is \"Success!\"\n   });\n   ```\n\n  @method defer\n  @static\n  @for RSVP\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Object}\n */\nfunction defer(label) {\n  var deferred = { resolve: undefined, reject: undefined };\n\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  }, label);\n\n  return deferred;\n}\n\n/**\n `RSVP.map` is similar to JavaScript's native `map` method, except that it\n  waits for all promises to become fulfilled before running the `mapFn` on\n  each item in given to `promises`. `RSVP.map` returns a promise that will\n  become fulfilled with the result of running `mapFn` on the values the promises\n  become fulfilled with.\n\n  For example:\n\n  ```javascript\n\n  let promise1 = RSVP.resolve(1);\n  let promise2 = RSVP.resolve(2);\n  let promise3 = RSVP.resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  let mapFn = function(item){\n    return item + 1;\n  };\n\n  RSVP.map(promises, mapFn).then(function(result){\n    // result is [ 2, 3, 4 ]\n  });\n  ```\n\n  If any of the `promises` given to `RSVP.map` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promise's\n  rejection handler. For example:\n\n  ```javascript\n  let promise1 = RSVP.resolve(1);\n  let promise2 = RSVP.reject(new Error('2'));\n  let promise3 = RSVP.reject(new Error('3'));\n  let promises = [ promise1, promise2, promise3 ];\n\n  let mapFn = function(item){\n    return item + 1;\n  };\n\n  RSVP.map(promises, mapFn).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(reason) {\n    // reason.message === '2'\n  });\n  ```\n\n  `RSVP.map` will also wait if a promise is returned from `mapFn`. For example,\n  say you want to get all comments from a set of blog posts, but you need\n  the blog posts first because they contain a url to those comments.\n\n  ```javscript\n\n  let mapFn = function(blogPost){\n    // getComments does some ajax and returns an RSVP.Promise that is fulfilled\n    // with some comments data\n    return getComments(blogPost.comments_url);\n  };\n\n  // getBlogPosts does some ajax and returns an RSVP.Promise that is fulfilled\n  // with some blog post data\n  RSVP.map(getBlogPosts(), mapFn).then(function(comments){\n    // comments is the result of asking the server for the comments\n    // of all blog posts returned from getBlogPosts()\n  });\n  ```\n\n  @method map\n  @static\n  @for RSVP\n  @param {Array} promises\n  @param {Function} mapFn function to be called on each fulfilled promise.\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled with the result of calling\n  `mapFn` on each fulfilled promise or value when they become fulfilled.\n   The promise will be rejected if any of the given `promises` become rejected.\n  @static\n*/\nfunction map(promises, mapFn, label) {\n  return Promise.all(promises, label).then(function (values) {\n    if (!isFunction(mapFn)) {\n      throw new TypeError(\"You must pass a function as map's second argument.\");\n    }\n\n    var length = values.length;\n    var results = new Array(length);\n\n    for (var i = 0; i < length; i++) {\n      results[i] = mapFn(values[i]);\n    }\n\n    return Promise.all(results, label);\n  });\n}\n\n/**\n  This is a convenient alias for `RSVP.Promise.resolve`.\n\n  @method resolve\n  @static\n  @for RSVP\n  @param {*} value value that the returned promise will be resolved with\n  @param {String} label optional string for identifying the returned promise.\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$2(value, label) {\n  return Promise.resolve(value, label);\n}\n\n/**\n  This is a convenient alias for `RSVP.Promise.reject`.\n\n  @method reject\n  @static\n  @for RSVP\n  @param {*} reason value that the returned promise will be rejected with.\n  @param {String} label optional string for identifying the returned promise.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$2(reason, label) {\n  return Promise.reject(reason, label);\n}\n\n/**\n `RSVP.filter` is similar to JavaScript's native `filter` method, except that it\n  waits for all promises to become fulfilled before running the `filterFn` on\n  each item in given to `promises`. `RSVP.filter` returns a promise that will\n  become fulfilled with the result of running `filterFn` on the values the\n  promises become fulfilled with.\n\n  For example:\n\n  ```javascript\n\n  let promise1 = RSVP.resolve(1);\n  let promise2 = RSVP.resolve(2);\n  let promise3 = RSVP.resolve(3);\n\n  let promises = [promise1, promise2, promise3];\n\n  let filterFn = function(item){\n    return item > 1;\n  };\n\n  RSVP.filter(promises, filterFn).then(function(result){\n    // result is [ 2, 3 ]\n  });\n  ```\n\n  If any of the `promises` given to `RSVP.filter` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promise's\n  rejection handler. For example:\n\n  ```javascript\n  let promise1 = RSVP.resolve(1);\n  let promise2 = RSVP.reject(new Error('2'));\n  let promise3 = RSVP.reject(new Error('3'));\n  let promises = [ promise1, promise2, promise3 ];\n\n  let filterFn = function(item){\n    return item > 1;\n  };\n\n  RSVP.filter(promises, filterFn).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(reason) {\n    // reason.message === '2'\n  });\n  ```\n\n  `RSVP.filter` will also wait for any promises returned from `filterFn`.\n  For instance, you may want to fetch a list of users then return a subset\n  of those users based on some asynchronous operation:\n\n  ```javascript\n\n  let alice = { name: 'alice' };\n  let bob   = { name: 'bob' };\n  let users = [ alice, bob ];\n\n  let promises = users.map(function(user){\n    return RSVP.resolve(user);\n  });\n\n  let filterFn = function(user){\n    // Here, Alice has permissions to create a blog post, but Bob does not.\n    return getPrivilegesForUser(user).then(function(privs){\n      return privs.can_create_blog_post === true;\n    });\n  };\n  RSVP.filter(promises, filterFn).then(function(users){\n    // true, because the server told us only Alice can create a blog post.\n    users.length === 1;\n    // false, because Alice is the only user present in `users`\n    users[0] === bob;\n  });\n  ```\n\n  @method filter\n  @static\n  @for RSVP\n  @param {Array} promises\n  @param {Function} filterFn - function to be called on each resolved value to\n  filter the final results.\n  @param {String} label optional string describing the promise. Useful for\n  tooling.\n  @return {Promise}\n*/\n\nfunction resolveAll(promises, label) {\n  return Promise.all(promises, label);\n}\n\nfunction resolveSingle(promise, label) {\n  return Promise.resolve(promise, label).then(function (promises) {\n    return resolveAll(promises, label);\n  });\n}\nfunction filter(promises, filterFn, label) {\n  var promise = isArray(promises) ? resolveAll(promises, label) : resolveSingle(promises, label);\n  return promise.then(function (values) {\n    if (!isFunction(filterFn)) {\n      throw new TypeError(\"You must pass a function as filter's second argument.\");\n    }\n\n    var length = values.length;\n    var filtered = new Array(length);\n\n    for (var i = 0; i < length; i++) {\n      filtered[i] = filterFn(values[i]);\n    }\n\n    return resolveAll(filtered, label).then(function (filtered) {\n      var results = new Array(length);\n      var newLength = 0;\n\n      for (var i = 0; i < length; i++) {\n        if (filtered[i]) {\n          results[newLength] = values[i];\n          newLength++;\n        }\n      }\n\n      results.length = newLength;\n\n      return results;\n    });\n  });\n}\n\nvar len = 0;\nvar vertxNext = undefined;\nfunction asap(callback, arg) {\n  queue$1[len] = callback;\n  queue$1[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 1, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    scheduleFlush$1();\n  }\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  var nextTick = process.nextTick;\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // setImmediate should be used instead instead\n  var version = process.versions.node.match(/^(?:(\\d+)\\.)?(?:(\\d+)\\.)?(\\*|\\d+)$/);\n  if (Array.isArray(version) && version[1] === '0' && version[2] === '10') {\n    nextTick = setImmediate;\n  }\n  return function () {\n    return nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    return node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  return function () {\n    return setTimeout(flush, 1);\n  };\n}\n\nvar queue$1 = new Array(1000);\n\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue$1[i];\n    var arg = queue$1[i + 1];\n\n    callback(arg);\n\n    queue$1[i] = undefined;\n    queue$1[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertex() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush$1 = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush$1 = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush$1 = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush$1 = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush$1 = attemptVertex();\n} else {\n  scheduleFlush$1 = useSetTimeout();\n}\n\nvar platform = undefined;\n\n/* global self */\nif (typeof self === 'object') {\n  platform = self;\n\n  /* global global */\n} else if (typeof global === 'object') {\n    platform = global;\n  } else {\n    throw new Error('no global: `self` or `global` found');\n  }\n\nvar _async$filter;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// defaults\n\n// the default export here is for backwards compat:\n//   https://github.com/tildeio/rsvp.js/issues/434\nconfig.async = asap;\nconfig.after = function (cb) {\n  return setTimeout(cb, 0);\n};\nvar cast = resolve$2;\n\nvar async = function async(callback, arg) {\n  return config.async(callback, arg);\n};\n\nfunction on() {\n  config['on'].apply(config, arguments);\n}\n\nfunction off() {\n  config['off'].apply(config, arguments);\n}\n\n// Set up instrumentation through `window.__PROMISE_INTRUMENTATION__`\nif (typeof window !== 'undefined' && typeof window['__PROMISE_INSTRUMENTATION__'] === 'object') {\n  var callbacks = window['__PROMISE_INSTRUMENTATION__'];\n  configure('instrument', true);\n  for (var eventName in callbacks) {\n    if (callbacks.hasOwnProperty(eventName)) {\n      on(eventName, callbacks[eventName]);\n    }\n  }\n}var rsvp = (_async$filter = {\n  cast: cast,\n  Promise: Promise,\n  EventTarget: EventTarget,\n  all: all$1,\n  allSettled: allSettled,\n  race: race$1,\n  hash: hash,\n  hashSettled: hashSettled,\n  rethrow: rethrow,\n  defer: defer,\n  denodeify: denodeify,\n  configure: configure,\n  on: on,\n  off: off,\n  resolve: resolve$2,\n  reject: reject$2,\n  map: map\n}, _defineProperty(_async$filter, 'async', async), _defineProperty(_async$filter, 'filter', // babel seems to error if async isn't a computed prop here...\nfilter), _async$filter);\n\nexports['default'] = rsvp;\nexports.cast = cast;\nexports.Promise = Promise;\nexports.EventTarget = EventTarget;\nexports.all = all$1;\nexports.allSettled = allSettled;\nexports.race = race$1;\nexports.hash = hash;\nexports.hashSettled = hashSettled;\nexports.rethrow = rethrow;\nexports.defer = defer;\nexports.denodeify = denodeify;\nexports.configure = configure;\nexports.on = on;\nexports.off = off;\nexports.resolve = resolve$2;\nexports.reject = reject$2;\nexports.map = map;\nexports.async = async;\nexports.filter = filter;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":34}]},{},[21])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9hcHAvY29uc3RydWN0b3IuanMiLCJqcy9hcHAvaW5kZXguanMiLCJqcy9iZWFuL2NhdGVnb3J5LmpzIiwianMvYmVhbi9pbmRleC5qcyIsImpzL2JlYW4vbGFuZ3VhZ2UuanMiLCJqcy9kb20vZXhhbS5qcyIsImpzL2RvbS9pbmRleC5qcyIsImpzL2RvbS9pbml0X2NhdGVnb3JpZXMuanMiLCJqcy9kb20vaW5pdF9lZGl0b3IuanMiLCJqcy9kb20vc2V0X2xhbmd1YWdlLmpzIiwianMvZG9tL3NldHVwX2V4YW0uanMiLCJqcy9kb20vc2V0dXBfbGF5b3V0LmpzIiwianMvZG9tL3NldHVwX21haW4vaW5kZXguanMiLCJqcy9kb20vc2V0dXBfbWFpbi9zZXR1cF9sYW5ndWFnZXMuanMiLCJqcy9kb20vc2V0dXBfbWFpbi9zZXR1cF9zbW9vdGhfc2Nyb2xsLmpzIiwianMvZG9tL3NldHVwX21haW4vc2V0dXBfc3RpY2tfdG9fYm90dG9tLmpzIiwianMvZG9tL3NldHVwX21hdGNoaW5nLmpzIiwianMvZG9tL3ZpZXdfY29kZS5qcyIsImpzL2RvbS92aWV3X2NvbXBhcmlzb24uanMiLCJqcy9kb20vdmlld19kZXNjLmpzIiwianMvaW5kZXguanMiLCJqcy9zZXJ2ZXIvYWpheC9nZXQuanMiLCJqcy9zZXJ2ZXIvYWpheC9yZXF1ZXN0LmpzIiwianMvc2VydmVyL2dldF9jYXRlZ29yaWVzLmpzIiwianMvc2VydmVyL2dldF9sYW5ndWFnZXMuanMiLCJqcy9zZXJ2ZXIvaW5kZXguanMiLCJqcy9zZXJ2ZXIvbG9hZF9jb2RlLmpzIiwianMvc2VydmVyL2xvYWRfZGVzYy5qcyIsImpzL3N0b3JhZ2UvY2F0ZWdvcnkuanMiLCJqcy9zdG9yYWdlL2luZGV4LmpzIiwianMvc3RvcmFnZS9sYW5ndWFnZS5qcyIsImpzL3N0b3JhZ2UvbWFuYWdlci5qcyIsImpzL3V0aWwvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JzdnAvZGlzdC9yc3ZwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7U0NBaUIsQztJQUFWLE0sTUFBQSxNOzs7QUFFUCxJQUFNLFlBQVk7QUFDaEIsWUFBVSxJQURNO0FBRWhCLFVBQVEsSUFGUTtBQUdoQixhQUFXLElBSEs7QUFJaEIsUUFBTSxFQUpVO0FBS2hCLFNBQU8sQ0FBQztBQUxRLENBQWxCOztBQVFBLE9BQU8sT0FBUCxHQUFpQixZQUFZO0FBQUE7O0FBQzNCLE9BQUssS0FBTCxHQUFhLENBQ1gsT0FBTyxJQUFQLEVBQWEsRUFBYixFQUFpQixTQUFqQixDQURXLEVBRVgsT0FBTyxJQUFQLEVBQWEsRUFBYixFQUFpQixTQUFqQixDQUZXLENBQWI7QUFJQSxPQUFLLFNBQUwsR0FBaUIsS0FBakI7O0FBRUEsT0FBSyxXQUFMLEdBQW1CLFVBQUMsS0FBRCxFQUFRLFFBQVIsRUFBcUI7QUFDdEMsVUFBSyxLQUFMLENBQVcsS0FBWCxFQUFrQixRQUFsQixHQUE2QixRQUE3QjtBQUNELEdBRkQ7O0FBSUEsT0FBSyxTQUFMLEdBQWlCLFVBQUMsS0FBRCxFQUFRLE1BQVIsRUFBbUI7QUFDbEMsVUFBSyxLQUFMLENBQVcsS0FBWCxFQUFrQixNQUFsQixHQUEyQixNQUEzQjtBQUNELEdBRkQ7O0FBSUEsT0FBSyxZQUFMLEdBQW9CLFVBQUMsS0FBRCxFQUFRLFNBQVIsRUFBc0I7QUFDeEMsVUFBSyxLQUFMLENBQVcsS0FBWCxFQUFrQixTQUFsQixHQUE4QixTQUE5QjtBQUNELEdBRkQ7O0FBSUEsT0FBSyxPQUFMLEdBQWUsVUFBQyxLQUFELEVBQVEsSUFBUixFQUFpQjtBQUM5QixVQUFLLEtBQUwsQ0FBVyxLQUFYLEVBQWtCLElBQWxCLEdBQXlCLElBQXpCO0FBQ0QsR0FGRDs7QUFJQSxPQUFLLFFBQUwsR0FBZ0IsVUFBQyxLQUFELEVBQVEsS0FBUixFQUFrQjtBQUNoQyxVQUFLLEtBQUwsQ0FBVyxLQUFYLEVB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QW9DLEVBQXBDLEVBQXdDLE9BQXhDLENBQWdELFVBQWhELEVBQTRELEVBQTVELEVBQWdFLE9BQWhFLENBQXdFLFVBQXhFLEVBQW9GLEVBQXBGLEVBQXdGLE9BQXhGLENBQWdHLFVBQWhHLEVBQTRHLEVBQTVHLENBQVA7QUFDRDtBQUhjLENBQWpCOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IHtleHRlbmR9ID0gJDtcblxuY29uc3QgcGFuZWxWYXJzID0ge1xuICBsYW5ndWFnZTogbnVsbCxcbiAgZWRpdG9yOiBudWxsLFxuICBtYXRjaGluZ3M6IG51bGwsXG4gIGNvZGU6ICcnLFxuICBsaW5lczogLTFcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnBhbmVsID0gW1xuICAgIGV4dGVuZCh0cnVlLCB7fSwgcGFuZWxWYXJzKSxcbiAgICBleHRlbmQodHJ1ZSwge30sIHBhbmVsVmFycylcbiAgXTtcbiAgdGhpcy5leGFtX21vZGUgPSBmYWxzZTtcblxuICB0aGlzLnNldExhbmd1YWdlID0gKGluZGV4LCBsYW5ndWFnZSkgPT4ge1xuICAgIHRoaXMucGFuZWxbaW5kZXhdLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gIH07XG5cbiAgdGhpcy5zZXRFZGl0b3IgPSAoaW5kZXgsIGVkaXRvcikgPT4ge1xuICAgIHRoaXMucGFuZWxbaW5kZXhdLmVkaXRvciA9IGVkaXRvcjtcbiAgfTtcblxuICB0aGlzLnNldE1hdGNoaW5ncyA9IChpbmRleCwgbWF0Y2hpbmdzKSA9PiB7XG4gICAgdGhpcy5wYW5lbFtpbmRleF0ubWF0Y2hpbmdzID0gbWF0Y2hpbmdzO1xuICB9O1xuXG4gIHRoaXMuc2V0Q29kZSA9IChpbmRleCwgY29kZSkgPT4ge1xuICAgIHRoaXMucGFuZWxbaW5kZXhdLmNvZGUgPSBjb2RlO1xuICB9O1xuXG4gIHRoaXMuc2V0TGluZXMgPSAoaW5kZXgsIGxpbmVzKSA9PiB7XG4gICAgdGhpcy5wYW5lbFtpbmRleF0ubGluZXMgPSBsaW5lcztcbiAgfTtcblxuICB0aGlzLmVudGVyRXhhbU1vZGUgPSAoKSA9PiB7XG4gICAgdGhpcy5leGFtX21vZGUgPSB0cnVlO1xuICB9O1xuXG4gIHRoaXMuZXhpdEV4YW1Nb2RlID0gKCkgPT4ge1xuICAgIHRoaXMuZXhhbV9tb2RlID0gZmFsc2U7XG4gIH07XG5cbiAgdGhpcy5nZXRMYW5ndWFnZSA9IChpbmRleCA9PiB7XG4gICAgcmV0dXJuIHRoaXMucGFuZWxbaW5kZXhdLmxhbmd1YWdlO1xuICB9KTtcblxuICB0aGlzLmdldEVkaXRvciA9IChpbmRleCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnBhbmVsW2luZGV4XS5lZGl0b3I7XG4gIH07XG5cbiAgdGhpcy5nZXRNYXRjaGluZ3MgPSAoaW5kZXgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5wYW5lbFtpbmRleF0ubWF0Y2hpbmdzO1xuICB9O1xuXG4gIHRoaXMuZ2V0Q29kZSA9IChpbmRleCwgcmVhZGFibGUpID0+IHtcbiAgICBjb25zdCBjb2RlID0gdGhpcy5wYW5lbFtpbmRleF0uY29kZTtcbiAgICBpZiAocmVhZGFibGUpIHJldHVybiBjb2RlLnJlcGxhY2UoLyMoXFxkKylcXHtcXFsoKCg/IVxcXVxcfSkuKSopXFxdXFx9L2csICckMicpO1xuICAgIGVsc2UgcmV0dXJuIGNvZGU7XG4gIH07XG5cbiAgdGhpcy5nZXRMaW5lcyA9IChpbmRleCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnBhbmVsW2luZGV4XS5saW5lcztcbiAgfVxuXG4gIHRoaXMuaXNFeGFtTW9kZSA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5leGFtX21vZGU7XG4gIH07XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge307IiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRpciwgY2hpbGRyZW4gPSBbXSkge1xuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGlyID0gZGlyO1xuICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xuICAgIH0pO1xuICB9XG5cbiAgc3ViKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5baW5kZXhdO1xuICB9XG59OyIsImNvbnN0IExhbmd1YWdlID0gcmVxdWlyZSgnLi9sYW5ndWFnZScpO1xuY29uc3QgQ2F0ZWdvcnkgPSByZXF1aXJlKCcuL2NhdGVnb3J5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBMYW5ndWFnZSxcbiAgQ2F0ZWdvcnlcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGFjZSwgZXh0KSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmFjZSA9IGFjZTtcbiAgICB0aGlzLmV4dCA9IGV4dDtcbiAgfVxuXG4gIHN0YXRpYyBnZXRXaXRoRXh0KGV4dCkge1xuICAgIGNvbnN0IFNlcnZlciA9IHJlcXVpcmUoJy4uL3NlcnZlcicpO1xuICAgIGNvbnN0IGxhbmd1YWdlcyA9IFNlcnZlci5nZXRMYW5ndWFnZXMoKTtcbiAgICBmb3IgKGNvbnN0IGxhbmd1YWdlIG9mIGxhbmd1YWdlcykge1xuICAgICAgaWYgKGxhbmd1YWdlLmV4dCA9PSBleHQpIHJldHVybiBsYW5ndWFnZTtcbiAgICB9XG4gIH1cbn07IiwiY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5jb25zdCB2aWV3Q29kZSA9IHJlcXVpcmUoJy4vdmlld19jb2RlJyk7XG5cbmNvbnN0IGZyb20gPSAwLCB0byA9IDE7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBlbnRlcjogKCkgPT4ge1xuICAgIGFwcC5lbnRlckV4YW1Nb2RlKCk7XG4gICAgJCgnI25leHQnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAkKCcuZGVzYy1jb250YWluZXIgLmJsdXInKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICBjb25zdCBlZGl0b3IgPSBhcHAuZ2V0RWRpdG9yKHRvKTtcbiAgICBlZGl0b3Iuc2V0UmVhZE9ubHkoZmFsc2UpO1xuICAgIGVkaXRvci5zZXRWYWx1ZSgnJyk7XG4gIH0sXG4gIGV4aXQ6IChrZWVwX2NvZGUpID0+IHtcbiAgICBhcHAuZXhpdEV4YW1Nb2RlKCk7XG4gICAgJCgnI25leHQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQgbmV4dCcpO1xuICAgICQoJy5kZXNjLWNvbnRhaW5lciAuYmx1cicpLmNzcygnZGlzcGxheScsICcnKTtcbiAgICBjb25zdCBlZGl0b3IgPSBhcHAuZ2V0RWRpdG9yKHRvKTtcbiAgICBlZGl0b3Iuc2V0UmVhZE9ubHkodHJ1ZSk7XG4gICAgaWYgKCFrZWVwX2NvZGUpIHZpZXdDb2RlKHRvLCBhcHAuZ2V0Q29kZSh0bykpO1xuICB9XG59OyIsImNvbnN0IHNldHVwTWFpbiA9IHJlcXVpcmUoJy4vc2V0dXBfbWFpbicpO1xuY29uc3QgaW5pdEVkaXRvciA9IHJlcXVpcmUoJy4vaW5pdF9lZGl0b3InKTtcbmNvbnN0IGluaXRDYXRlZ29yaWVzID0gcmVxdWlyZSgnLi9pbml0X2NhdGVnb3JpZXMnKTtcbmNvbnN0IHNldHVwTGF5b3V0ID0gcmVxdWlyZSgnLi9zZXR1cF9sYXlvdXQnKTtcbmNvbnN0IHNldHVwTWF0Y2hpbmcgPSByZXF1aXJlKCcuL3NldHVwX21hdGNoaW5nJyk7XG5jb25zdCBzZXR1cEV4YW0gPSByZXF1aXJlKCcuL3NldHVwX2V4YW0nKTtcbmNvbnN0IHNldExhbmd1YWdlID0gcmVxdWlyZSgnLi9zZXRfbGFuZ3VhZ2UnKTtcbmNvbnN0IHZpZXdDb2RlID0gcmVxdWlyZSgnLi92aWV3X2NvZGUnKTtcbmNvbnN0IHZpZXdEZXNjID0gcmVxdWlyZSgnLi92aWV3X2Rlc2MnKTtcbmNvbnN0IHZpZXdDb21wYXJpc29uID0gcmVxdWlyZSgnLi92aWV3X2NvbXBhcmlzb24nKTtcbmNvbnN0IGV4YW0gPSByZXF1aXJlKCcuL2V4YW0nKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldHVwTWFpbixcbiAgaW5pdEVkaXRvcixcbiAgaW5pdENhdGVnb3JpZXMsXG4gIHNldHVwTGF5b3V0LFxuICBzZXR1cE1hdGNoaW5nLFxuICBzZXR1cEV4YW0sXG4gIHNldExhbmd1YWdlLFxuICB2aWV3Q29kZSxcbiAgdmlld0Rlc2MsXG4gIHZpZXdDb21wYXJpc29uLFxuICBleGFtXG59OyIsImNvbnN0IFNlcnZlciA9IHJlcXVpcmUoJy4uL3NlcnZlcicpO1xuY29uc3QgU3RvcmFnZSA9IHJlcXVpcmUoJy4uL3N0b3JhZ2UnKTtcbmNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuY29uc3Qgdmlld0NvZGUgPSByZXF1aXJlKCcuL3ZpZXdfY29kZScpO1xuY29uc3Qgdmlld0Rlc2MgPSByZXF1aXJlKCcuL3ZpZXdfZGVzYycpO1xuY29uc3QgZXhhbSA9IHJlcXVpcmUoJy4vZXhhbScpO1xuXG5jb25zdCBmcm9tID0gMCwgdG8gPSAxO1xuXG5jb25zdCBsb2FkQ2F0ZWdvcnkgPSAoaW5kZXgsIGNhdGVnb3J5LCBsYW5ndWFnZSkgPT4ge1xuICBTZXJ2ZXIubG9hZENvZGUoY2F0ZWdvcnksIGxhbmd1YWdlKS50aGVuKChjb2RlKSA9PiB7XG4gICAgZXhhbS5leGl0KCk7XG4gICAgYXBwLnNldENvZGUoaW5kZXgsIGNvZGUpO1xuICAgIHZpZXdDb2RlKGluZGV4LCBjb2RlKTtcbiAgfSk7XG4gIGlmIChpbmRleCA9PSB0bykge1xuICAgIFNlcnZlci5sb2FkRGVzYyhjYXRlZ29yeSwgbGFuZ3VhZ2UpLnRoZW4odmlld0Rlc2MpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNhdGVnb3JpZXMgPT4ge1xuICBjb25zdCAkaW5kZXggPSAkKCcjaW5kZXgnKTtcbiAgY2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSwgaSkgPT4ge1xuICAgIGNhdGVnb3J5LmVsZW1lbnQgPSAkKGA8bGk+JHtpICsgMX18ICR7Y2F0ZWdvcnkubmFtZX08L2xpPmApO1xuICAgICRpbmRleC5hcHBlbmQoY2F0ZWdvcnkuZWxlbWVudCk7XG4gICAgY29uc3QgJHN1Yl9pbmRleCA9ICQoYDx1bCBjbGFzcz1cInN1YlwiIGRhdGEtY2F0ZWdvcnk9XCIke2l9XCI+PC91bD5gKTtcbiAgICAkaW5kZXguYXBwZW5kKCRzdWJfaW5kZXgpO1xuICAgIGNhdGVnb3J5LmNoaWxkcmVuLmZvckVhY2goKGNhdGVnb3J5LCBqKSA9PiB7XG4gICAgICBjYXRlZ29yeS5lbGVtZW50ID0gJChgPGxpIGRhdGEtc3ViY2F0ZWdvcnk9XCIke2p9XCI+JHtjYXRlZ29yeS5uYW1lfTwvbGk+YCk7XG4gICAgICAkc3ViX2luZGV4LmFwcGVuZChjYXRlZ29yeS5lbGVtZW50KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgJCgnI2luZGV4ID4gbGknKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCgnI2luZGV4ID4gbGkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICB9KTtcblxuICAkKCd1bC5zdWIgPiBsaScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkKCd1bC5zdWIgPiBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgY29uc3QgJGxpID0gJCh0aGlzKTtcbiAgICBjb25zdCAkdWwgPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gY2F0ZWdvcmllc1skdWwuZGF0YSgnY2F0ZWdvcnknKV0uc3ViKCRsaS5kYXRhKCdzdWJjYXRlZ29yeScpKTtcbiAgICBTdG9yYWdlLmNhdGVnb3J5LnNldChjYXRlZ29yeSk7XG4gICAgbG9hZENhdGVnb3J5KGZyb20sIGNhdGVnb3J5LCBhcHAuZ2V0TGFuZ3VhZ2UoZnJvbSkpO1xuICAgIGxvYWRDYXRlZ29yeSh0bywgY2F0ZWdvcnksIGFwcC5nZXRMYW5ndWFnZSh0bykpO1xuICAgIGV4YW0uZXhpdCgpO1xuICB9KTtcblxuICBsZXQgY2F0ZWdvcnkgPSBTdG9yYWdlLmNhdGVnb3J5LmdldCgpO1xuICBkbyB7XG4gICAgY2F0ZWdvcnkuZWxlbWVudC5jbGljaygpO1xuICAgIGNhdGVnb3J5ID0gY2F0ZWdvcnkucGFyZW50O1xuICB9IHdoaWxlIChjYXRlZ29yeSk7XG59OyIsImNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuY29uc3Qgdmlld0NvbXBhcmlzb24gPSByZXF1aXJlKCcuL3ZpZXdfY29tcGFyaXNvbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChpbmRleCwgbGFuZ3VhZ2UsIGFmdGVyUmVuZGVyKSA9PiB7XG4gIGNvbnN0ICRwYW5lbCA9ICQoYC5wYW5lbDplcSgke2luZGV4fSlgKTtcbiAgY29uc3QgJGNvZGUgPSAkcGFuZWwuZmluZCgnLmNvZGUnKTtcbiAgbGV0IGVkaXRvciA9IGFjZS5lZGl0KCRjb2RlLmF0dHIoJ2lkJykpO1xuICBlZGl0b3Iuc2V0VGhlbWUoJ2FjZS90aGVtZS9tb25va2FpJyk7XG4gIGlmIChpbmRleCA9PSAwKSAkcGFuZWwuZmluZCgnLmRlc2MnKS5hZGRDbGFzcygnYWNlLW1vbm9rYWknKTtcbiAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKGBhY2UvbW9kZS8ke2xhbmd1YWdlLmFjZX1gKTtcbiAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXcmFwTW9kZSh0cnVlKTtcbiAgZWRpdG9yLnNldFNob3dGb2xkV2lkZ2V0cyhmYWxzZSk7XG4gIGVkaXRvci5zZXRSZWFkT25seSh0cnVlKTtcbiAgZWRpdG9yLnJlbmRlcmVyLm9uKCd0aW1lVG9VcGRhdGVDb21wYXJpc29uJywgKCkgPT4ge1xuICAgIGlmIChhcHAuaXNFeGFtTW9kZSgpKSByZXR1cm47XG4gICAgdmlld0NvbXBhcmlzb24oKTtcbiAgfSk7XG4gIHJldHVybiBlZGl0b3I7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gKGluZGV4LCBsYW5ndWFnZSkgPT4ge1xuICBjb25zdCAkcGFuZWwgPSAkKGAucGFuZWw6ZXEoJHtpbmRleH0pYCk7XG4gIGNvbnN0ICR0aXRsZSA9ICRwYW5lbC5maW5kKCcudGl0bGUnKTtcbiAgJHRpdGxlLnRleHQobGFuZ3VhZ2UubmFtZSk7XG59OyIsImNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuY29uc3QgZXhhbSA9IHJlcXVpcmUoJy4vZXhhbScpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxuY29uc3QgZnJvbSA9IDAsIHRvID0gMTtcblxuY29uc3QgY2FsY3VsYXRlUHJvZ3Jlc3MgPSAoY29kZV9hbnN3ZXIsIGNvZGVfdXNlcikgPT4ge1xuICByZXR1cm4gc2ltaWxhcml0eSh1dGlsLnppcChjb2RlX2Fuc3dlciksIHV0aWwuemlwKGNvZGVfdXNlcikpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIGNvbnN0IGVkaXRvciA9IGFwcC5nZXRFZGl0b3IodG8pO1xuICBlZGl0b3Iub24oJ2NoYW5nZScsIGUgPT4ge1xuICAgIGlmICghYXBwLmlzRXhhbU1vZGUoKSkgcmV0dXJuO1xuICAgIGNvbnN0IHByb2dyZXNzID0gY2FsY3VsYXRlUHJvZ3Jlc3MoYXBwLmdldENvZGUodG8sIHRydWUpLCBlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgJCgnLnByb2dyZXNzJykuY3NzKCd3aWR0aCcsIGAke3Byb2dyZXNzICogMTAwfSVgKTtcbiAgICBpZiAocHJvZ3Jlc3MgPT0gMSkge1xuICAgICAgZXhhbS5leGl0KHRydWUpO1xuICAgICAgJCgnI25leHQnKS5hZGRDbGFzcygnbmV4dCcpO1xuICAgICAgJCgnLnByb2dyZXNzJykuY3NzKCd3aWR0aCcsICcnKTtcbiAgICB9XG4gIH0pO1xufTtcblxuXG4vKipcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA0NzM3NDUvY29tcGFyZS1zdHJpbmdzLWphdmFzY3JpcHQtcmV0dXJuLW9mLWxpa2VseVxuICovXG5cbmNvbnN0IHNpbWlsYXJpdHkgPSAoczEsIHMyKSA9PiB7XG4gIGxldCBsb25nZXIgPSBzMTtcbiAgbGV0IHNob3J0ZXIgPSBzMjtcbiAgaWYgKHMxLmxlbmd0aCA8IHMyLmxlbmd0aCkge1xuICAgIGxvbmdlciA9IHMyO1xuICAgIHNob3J0ZXIgPSBzMTtcbiAgfVxuICBjb25zdCBsb25nZXJMZW5ndGggPSBsb25nZXIubGVuZ3RoO1xuICBpZiAobG9uZ2VyTGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gMS4wO1xuICB9XG4gIHJldHVybiAobG9uZ2VyTGVuZ3RoIC0gZWRpdERpc3RhbmNlKGxvbmdlciwgc2hvcnRlcikpIC8gcGFyc2VGbG9hdChsb25nZXJMZW5ndGgpO1xufTtcblxuY29uc3QgZWRpdERpc3RhbmNlID0gKHMxLCBzMikgPT4ge1xuICBjb25zdCBjb3N0cyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8PSBzMS5sZW5ndGg7IGkrKykge1xuICAgIGxldCBsYXN0VmFsdWUgPSBpO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHMyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoaSA9PSAwKVxuICAgICAgICBjb3N0c1tqXSA9IGo7XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGogPiAwKSB7XG4gICAgICAgICAgbGV0IG5ld1ZhbHVlID0gY29zdHNbaiAtIDFdO1xuICAgICAgICAgIGlmIChzMS5jaGFyQXQoaSAtIDEpICE9IHMyLmNoYXJBdChqIC0gMSkpXG4gICAgICAgICAgICBuZXdWYWx1ZSA9IE1hdGgubWluKE1hdGgubWluKG5ld1ZhbHVlLCBsYXN0VmFsdWUpLFxuICAgICAgICAgICAgICAgIGNvc3RzW2pdKSArIDE7XG4gICAgICAgICAgY29zdHNbaiAtIDFdID0gbGFzdFZhbHVlO1xuICAgICAgICAgIGxhc3RWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpID4gMClcbiAgICAgIGNvc3RzW3MyLmxlbmd0aF0gPSBsYXN0VmFsdWU7XG4gIH1cbiAgcmV0dXJuIGNvc3RzW3MyLmxlbmd0aF07XG59OyIsImNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuY29uc3QgZXhhbSA9IHJlcXVpcmUoJy4vZXhhbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcbiAgJCgnI25leHQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgJG5leHQgPSAkKHRoaXMpO1xuICAgIGlmICgkbmV4dC5oYXNDbGFzcygnbmV4dCcpKSB7XG4gICAgICBjb25zdCAkYWN0aXZlID0gJCgnLnN1YiA+IGxpLmFjdGl2ZScpO1xuICAgICAgaWYgKCRhY3RpdmUuaXMoJzpsYXN0LWNoaWxkJykpIHtcbiAgICAgICAgY29uc3QgJGFjdGl2ZV9wYXJlbnQgPSAkKCcjaW5kZXggPiBsaS5hY3RpdmUnKTtcbiAgICAgICAgaWYgKCRhY3RpdmVfcGFyZW50LmlzKCc6bnRoLWxhc3QtY2hpbGQoMiknKSkge1xuICAgICAgICAgIGFsZXJ0KCdDb25ncmF0cyEnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkYWN0aXZlX3BhcmVudC5uZXh0KCkubmV4dCgpLmNsaWNrKCk7XG4gICAgICAgICAgJCgnI2luZGV4ID4gbGkuYWN0aXZlICsgLnN1YiA+IGxpOmZpcnN0LWNoaWxkJykuY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGFjdGl2ZS5uZXh0KCkuY2xpY2soKTtcbiAgICAgIH1cbiAgICAgICRuZXh0LnJlbW92ZUNsYXNzKCduZXh0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChhcHAuaXNFeGFtTW9kZSgpKSB7XG4gICAgICAgIGV4YW0uZXhpdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXhhbS5lbnRlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59OyIsImNvbnN0IHNldHVwTGFuZ3VhZ2VzID0gcmVxdWlyZSgnLi9zZXR1cF9sYW5ndWFnZXMnKTtcbmNvbnN0IHNldHVwU3RpY2tUb0JvdHRvbSA9IHJlcXVpcmUoJy4vc2V0dXBfc3RpY2tfdG9fYm90dG9tJyk7XG5jb25zdCBzZXR1cFNtb290aFNjcm9sbCA9IHJlcXVpcmUoJy4vc2V0dXBfc21vb3RoX3Njcm9sbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcbiAgc2V0dXBMYW5ndWFnZXMoKTtcbiAgc2V0dXBTdGlja1RvQm90dG9tKCk7XG4gIHNldHVwU21vb3RoU2Nyb2xsKCk7XG59OyIsImNvbnN0IFNlcnZlciA9IHJlcXVpcmUoJy4uLy4uL3NlcnZlcicpO1xuXG5jb25zdCBsYW5ndWFnZXMgPSBTZXJ2ZXIuZ2V0TGFuZ3VhZ2VzKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuICBmb3IgKGNvbnN0IGNvbnRhaW5lciBvZiBbJyNsYW5nLWZyb20nLCAnI2xhbmctdG8nXSkge1xuICAgIGNvbnN0ICRjb250YWluZXIgPSAkKGNvbnRhaW5lcik7XG4gICAgZm9yIChjb25zdCBsYW5ndWFnZSBvZiBsYW5ndWFnZXMpIHtcbiAgICAgIGNvbnN0ICRsYW5nID0gJChgPGEgY2xhc3M9XCJsYW5nXCIgaHJlZj1cIiR7Y29udGFpbmVyID09ICcjbGFuZy1mcm9tJyA/ICcjZG90cycgOiAnI3RvcCd9XCI+PC9hPmApO1xuICAgICAgJGNvbnRhaW5lci5hcHBlbmQoJGxhbmcpO1xuICAgICAgY29uc3QgJGxvZ28gPSAkKGA8ZGl2IGNsYXNzPVwibG9nb1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuL2ltYWdlcy9sYW5nXyR7bGFuZ3VhZ2UuZXh0fS5wbmcnKVwiPjwvZGl2PmApO1xuICAgICAgJGxhbmcuYXBwZW5kKCRsb2dvKTtcbiAgICAgICRsb2dvLmFwcGVuZChgPGRpdiBjbGFzcz1cImxvZ28gbW9ub1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuL2ltYWdlcy9sYW5nXyR7bGFuZ3VhZ2UuZXh0fV9tb25vLnBuZycpXCI+PC9kaXY+YCk7XG4gICAgICAkbGFuZy5hcHBlbmQoYDxkaXYgY2xhc3M9XCJuYW1lXCI+JHtsYW5ndWFnZS5uYW1lfTwvZGl2PmApO1xuICAgIH1cbiAgICAkY29udGFpbmVyLmZpbmQoJy5sYW5nJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgJGNvbnRhaW5lci5maW5kKCcubGFuZy5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICB9KTtcbiAgfVxuICAkKCcubGFuZycpLmNsaWNrKCgpID0+IHtcbiAgICBjb25zdCAkbGFuZ190byA9ICQoJyNsYW5nLXRvJyk7XG4gICAgY29uc3QgJGxhbmdfZnJvbV9zZWxlY3RlZCA9ICQoJyNsYW5nLWZyb20gLmxhbmcuc2VsZWN0ZWQnKTtcbiAgICBjb25zdCAkbGFuZ190b19zZWxlY3RlZCA9ICQoJyNsYW5nLXRvIC5sYW5nLnNlbGVjdGVkJyk7XG4gICAgaWYgKCRsYW5nX2Zyb21fc2VsZWN0ZWQubGVuZ3RoICYmICRsYW5nX3RvX3NlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgY29uc3QgZnJvbV9pbmRleCA9ICRsYW5nX2Zyb21fc2VsZWN0ZWQuaW5kZXgoKTtcbiAgICAgIGNvbnN0IHRvX2luZGV4ID0gJGxhbmdfdG9fc2VsZWN0ZWQuaW5kZXgoKSAtIDI7XG4gICAgICAkbGFuZ190by5maW5kKCdbbmFtZT1cImxhbmdfZnJvbVwiXScpLnZhbChsYW5ndWFnZXNbZnJvbV9pbmRleF0uZXh0KTtcbiAgICAgICRsYW5nX3RvLmZpbmQoJ1tuYW1lPVwibGFuZ190b1wiXScpLnZhbChsYW5ndWFnZXNbdG9faW5kZXhdLmV4dCk7XG4gICAgICAkbGFuZ190by5zdWJtaXQoKTtcbiAgICB9XG4gIH0pO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcbiAgJCgnYVtocmVmKj1cIiNcIl06bm90KFtocmVmPVwiI1wiXSknKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpICYmIGxvY2F0aW9uLmhvc3RuYW1lID09IHRoaXMuaG9zdG5hbWUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XG4gICAgICB0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArICddJyk7XG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDUwMCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBjb25zdCAkdW5mb2N1c2VkID0gJCgnLmZvY3VzZWQnKTtcbiAgY29uc3Qgb25TY3JvbGwgPSAoKSA9PiB7XG4gICAgJHVuZm9jdXNlZC50b2dnbGVDbGFzcygndW5mb2N1c2VkJywgJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPD0gMTY4KTtcbiAgfTtcbiAgb25TY3JvbGwoKTtcbiAgJCh3aW5kb3cpLnNjcm9sbChvblNjcm9sbCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuICBjb25zdCAkc3RpY2tfdG9fYm90dG9tX2Zha2UgPSAkKCcuc3RpY2stdG8tYm90dG9tLmZha2UnKTtcbiAgY29uc3QgJHN0aWNrX3RvX2JvdHRvbV9yZWFsID0gJCgnLnN0aWNrLXRvLWJvdHRvbS5yZWFsJyk7XG4gIGNvbnN0ICRsYW5nX2Zyb20gPSAkKCcjbGFuZy1mcm9tJyk7XG4gIGNvbnN0ICRmdWxsc2NyZWVuID0gJCgnLmZ1bGxzY3JlZW4nKTtcbiAgY29uc3Qgb25SZXNpemUgPSAoKSA9PiB7XG4gICAgY29uc3QgdG9wID0gJGxhbmdfZnJvbS5vZmZzZXQoKS50b3AgKyAkbGFuZ19mcm9tLmhlaWdodCgpO1xuICAgIGNvbnN0IGJvdHRvbSA9ICRzdGlja190b19ib3R0b21fZmFrZS5vZmZzZXQoKS50b3A7XG4gICAgJGZ1bGxzY3JlZW4udG9nZ2xlQ2xhc3MoJ2Z1bGwnLCB0b3AgPCBib3R0b20pO1xuICAgICRzdGlja190b19ib3R0b21fcmVhbC50b2dnbGVDbGFzcygnc3RpY2snLCB0b3AgPCBib3R0b20pXG4gIH07XG4gIG9uUmVzaXplKCk7XG4gICQod2luZG93KS5yZXNpemUob25SZXNpemUpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcbiAgJCgnLmNvZGUsICNjb21wYXJpc29uJykubW91c2Vtb3ZlKGZ1bmN0aW9uIChlKSB7XG4gICAgJCgnLm1hdGNoJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgY29uc3QgJGNvZGUgPSAkKHRoaXMpO1xuICAgIGNvbnN0IHtwYWdlWCwgcGFnZVl9ID0gZTtcbiAgICAkY29kZS5maW5kKCcubWF0Y2gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0ICRtYXRjaCA9ICQodGhpcyk7XG4gICAgICBjb25zdCB7dG9wLCBsZWZ0fSA9ICRtYXRjaC5vZmZzZXQoKTtcbiAgICAgIGNvbnN0IGJvdHRvbSA9IHRvcCArICRtYXRjaC5oZWlnaHQoKTtcbiAgICAgIGNvbnN0IHJpZ2h0ID0gbGVmdCArICRtYXRjaC53aWR0aCgpO1xuICAgICAgaWYgKHRvcCA8IHBhZ2VZICYmIHBhZ2VZIDwgYm90dG9tICYmIGxlZnQgPCBwYWdlWCAmJiBwYWdlWCA8IHJpZ2h0KSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gJG1hdGNoLmRhdGEoJ21hdGNoJyk7XG4gICAgICAgICQoJy5tYXRjaCcpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnbWF0Y2gnKSA9PSBtYXRjaDtcbiAgICAgICAgfSkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTsiLCJjb25zdCBhcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoaW5kZXgsIGNvZGUpID0+IHtcbiAgY29uc3QgbWF0Y2hpbmdzID0gW107XG4gIGFwcC5zZXRNYXRjaGluZ3MoaW5kZXgsIG1hdGNoaW5ncyk7XG4gIGNvbnN0IGxpbmVzID0gY29kZS5zcGxpdCgvXFxyP1xcbi8pO1xuICBhcHAuc2V0TGluZXMoaW5kZXgsIGxpbmVzLmxlbmd0aCk7XG4gIGNvbnN0IG9taXRfbnVtID0gOTk5OTk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsaW5lc1tpXSA9IGxpbmVzW2ldLnJlcGxhY2UoLyhefFxcXVxcfSkoKCg/ISNcXGQrXFx7XFxbKS4pKykvZ20sIGAkMSMke29taXRfbnVtfXtbJDJdfWApO1xuICAgIGxpbmVzW2ldID0gbGluZXNbaV0ucmVwbGFjZSgvIyhcXGQrKVxce1xcWygoKD8hXFxdXFx9KS4pKilcXF1cXH0vZywgKG1hdGNoLCBudW0sIGNvbnRlbnQpID0+IHtcbiAgICAgIG51bSA9IHBhcnNlSW50KG51bSk7XG4gICAgICBpZiAobnVtID09IG9taXRfbnVtKSBudW0gPSAtMTtcbiAgICAgIG1hdGNoaW5ncy5wdXNoKFtjb250ZW50LCBudW0sIGldKTtcbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pO1xuICB9XG4gIGNvZGUgPSBsaW5lcy5qb2luKCdcXG4nKTtcbiAgYXBwLmdldEVkaXRvcihpbmRleCkuc2V0VmFsdWUoY29kZSwgLTEpO1xufTsiLCJjb25zdCBhcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuY29uc3QgZnJvbSA9IDAsIHRvID0gMTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIGNvbnN0ICRkZXNjID0gJCgnI2NvbXBhcmlzb24nKTtcbiAgY29uc3QgcGFpciA9IFtcbiAgICBhcHAuZ2V0TWF0Y2hpbmdzKGZyb20pLFxuICAgIGFwcC5nZXRNYXRjaGluZ3ModG8pXG4gIF07XG5cbiAgbGV0IG1heCA9IC0xO1xuICBmb3IgKGNvbnN0IG1hdGNoaW5ncyBvZiBwYWlyKSB7XG4gICAgaWYgKG1hdGNoaW5ncyA9PSBudWxsKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBtYXRjaGluZyBvZiBtYXRjaGluZ3MpIHtcbiAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgbWF0Y2hpbmdbMV0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVkaXRvcnMgPSBbYXBwLmdldEVkaXRvcihmcm9tKSwgYXBwLmdldEVkaXRvcih0byldO1xuICBjb25zdCAkdGVtcF9zbmlwcGV0cyA9IFskKCcudGVtcC1zbmlwcGV0OmVxKDApJyksJCgnLnRlbXAtc25pcHBldDplcSgxKScpXTtcbiAgZm9yIChjb25zdCBpIG9mIFtmcm9tLCB0b10pIHtcbiAgICBjb25zdCBodG1sID0gW107XG4gICAgY29uc3QgZWRpdG9yID0gZWRpdG9yc1tpXTtcbiAgICBjb25zdCBsaW5lcyA9IGFwcC5nZXRMaW5lcyhpKTtcbiAgICBmb3IgKHZhciBsaW5lID0gMDsgbGluZSA8PSBsaW5lczsgbGluZSsrKSB7XG4gICAgICBlZGl0b3IucmVuZGVyZXIuJHRleHRMYXllci4kcmVuZGVyTGluZShodG1sLCBsaW5lLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICAgICR0ZW1wX3NuaXBwZXRzW2ldLmh0bWwoaHRtbC5qb2luKCcnKSk7XG4gIH1cblxuICBjb25zdCBjb21wYXJpc29ucyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8PSBtYXg7IGkrKykge1xuICAgIGNvbXBhcmlzb25zLnB1c2goW1tdLCBbXSwgLTFdKTtcbiAgfVxuICBmb3IgKGNvbnN0IGkgb2YgW2Zyb20sIHRvXSkge1xuICAgICR0ZW1wX3NuaXBwZXRzW2ldLmZpbmQoJy5tYXRjaCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgJG1hdGNoID0gJCh0aGlzKTtcbiAgICAgIGNvbnN0IG1hdGNoID0gJG1hdGNoLmRhdGEoJ21hdGNoJyk7XG4gICAgICBjb21wYXJpc29uc1ttYXRjaF1baV0ucHVzaCgkbWF0Y2gpO1xuICAgICAgaWYgKGkgPT0gMCAmJiBjb21wYXJpc29uc1ttYXRjaF1bMl0gPT0gLTEpIHtcbiAgICAgICAgY29tcGFyaXNvbnNbbWF0Y2hdWzJdID0gJG1hdGNoLnBhcmVudCgpLnBhcmVudCgpLmluZGV4KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbWF4OyBpKyspIHtcbiAgICBpZiAoY29tcGFyaXNvbnNbaV1bMl0gPT0gLTEpIHtcbiAgICAgIGNvbnN0IG1hdGNoaW5ncyA9IHBhaXJbMF07XG4gICAgICBtYXRjaGluZ3MuZXZlcnkobWF0Y2hpbmcgPT4ge1xuICAgICAgICBpZiAobWF0Y2hpbmdbMV0gPT0gaSkge1xuICAgICAgICAgIGNvbXBhcmlzb25zW2ldWzJdID0gbWF0Y2hpbmdbMl07XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gICRkZXNjLmVtcHR5KCk7XG4gICRkZXNjLmFwcGVuZCgnPGgyPktleSBDaGFuZ2VzPC9oMj4nKTtcbiAgJGRlc2MuYXBwZW5kKCc8aDY+Tm90IGFsbCBjaGFuZ2VzIGFyZSBzaG93bi48L2g2PicpO1xuICBsZXQgbGFzdF9saW5lID0gLTE7XG4gIGZvciAoY29uc3QgY29tcGFyaXNvbiBvZiBjb21wYXJpc29ucykge1xuICAgIGNvbnN0IFtwaWVjZXNfZnJvbSwgcGllY2VzX3RvXSA9IGNvbXBhcmlzb247XG4gICAgY29uc3QgaXNfc2FtZSA9IHBpZWNlc19mcm9tLmxlbmd0aCA9PSBwaWVjZXNfdG8ubGVuZ3RoICYmIHBpZWNlc19mcm9tLmV2ZXJ5KChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gZWxlbWVudC50ZXh0KCkgPT0gcGllY2VzX3RvW2luZGV4XS50ZXh0KCk7XG4gICAgICB9KTtcbiAgICBpZiAoaXNfc2FtZSkgY29udGludWU7XG4gICAgY29uc3QgbGluZSA9IGNvbXBhcmlzb25bMl07XG4gICAgaWYgKGxhc3RfbGluZSAhPSBsaW5lKSB7XG4gICAgICBsYXN0X2xpbmUgPSBsaW5lO1xuICAgICAgJGRlc2MuYXBwZW5kKGA8ZGl2IGNsYXNzPVwibGluZSBsaW5lLW51bWJlclwiPkxpbmUgJHtsaW5lICsgMX08L2Rpdj5gKTtcbiAgICB9XG4gICAgY29uc3QgJGxpbmUgPSAkKCc8ZGl2IGNsYXNzPVwibGluZVwiPjwvZGl2PicpO1xuICAgICRkZXNjLmFwcGVuZCgkbGluZSk7XG4gICAgZm9yIChjb25zdCBwaWVjZXMgb2YgW3BpZWNlc19mcm9tLCBwaWVjZXNfdG9dKSB7XG4gICAgICBjb25zdCAkZ3JvdXAgPSAkKCc8c3BhbiBjbGFzcz1cImdyb3VwXCI+PC9zcGFuPicpO1xuICAgICAgJGxpbmUuYXBwZW5kKCRncm91cCk7XG4gICAgICBpZiAoIXBpZWNlcy5sZW5ndGgpIHtcbiAgICAgICAgJGdyb3VwLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJlbXB0eVwiPjwvc3Bhbj5gKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcGllY2Ugb2YgcGllY2VzKSB7XG4gICAgICAgIGNvbnN0ICRwaWVjZSA9IHBpZWNlLmNsb25lKCk7XG4gICAgICAgICRwaWVjZS5kYXRhKCdtYXRjaCcsIHBpZWNlLmRhdGEoJ21hdGNoJykpO1xuICAgICAgICAkZ3JvdXAuYXBwZW5kKCRwaWVjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59OyIsIm1vZHVsZS5leHBvcnRzID0gKGRlc2MpID0+IHtcbiAgY29uc3QgY29udmVydGVyID0gbmV3IHNob3dkb3duLkNvbnZlcnRlcigpO1xuXG4gIGNvbnN0ICRkZXNjID0gJCgnI2Rlc2NyaXB0aW9uJyk7XG4gICRkZXNjLmh0bWwoY29udmVydGVyLm1ha2VIdG1sKGRlc2MpKTtcbn07IiwiY29uc3QgUlNWUCA9IHJlcXVpcmUoJ3JzdnAnKTtcbmNvbnN0IERPTSA9IHJlcXVpcmUoJy4vZG9tJyk7XG5jb25zdCBTZXJ2ZXIgPSByZXF1aXJlKCcuL3NlcnZlcicpO1xuY29uc3QgU3RvcmFnZSA9IHJlcXVpcmUoJy4vc3RvcmFnZScpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcbmNvbnN0IEFwcCA9IHJlcXVpcmUoJy4vYXBwL2NvbnN0cnVjdG9yJyk7XG5jb25zdCB7TGFuZ3VhZ2V9ID0gcmVxdWlyZSgnLi9iZWFuJyk7XG5jb25zdCB7ZXh0ZW5kfSA9ICQ7XG5cbmNvbnN0IGNhdGVnb3JpZXMgPSBTZXJ2ZXIuZ2V0Q2F0ZWdvcmllcygpO1xuY29uc3QgZnJvbSA9IDAsIHRvID0gMTtcblxuLy8gc2V0IGdsb2JhbCBwcm9taXNlIGVycm9yIGhhbmRsZXJcblJTVlAub24oJ2Vycm9yJywgZnVuY3Rpb24gKHJlYXNvbikge1xuICBjb25zb2xlLmFzc2VydChmYWxzZSwgcmVhc29uKTtcbn0pO1xuXG5leHRlbmQodHJ1ZSwgd2luZG93LCB7XG4gIG1haW46IERPTS5zZXR1cE1haW4sXG4gIGxlYXJuOiAoKSA9PiB7XG4gICAgZXh0ZW5kKHRydWUsIGFwcCwgbmV3IEFwcCgpKTtcbiAgICBleHRlbmQodHJ1ZSwgd2luZG93LCB7YXBwfSk7XG4gICAgbGV0IGxhbmdfZnJvbV9leHQgPSBnZXRVcmxQYXJhbWV0ZXIoJ2xhbmdfZnJvbScpO1xuICAgIGxldCBsYW5nX3RvX2V4dCA9IGdldFVybFBhcmFtZXRlcignbGFuZ190bycpO1xuICAgIGlmIChsYW5nX2Zyb21fZXh0ICYmIGxhbmdfdG9fZXh0KSB7XG4gICAgICBjb25zdCBjaGFuZ2VkID1cbiAgICAgICAgU3RvcmFnZS5sYW5ndWFnZS5zZXQoZnJvbSwgbGFuZ19mcm9tX2V4dCkgfHxcbiAgICAgICAgU3RvcmFnZS5sYW5ndWFnZS5zZXQodG8sIGxhbmdfdG9fZXh0KTtcbiAgICAgIGlmIChjaGFuZ2VkKSBTdG9yYWdlLmNhdGVnb3J5LnNldChjYXRlZ29yaWVzWzBdLnN1YigwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhbmdfZnJvbV9leHQgPSBTdG9yYWdlLmxhbmd1YWdlLmdldChmcm9tKTtcbiAgICAgIGxhbmdfdG9fZXh0ID0gU3RvcmFnZS5sYW5ndWFnZS5nZXQodG8pO1xuICAgIH1cbiAgICBjb25zdCBsYW5nX2Zyb20gPSBMYW5ndWFnZS5nZXRXaXRoRXh0KGxhbmdfZnJvbV9leHQpO1xuICAgIGNvbnN0IGxhbmdfdG8gPSBMYW5ndWFnZS5nZXRXaXRoRXh0KGxhbmdfdG9fZXh0KTtcbiAgICBhcHAuc2V0TGFuZ3VhZ2UoZnJvbSwgbGFuZ19mcm9tKTtcbiAgICBhcHAuc2V0TGFuZ3VhZ2UodG8sIGxhbmdfdG8pO1xuICAgIGFwcC5zZXRFZGl0b3IoZnJvbSwgRE9NLmluaXRFZGl0b3IoZnJvbSwgbGFuZ19mcm9tKSk7XG4gICAgYXBwLnNldEVkaXRvcih0bywgRE9NLmluaXRFZGl0b3IodG8sIGxhbmdfdG8pKTtcbiAgICBET00uaW5pdENhdGVnb3JpZXMoY2F0ZWdvcmllcyk7XG4gICAgRE9NLnNldHVwTGF5b3V0KCk7XG4gICAgRE9NLnNldHVwTWF0Y2hpbmcoKTtcbiAgICBET00uc2V0dXBFeGFtKCk7XG4gICAgRE9NLnNldExhbmd1YWdlKGZyb20sIGxhbmdfZnJvbSk7XG4gICAgRE9NLnNldExhbmd1YWdlKHRvLCBsYW5nX3RvKTtcbiAgfVxufSk7XG5cbmNvbnN0IGdldFVybFBhcmFtZXRlciA9IChzUGFyYW0pID0+IHtcbiAgY29uc3QgcGFyYW1zID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpKS5zcGxpdCgnJicpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zW2ldLnNwbGl0KCc9Jyk7XG4gICAgaWYgKHBhcmFtWzBdID09PSBzUGFyYW0pIHtcbiAgICAgIHJldHVybiBwYXJhbVsxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHBhcmFtWzFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07IiwiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICh1cmwpID0+IHtcbiAgcmV0dXJuIHJlcXVlc3QodXJsLCB7XG4gICAgdHlwZTogJ0dFVCdcbiAgfSk7XG59OyIsImNvbnN0IFJTVlAgPSByZXF1aXJlKCdyc3ZwJyk7XG5jb25zdCB7XG4gIGFqYXgsXG4gIGV4dGVuZFxufSA9ICQ7XG5cbmNvbnN0IGRlZmF1bHRzID0ge307XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucyA9IHt9KSB7XG4gIHJldHVybiBuZXcgUlNWUC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSB7XG4gICAgICBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSxcbiAgICAgIGVycm9yKHJlYXNvbikge1xuICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9wdHMgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zLCBjYWxsYmFja3MsIHt1cmx9KTtcbiAgICBhamF4KG9wdHMpO1xuICB9KTtcbn07IiwiY29uc3Qge1xuICBDYXRlZ29yeVxufSA9IHJlcXVpcmUoJy4uL2JlYW4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIHJldHVybiBjYXRlZ29yaWVzO1xufTtcblxuY29uc3QgY2F0ZWdvcmllcyA9IFtcbiAgbmV3IENhdGVnb3J5KCdDb21tZW50cycsICdjb21tZW50JywgW1xuICAgIG5ldyBDYXRlZ29yeSgnU2luZ2xlIExpbmUgQ29tbWVudHMnLCAnc2luZ2xlJyksXG4gICAgbmV3IENhdGVnb3J5KCdNdWx0aXBsZSBMaW5lcyBDb21tZW50cycsICdtdWx0aScpXG4gIF0pLFxuICBuZXcgQ2F0ZWdvcnkoJ1ZhcmlhYmxlcycsICd2YXInLCBbXG4gICAgbmV3IENhdGVnb3J5KCdEZWZpbml0aW9uJywgJ2RlZicpLFxuICAgIG5ldyBDYXRlZ29yeSgnQm9vbGVhbiBUeXBlJywgJ2Jvb2wnKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ051bWVyaWMgVHlwZXMnLCAnbnVtJyksXG4gICAgbmV3IENhdGVnb3J5KCdTdHJpbmdzJywgJ3N0cicpLFxuICAgIG5ldyBDYXRlZ29yeSgnRGF0YSBTdHJ1Y3R1cmVzJywgJ2RhdGFfc3RydWN0dXJlJyksXG4gICAgbmV3IENhdGVnb3J5KCdDb25zdGFudHMnLCAnY29uc3QnKVxuICBdKSxcbiAgbmV3IENhdGVnb3J5KCdPcGVyYXRvcnMnLCAnb3BlcmF0b3InLCBbXG4gICAgbmV3IENhdGVnb3J5KCdCb29sZWFuIE9wZXJhdGlvbnMnLCAnYm9vbCcpLFxuICAgIG5ldyBDYXRlZ29yeSgnQ29tcGFyaXNvbnMnLCAnY29tcGFyZScpLFxuICAgIG5ldyBDYXRlZ29yeSgnQml0d2lzZSBPcGVyYXRpb25zJywgJ2JpdHdpc2UnKVxuICBdKSxcbiAgbmV3IENhdGVnb3J5KCdDb25kaXRpb25hbHMnLCAnY29uZGl0aW9uYWwnLCBbXG4gICAgbmV3IENhdGVnb3J5KCdJZiAvIEVsc2UgU3RhdGVtZW50JywgJ2lmX2Vsc2UnKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ1N3aXRjaCAvIENhc2UgU3RhdGVtZW50JywgJ3N3aXRjaF9jYXNlJyksXG4gICAgbmV3IENhdGVnb3J5KCdUZXJuYXJ5IE9wZXJhdG9yJywgJ3Rlcm5hcnknKVxuICBdKSxcbiAgbmV3IENhdGVnb3J5KCdMb29wcycsICdsb29wJywgW1xuICAgIG5ldyBDYXRlZ29yeSgnRm9yIFN0YXRlbWVudCcsICdmb3InKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ1doaWxlIFN0YXRlbWVudCcsICd3aGlsZScpLFxuICAgIG5ldyBDYXRlZ29yeSgnQ29udGludWUgU3RhdGVtZW50JywgJ2NvbnRpbnVlJyksXG4gICAgbmV3IENhdGVnb3J5KCdCcmVhayBTdGF0ZW1lbnQnLCAnYnJlYWsnKVxuICBdKSxcbiAgbmV3IENhdGVnb3J5KCdGdW5jdGlvbnMnLCAnZnVuYycsIFtcbiAgICBuZXcgQ2F0ZWdvcnkoJ0RlZmluaXRpb24nLCAnZGVmJyksXG4gICAgbmV3IENhdGVnb3J5KCdQYXJhbWV0ZXJzJywgJ3BhcmFtJyksXG4gICAgbmV3IENhdGVnb3J5KCdSZXR1cm4gU3RhdGVtZW50JywgJ3JldHVybicpXG4gIF0pLFxuICBuZXcgQ2F0ZWdvcnkoJ0NsYXNzZXMnLCAnY2xhc3MnLCBbXG4gICAgbmV3IENhdGVnb3J5KCdEZWZpbml0aW9uJywgJ2RlZicpLFxuICAgIG5ldyBDYXRlZ29yeSgnQ2xhc3MgVmFyaWFibGVzJywgJ2Nsc192YXInKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ0NsYXNzIEZ1bmN0aW9ucycsICdjbHNfZnVuYycpLFxuICAgIG5ldyBDYXRlZ29yeSgnSW5zdGFuY2VzJywgJ29iaicpLFxuICAgIG5ldyBDYXRlZ29yeSgnSW5zdGFuY2UgVmFyaWFibGVzJywgJ29ial92YXInKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ0luc3RhbmNlIEZ1bmN0aW9ucycsICdvYmpfZnVuYycpLFxuICAgIG5ldyBDYXRlZ29yeSgnSW5oZXJpdGFuY2UnLCAnaW5oZXJpdCcpXG4gIF0pLFxuICBuZXcgQ2F0ZWdvcnkoJ0J1aWx0LUluJywgJ2J1aWx0X2luJywgW1xuICAgIG5ldyBDYXRlZ29yeSgnTWF0aCBGdW5jdGlvbnMnLCAnbWF0aCcpLFxuICAgIG5ldyBDYXRlZ29yeSgnU3RyaW5nIEZ1bmN0aW9ucycsICdzdHInKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ0RhdGEgU3RydWN0dXJlIE9wZXJhdGlvbnMnLCAnZGF0YV9zdHJ1Y3R1cmUnKSxcbiAgICBuZXcgQ2F0ZWdvcnkoJ090aGVycycsICdldGMnKVxuICBdKVxuXTsiLCJjb25zdCB7XG4gIExhbmd1YWdlXG59ID0gcmVxdWlyZSgnLi4vYmVhbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcbiAgcmV0dXJuIGxhbmd1YWdlcztcbn07XG5cbmNvbnN0IGxhbmd1YWdlcyA9IFtcbiAgbmV3IExhbmd1YWdlKCdDKysnLCAnY19jcHAnLCAnY3BwJyksXG4gIG5ldyBMYW5ndWFnZSgnUHl0aG9uJywgJ3B5dGhvbicsICdweScpLFxuICBuZXcgTGFuZ3VhZ2UoJ0phdmEnLCAnamF2YScsICdqYXZhJyksXG4gIG5ldyBMYW5ndWFnZSgnRU1DQVNjcmlwdCcsICdqYXZhc2NyaXB0JywgJ2pzJyksXG4gIG5ldyBMYW5ndWFnZSgnTmFkYS4nLCBudWxsLCAnaWRrJylcbl07IiwiY29uc3QgbG9hZENvZGUgPSByZXF1aXJlKCcuL2xvYWRfY29kZScpO1xuY29uc3QgbG9hZERlc2MgPSByZXF1aXJlKCcuL2xvYWRfZGVzYycpO1xuY29uc3QgZ2V0Q2F0ZWdvcmllcyA9IHJlcXVpcmUoJy4vZ2V0X2NhdGVnb3JpZXMnKTtcbmNvbnN0IGdldExhbmd1YWdlcyA9IHJlcXVpcmUoJy4vZ2V0X2xhbmd1YWdlcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbG9hZENvZGUsXG4gIGxvYWREZXNjLFxuICBnZXRDYXRlZ29yaWVzLFxuICBnZXRMYW5ndWFnZXNcbn07IiwiY29uc3QgZ2V0ID0gcmVxdWlyZSgnLi9hamF4L2dldCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChjYXRlZ29yeSwgbGFuZ3VhZ2UpID0+IHtcbiAgbGV0IHBhdGggPSBgJHtsYW5ndWFnZS5leHR9L2NvZGUuJHtsYW5ndWFnZS5leHR9YDtcbiAgZG8ge1xuICAgIHBhdGggPSBjYXRlZ29yeS5kaXIgKyAnLycgKyBwYXRoO1xuICAgIGNhdGVnb3J5ID0gY2F0ZWdvcnkucGFyZW50O1xuICB9IHdoaWxlIChjYXRlZ29yeSk7XG4gIHJldHVybiBnZXQoYC4vZGF0YS8ke3BhdGh9YCk7XG59OyIsImNvbnN0IGdldCA9IHJlcXVpcmUoJy4vYWpheC9nZXQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoY2F0ZWdvcnksIGxhbmd1YWdlKSA9PiB7XG4gIGxldCBwYXRoID0gYCR7bGFuZ3VhZ2UuZXh0fS9kZXNjLm1kYDtcbiAgZG8ge1xuICAgIHBhdGggPSBjYXRlZ29yeS5kaXIgKyAnLycgKyBwYXRoO1xuICAgIGNhdGVnb3J5ID0gY2F0ZWdvcnkucGFyZW50O1xuICB9IHdoaWxlIChjYXRlZ29yeSk7XG4gIHJldHVybiBnZXQoYC4vZGF0YS8ke3BhdGh9YCk7XG59OyIsImNvbnN0IHtzZXQsIGdldH0gPSByZXF1aXJlKCcuL21hbmFnZXInKTtcbmNvbnN0IFNlcnZlciA9IHJlcXVpcmUoJy4uL3NlcnZlcicpO1xuXG5jb25zdCBnZXROYW1lID0gKCkgPT4ge1xuICByZXR1cm4gJ2NhdGVnb3J5Jztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IChjYXRlZ29yeSkgPT4ge1xuICAgIGxldCBwYXRoID0gJyc7XG4gICAgZG8ge1xuICAgICAgcGF0aCA9IGNhdGVnb3J5LmRpciArICcvJyArIHBhdGg7XG4gICAgICBjYXRlZ29yeSA9IGNhdGVnb3J5LnBhcmVudDtcbiAgICB9IHdoaWxlIChjYXRlZ29yeSk7XG4gICAgcGF0aC5zdWJzdHIoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgICByZXR1cm4gc2V0KGdldE5hbWUoKSwgcGF0aCk7XG4gIH0sXG4gIGdldDogKCkgPT4ge1xuICAgIGxldCBjYXRlZ29yaWVzID0gU2VydmVyLmdldENhdGVnb3JpZXMoKTtcbiAgICBjb25zdCBkaXJzID0gZ2V0KGdldE5hbWUoKSkuc3BsaXQoJy8nKTtcbiAgICBmb3IgKGNvbnN0IGRpciBvZiBkaXJzKSB7XG4gICAgICBjb25zdCBjYXRlZ29yeSA9ICQuZ3JlcChjYXRlZ29yaWVzLCBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5LmRpciA9PSBkaXI7XG4gICAgICB9KVswXTtcbiAgICAgIGNhdGVnb3JpZXMgPSBjYXRlZ29yeS5jaGlsZHJlbjtcbiAgICAgIGlmICghY2F0ZWdvcmllcy5sZW5ndGgpIHJldHVybiBjYXRlZ29yeTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07IiwiY29uc3QgbGFuZ3VhZ2UgPSByZXF1aXJlKCcuL2xhbmd1YWdlJyk7XG5jb25zdCBjYXRlZ29yeSA9IHJlcXVpcmUoJy4vY2F0ZWdvcnknKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxhbmd1YWdlLFxuICBjYXRlZ29yeVxufTsiLCJjb25zdCB7c2V0LCBnZXR9ID0gcmVxdWlyZSgnLi9tYW5hZ2VyJyk7XG5cbmNvbnN0IGdldE5hbWUgPSBpbmRleCA9PiB7XG4gIHJldHVybiBgbGFuZ18ke2luZGV4fWA7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiAoaW5kZXgsIGV4dCkgPT4ge1xuICAgIHJldHVybiBzZXQoZ2V0TmFtZShpbmRleCksIGV4dCk7XG4gIH0sXG4gIGdldDogKGluZGV4KSA9PiB7XG4gICAgcmV0dXJuIGdldChnZXROYW1lKGluZGV4KSk7XG4gIH1cbn07IiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogKG5hbWUsIHZhbHVlKSA9PiB7XG4gICAgaWYgKENvb2tpZXMuZ2V0KG5hbWUpID09IHZhbHVlKSByZXR1cm4gZmFsc2U7XG4gICAgQ29va2llcy5zZXQobmFtZSwgdmFsdWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBnZXQ6IG5hbWUgPT4ge1xuICAgIHJldHVybiBDb29raWVzLmdldChuYW1lKTtcbiAgfSxcbiAgcmVtb3ZlOiBuYW1lID0+IHtcbiAgICBDb29raWVzLnJlbW92ZShuYW1lKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgemlwOiAoY29kZSkgPT4ge1xuICAgIHJldHVybiBjb2RlLnRyaW0oKS5yZXBsYWNlKC9eXFxzKltcXHJcXG5dL2dtLCAnJykucmVwbGFjZSgvXFxiXFxzK1xcQi9nLCAnJykucmVwbGFjZSgvXFxCXFxzK1xcYi9nLCAnJykucmVwbGFjZSgvXFxCXFxzK1xcQi9nLCAnJyk7XG4gIH1cbn07IiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8qIVxuICogQG92ZXJ2aWV3IFJTVlAgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNiBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9yc1xuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3RpbGRlaW8vcnN2cC5qcy9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICAzLjMuM1xuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcbiAgKGZhY3RvcnkoKGdsb2JhbC5SU1ZQID0gZ2xvYmFsLlJTVlAgfHwge30pKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGluZGV4T2YoY2FsbGJhY2tzLCBjYWxsYmFjaykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoY2FsbGJhY2tzW2ldID09PSBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xO1xufVxuXG5mdW5jdGlvbiBjYWxsYmFja3NGb3Iob2JqZWN0KSB7XG4gIHZhciBjYWxsYmFja3MgPSBvYmplY3QuX3Byb21pc2VDYWxsYmFja3M7XG5cbiAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICBjYWxsYmFja3MgPSBvYmplY3QuX3Byb21pc2VDYWxsYmFja3MgPSB7fTtcbiAgfVxuXG4gIHJldHVybiBjYWxsYmFja3M7XG59XG5cbi8qKlxuICBAY2xhc3MgUlNWUC5FdmVudFRhcmdldFxuKi9cbnZhciBFdmVudFRhcmdldCA9IHtcblxuICAvKipcbiAgICBgUlNWUC5FdmVudFRhcmdldC5taXhpbmAgZXh0ZW5kcyBhbiBvYmplY3Qgd2l0aCBFdmVudFRhcmdldCBtZXRob2RzLiBGb3JcbiAgICBFeGFtcGxlOlxuICAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICBSU1ZQLkV2ZW50VGFyZ2V0Lm1peGluKG9iamVjdCk7XG4gICAgIG9iamVjdC5vbignZmluaXNoZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgLy8gaGFuZGxlIGV2ZW50XG4gICAgfSk7XG4gICAgIG9iamVjdC50cmlnZ2VyKCdmaW5pc2hlZCcsIHsgZGV0YWlsOiB2YWx1ZSB9KTtcbiAgICBgYGBcbiAgICAgYEV2ZW50VGFyZ2V0Lm1peGluYCBhbHNvIHdvcmtzIHdpdGggcHJvdG90eXBlczpcbiAgICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBQZXJzb24gPSBmdW5jdGlvbigpIHt9O1xuICAgIFJTVlAuRXZlbnRUYXJnZXQubWl4aW4oUGVyc29uLnByb3RvdHlwZSk7XG4gICAgIGxldCB5ZWh1ZGEgPSBuZXcgUGVyc29uKCk7XG4gICAgbGV0IHRvbSA9IG5ldyBQZXJzb24oKTtcbiAgICAgeWVodWRhLm9uKCdwb2tlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdZZWh1ZGEgc2F5cyBPVycpO1xuICAgIH0pO1xuICAgICB0b20ub24oJ3Bva2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgY29uc29sZS5sb2coJ1RvbSBzYXlzIE9XJyk7XG4gICAgfSk7XG4gICAgIHllaHVkYS50cmlnZ2VyKCdwb2tlJyk7XG4gICAgdG9tLnRyaWdnZXIoJ3Bva2UnKTtcbiAgICBgYGBcbiAgICAgQG1ldGhvZCBtaXhpblxuICAgIEBmb3IgUlNWUC5FdmVudFRhcmdldFxuICAgIEBwcml2YXRlXG4gICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCBvYmplY3QgdG8gZXh0ZW5kIHdpdGggRXZlbnRUYXJnZXQgbWV0aG9kc1xuICAqL1xuICBtaXhpbjogZnVuY3Rpb24gbWl4aW4ob2JqZWN0KSB7XG4gICAgb2JqZWN0WydvbiddID0gdGhpc1snb24nXTtcbiAgICBvYmplY3RbJ29mZiddID0gdGhpc1snb2ZmJ107XG4gICAgb2JqZWN0Wyd0cmlnZ2VyJ10gPSB0aGlzWyd0cmlnZ2VyJ107XG4gICAgb2JqZWN0Ll9wcm9taXNlQ2FsbGJhY2tzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH0sXG5cbiAgLyoqXG4gICAgUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gYmUgZXhlY3V0ZWQgd2hlbiBgZXZlbnROYW1lYCBpcyB0cmlnZ2VyZWRcbiAgICAgYGBgamF2YXNjcmlwdFxuICAgIG9iamVjdC5vbignZXZlbnQnLCBmdW5jdGlvbihldmVudEluZm8pe1xuICAgICAgLy8gaGFuZGxlIHRoZSBldmVudFxuICAgIH0pO1xuICAgICBvYmplY3QudHJpZ2dlcignZXZlbnQnKTtcbiAgICBgYGBcbiAgICAgQG1ldGhvZCBvblxuICAgIEBmb3IgUlNWUC5FdmVudFRhcmdldFxuICAgIEBwcml2YXRlXG4gICAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBuYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gZm9yXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZC5cbiAgKi9cbiAgb246IGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICB2YXIgYWxsQ2FsbGJhY2tzID0gY2FsbGJhY2tzRm9yKHRoaXMpLFxuICAgICAgICBjYWxsYmFja3MgPSB1bmRlZmluZWQ7XG5cbiAgICBjYWxsYmFja3MgPSBhbGxDYWxsYmFja3NbZXZlbnROYW1lXTtcblxuICAgIGlmICghY2FsbGJhY2tzKSB7XG4gICAgICBjYWxsYmFja3MgPSBhbGxDYWxsYmFja3NbZXZlbnROYW1lXSA9IFtdO1xuICAgIH1cblxuICAgIGlmIChpbmRleE9mKGNhbGxiYWNrcywgY2FsbGJhY2spID09PSAtMSkge1xuICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICBZb3UgY2FuIHVzZSBgb2ZmYCB0byBzdG9wIGZpcmluZyBhIHBhcnRpY3VsYXIgY2FsbGJhY2sgZm9yIGFuIGV2ZW50OlxuICAgICBgYGBqYXZhc2NyaXB0XG4gICAgZnVuY3Rpb24gZG9TdHVmZigpIHsgLy8gZG8gc3R1ZmYhIH1cbiAgICBvYmplY3Qub24oJ3N0dWZmJywgZG9TdHVmZik7XG4gICAgIG9iamVjdC50cmlnZ2VyKCdzdHVmZicpOyAvLyBkb1N0dWZmIHdpbGwgYmUgY2FsbGVkXG4gICAgIC8vIFVucmVnaXN0ZXIgT05MWSB0aGUgZG9TdHVmZiBjYWxsYmFja1xuICAgIG9iamVjdC5vZmYoJ3N0dWZmJywgZG9TdHVmZik7XG4gICAgb2JqZWN0LnRyaWdnZXIoJ3N0dWZmJyk7IC8vIGRvU3R1ZmYgd2lsbCBOT1QgYmUgY2FsbGVkXG4gICAgYGBgXG4gICAgIElmIHlvdSBkb24ndCBwYXNzIGEgYGNhbGxiYWNrYCBhcmd1bWVudCB0byBgb2ZmYCwgQUxMIGNhbGxiYWNrcyBmb3IgdGhlXG4gICAgZXZlbnQgd2lsbCBub3QgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgZXZlbnQgZmlyZXMuIEZvciBleGFtcGxlOlxuICAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IGNhbGxiYWNrMSA9IGZ1bmN0aW9uKCl7fTtcbiAgICBsZXQgY2FsbGJhY2syID0gZnVuY3Rpb24oKXt9O1xuICAgICBvYmplY3Qub24oJ3N0dWZmJywgY2FsbGJhY2sxKTtcbiAgICBvYmplY3Qub24oJ3N0dWZmJywgY2FsbGJhY2syKTtcbiAgICAgb2JqZWN0LnRyaWdnZXIoJ3N0dWZmJyk7IC8vIGNhbGxiYWNrMSBhbmQgY2FsbGJhY2syIHdpbGwgYmUgZXhlY3V0ZWQuXG4gICAgIG9iamVjdC5vZmYoJ3N0dWZmJyk7XG4gICAgb2JqZWN0LnRyaWdnZXIoJ3N0dWZmJyk7IC8vIGNhbGxiYWNrMSBhbmQgY2FsbGJhY2syIHdpbGwgbm90IGJlIGV4ZWN1dGVkIVxuICAgIGBgYFxuICAgICBAbWV0aG9kIG9mZlxuICAgIEBmb3IgUlNWUC5FdmVudFRhcmdldFxuICAgIEBwcml2YXRlXG4gICAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBldmVudCB0byBzdG9wIGxpc3RlbmluZyB0b1xuICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIG9wdGlvbmFsIGFyZ3VtZW50LiBJZiBnaXZlbiwgb25seSB0aGUgZnVuY3Rpb25cbiAgICBnaXZlbiB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZXZlbnQncyBjYWxsYmFjayBxdWV1ZS4gSWYgbm8gYGNhbGxiYWNrYFxuICAgIGFyZ3VtZW50IGlzIGdpdmVuLCBhbGwgY2FsbGJhY2tzIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBldmVudCdzIGNhbGxiYWNrXG4gICAgcXVldWUuXG4gICovXG4gIG9mZjogZnVuY3Rpb24gb2ZmKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgYWxsQ2FsbGJhY2tzID0gY2FsbGJhY2tzRm9yKHRoaXMpLFxuICAgICAgICBjYWxsYmFja3MgPSB1bmRlZmluZWQsXG4gICAgICAgIGluZGV4ID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgYWxsQ2FsbGJhY2tzW2V2ZW50TmFtZV0gPSBbXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFja3MgPSBhbGxDYWxsYmFja3NbZXZlbnROYW1lXTtcblxuICAgIGluZGV4ID0gaW5kZXhPZihjYWxsYmFja3MsIGNhbGxiYWNrKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICBVc2UgYHRyaWdnZXJgIHRvIGZpcmUgY3VzdG9tIGV2ZW50cy4gRm9yIGV4YW1wbGU6XG4gICAgIGBgYGphdmFzY3JpcHRcbiAgICBvYmplY3Qub24oJ2ZvbycsIGZ1bmN0aW9uKCl7XG4gICAgICBjb25zb2xlLmxvZygnZm9vIGV2ZW50IGhhcHBlbmVkIScpO1xuICAgIH0pO1xuICAgIG9iamVjdC50cmlnZ2VyKCdmb28nKTtcbiAgICAvLyAnZm9vIGV2ZW50IGhhcHBlbmVkIScgbG9nZ2VkIHRvIHRoZSBjb25zb2xlXG4gICAgYGBgXG4gICAgIFlvdSBjYW4gYWxzbyBwYXNzIGEgdmFsdWUgYXMgYSBzZWNvbmQgYXJndW1lbnQgdG8gYHRyaWdnZXJgIHRoYXQgd2lsbCBiZVxuICAgIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byBhbGwgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgZXZlbnQ6XG4gICAgIGBgYGphdmFzY3JpcHRcbiAgICBvYmplY3Qub24oJ2ZvbycsIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIGNvbnNvbGUubG9nKHZhbHVlLm5hbWUpO1xuICAgIH0pO1xuICAgICBvYmplY3QudHJpZ2dlcignZm9vJywgeyBuYW1lOiAnYmFyJyB9KTtcbiAgICAvLyAnYmFyJyBsb2dnZWQgdG8gdGhlIGNvbnNvbGVcbiAgICBgYGBcbiAgICAgQG1ldGhvZCB0cmlnZ2VyXG4gICAgQGZvciBSU1ZQLkV2ZW50VGFyZ2V0XG4gICAgQHByaXZhdGVcbiAgICBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGJlIHRyaWdnZXJlZFxuICAgIEBwYXJhbSB7Kn0gb3B0aW9ucyBvcHRpb25hbCB2YWx1ZSB0byBiZSBwYXNzZWQgdG8gYW55IGV2ZW50IGhhbmRsZXJzIGZvclxuICAgIHRoZSBnaXZlbiBgZXZlbnROYW1lYFxuICAqL1xuICB0cmlnZ2VyOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50TmFtZSwgb3B0aW9ucywgbGFiZWwpIHtcbiAgICB2YXIgYWxsQ2FsbGJhY2tzID0gY2FsbGJhY2tzRm9yKHRoaXMpLFxuICAgICAgICBjYWxsYmFja3MgPSB1bmRlZmluZWQsXG4gICAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKGNhbGxiYWNrcyA9IGFsbENhbGxiYWNrc1tldmVudE5hbWVdKSB7XG4gICAgICAvLyBEb24ndCBjYWNoZSB0aGUgY2FsbGJhY2tzLmxlbmd0aCBzaW5jZSBpdCBtYXkgZ3Jvd1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV07XG5cbiAgICAgICAgY2FsbGJhY2sob3B0aW9ucywgbGFiZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxudmFyIGNvbmZpZyA9IHtcbiAgaW5zdHJ1bWVudDogZmFsc2Vcbn07XG5cbkV2ZW50VGFyZ2V0WydtaXhpbiddKGNvbmZpZyk7XG5cbmZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lLCB2YWx1ZSkge1xuICBpZiAobmFtZSA9PT0gJ29uZXJyb3InKSB7XG4gICAgLy8gaGFuZGxlIGZvciBsZWdhY3kgdXNlcnMgdGhhdCBleHBlY3QgdGhlIGFjdHVhbFxuICAgIC8vIGVycm9yIHRvIGJlIHBhc3NlZCB0byB0aGVpciBmdW5jdGlvbiBhZGRlZCB2aWFcbiAgICAvLyBgUlNWUC5jb25maWd1cmUoJ29uZXJyb3InLCBzb21lRnVuY3Rpb25IZXJlKTtgXG4gICAgY29uZmlnWydvbiddKCdlcnJvcicsIHZhbHVlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGNvbmZpZ1tuYW1lXSA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb25maWdbbmFtZV07XG4gIH1cbn1cblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNNYXliZVRoZW5hYmxlKHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xufVxuXG52YXIgX2lzQXJyYXkgPSB1bmRlZmluZWQ7XG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG59IGVsc2Uge1xuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG59XG5cbnZhciBpc0FycmF5ID0gX2lzQXJyYXk7XG5cbi8vIERhdGUubm93IGlzIG5vdCBhdmFpbGFibGUgaW4gYnJvd3NlcnMgPCBJRTlcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGUvbm93I0NvbXBhdGliaWxpdHlcbnZhciBub3cgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbn07XG5cbmZ1bmN0aW9uIEYoKSB7fVxuXG52YXIgb19jcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIChvKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2Vjb25kIGFyZ3VtZW50IG5vdCBzdXBwb3J0ZWQnKTtcbiAgfVxuICBpZiAodHlwZW9mIG8gIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuICBGLnByb3RvdHlwZSA9IG87XG4gIHJldHVybiBuZXcgRigpO1xufTtcblxudmFyIHF1ZXVlID0gW107XG5cbmZ1bmN0aW9uIHNjaGVkdWxlRmx1c2goKSB7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbnRyeSA9IHF1ZXVlW2ldO1xuXG4gICAgICB2YXIgcGF5bG9hZCA9IGVudHJ5LnBheWxvYWQ7XG5cbiAgICAgIHBheWxvYWQuZ3VpZCA9IHBheWxvYWQua2V5ICsgcGF5bG9hZC5pZDtcbiAgICAgIHBheWxvYWQuY2hpbGRHdWlkID0gcGF5bG9hZC5rZXkgKyBwYXlsb2FkLmNoaWxkSWQ7XG4gICAgICBpZiAocGF5bG9hZC5lcnJvcikge1xuICAgICAgICBwYXlsb2FkLnN0YWNrID0gcGF5bG9hZC5lcnJvci5zdGFjaztcbiAgICAgIH1cblxuICAgICAgY29uZmlnWyd0cmlnZ2VyJ10oZW50cnkubmFtZSwgZW50cnkucGF5bG9hZCk7XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIH0sIDUwKTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnQoZXZlbnROYW1lLCBwcm9taXNlLCBjaGlsZCkge1xuICBpZiAoMSA9PT0gcXVldWUucHVzaCh7XG4gICAgbmFtZTogZXZlbnROYW1lLFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIGtleTogcHJvbWlzZS5fZ3VpZEtleSxcbiAgICAgIGlkOiBwcm9taXNlLl9pZCxcbiAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLFxuICAgICAgZGV0YWlsOiBwcm9taXNlLl9yZXN1bHQsXG4gICAgICBjaGlsZElkOiBjaGlsZCAmJiBjaGlsZC5faWQsXG4gICAgICBsYWJlbDogcHJvbWlzZS5fbGFiZWwsXG4gICAgICB0aW1lU3RhbXA6IG5vdygpLFxuICAgICAgZXJyb3I6IGNvbmZpZ1tcImluc3RydW1lbnQtd2l0aC1zdGFja1wiXSA/IG5ldyBFcnJvcihwcm9taXNlLl9sYWJlbCkgOiBudWxsXG4gICAgfSB9KSkge1xuICAgIHNjaGVkdWxlRmx1c2goKTtcbiAgfVxufVxuXG4vKipcbiAgYFJTVlAuUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBSU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFJTVlAuUHJvbWlzZS5yZXNvbHZlKDEpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVzb2x2ZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7Kn0gb2JqZWN0IHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGlkZW50aWZ5aW5nIHRoZSByZXR1cm5lZCBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxuICBgdmFsdWVgXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZSQxKG9iamVjdCwgbGFiZWwpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCwgbGFiZWwpO1xuICByZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiB3aXRoT3duUHJvbWlzZSgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgY29uZmlnLmFzeW5jKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIHRoZW5hYmxlLl9vbkVycm9yID0gbnVsbDtcbiAgICByZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJCA9PT0gdGhlbiAmJiBwcm9taXNlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUkMSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQgPT09IEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xuICB9IGVsc2Uge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICBpZiAocHJvbWlzZS5fb25FcnJvcikge1xuICAgIHByb21pc2UuX29uRXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgfVxuXG4gIHB1Ymxpc2gocHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xuXG4gIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoY29uZmlnLmluc3RydW1lbnQpIHtcbiAgICAgIGluc3RydW1lbnQoJ2Z1bGZpbGxlZCcsIHByb21pc2UpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25maWcuYXN5bmMocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuICBjb25maWcuYXN5bmMocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gIHBhcmVudC5fb25FcnJvciA9IG51bGw7XG5cbiAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBzdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgY29uZmlnLmFzeW5jKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChjb25maWcuaW5zdHJ1bWVudCkge1xuICAgIGluc3RydW1lbnQoc2V0dGxlZCA9PT0gRlVMRklMTEVEID8gJ2Z1bGZpbGxlZCcgOiAncmVqZWN0ZWQnLCBwcm9taXNlKTtcbiAgfVxuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCB3aXRoT3duUHJvbWlzZSgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdmFyIHJlc29sdmVkID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAocmVzb2x2ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24sIGxhYmVsKSB7XG4gIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzO1xuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuICB2YXIgc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChzdGF0ZSA9PT0gRlVMRklMTEVEICYmICFvbkZ1bGZpbGxtZW50IHx8IHN0YXRlID09PSBSRUpFQ1RFRCAmJiAhb25SZWplY3Rpb24pIHtcbiAgICBjb25maWcuaW5zdHJ1bWVudCAmJiBpbnN0cnVtZW50KCdjaGFpbmVkJywgcGFyZW50LCBwYXJlbnQpO1xuICAgIHJldHVybiBwYXJlbnQ7XG4gIH1cblxuICBwYXJlbnQuX29uRXJyb3IgPSBudWxsO1xuXG4gIHZhciBjaGlsZCA9IG5ldyBwYXJlbnQuY29uc3RydWN0b3Iobm9vcCwgbGFiZWwpO1xuICB2YXIgcmVzdWx0ID0gcGFyZW50Ll9yZXN1bHQ7XG5cbiAgY29uZmlnLmluc3RydW1lbnQgJiYgaW5zdHJ1bWVudCgnY2hhaW5lZCcsIHBhcmVudCwgY2hpbGQpO1xuXG4gIGlmIChzdGF0ZSkge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBfYXJndW1lbnRzW3N0YXRlIC0gMV07XG4gICAgICBjb25maWcuYXN5bmMoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuZnVuY3Rpb24gbWFrZVNldHRsZWRSZXN1bHQoc3RhdGUsIHBvc2l0aW9uLCB2YWx1ZSkge1xuICBpZiAoc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ2Z1bGZpbGxlZCcsXG4gICAgICB2YWx1ZTogdmFsdWVcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ3JlamVjdGVkJyxcbiAgICAgIHJlYXNvbjogdmFsdWVcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0LCBhYm9ydE9uUmVqZWN0LCBsYWJlbCkge1xuICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wLCBsYWJlbCk7XG4gIHRoaXMuX2Fib3J0T25SZWplY3QgPSBhYm9ydE9uUmVqZWN0O1xuXG4gIGlmICh0aGlzLl92YWxpZGF0ZUlucHV0KGlucHV0KSkge1xuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgdGhpcy5faW5pdCgpO1xuXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZWplY3QodGhpcy5wcm9taXNlLCB0aGlzLl92YWxpZGF0aW9uRXJyb3IoKSk7XG4gIH1cbn1cblxuRW51bWVyYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgcmV0dXJuIGlzQXJyYXkoaW5wdXQpO1xufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRpb25FcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG4gIHZhciBpbnB1dCA9IHRoaXMuX2lucHV0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlTWF5YmVUaGVuYWJsZSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gIHZhciByZXNvbHZlID0gYy5yZXNvbHZlO1xuXG4gIGlmIChyZXNvbHZlID09PSByZXNvbHZlJDEpIHtcbiAgICB2YXIgdGhlbiQkID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICBpZiAodGhlbiQkID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgZW50cnkuX29uRXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiQkICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHRoaXMuX21ha2VSZXN1bHQoRlVMRklMTEVELCBpLCBlbnRyeSk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgdGhlbiQkKTtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKGVudHJ5KTtcbiAgICAgIH0pLCBpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUoZW50cnkpLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICBpZiAoaXNNYXliZVRoZW5hYmxlKGVudHJ5KSkge1xuICAgIHRoaXMuX3NldHRsZU1heWJlVGhlbmFibGUoZW50cnksIGkpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHRoaXMuX21ha2VSZXN1bHQoRlVMRklMTEVELCBpLCBlbnRyeSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHRoaXMuX2Fib3J0T25SZWplY3QgJiYgc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB0aGlzLl9tYWtlUmVzdWx0KHN0YXRlLCBpLCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX21ha2VSZXN1bHQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBSU1ZQLlByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gUlNWUC5yZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSBSU1ZQLnJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IFJTVlAucmVzb2x2ZSgzKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUlNWUC5Qcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYFJTVlAuYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gUlNWUC5yZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IFJTVlAucmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBSU1ZQLlByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4gIEBzdGF0aWNcbiovXG5mdW5jdGlvbiBhbGwoZW50cmllcywgbGFiZWwpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMsIHRydWUsIC8qIGFib3J0IG9uIHJlamVjdCAqL2xhYmVsKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFJTVlAuUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBSU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBSU1ZQLlByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFJTVlAuUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBSU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFJTVlAuUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUlNWUC5Qcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgZGVzY3JpYmluZyB0aGUgcHJvbWlzZSByZXR1cm5lZC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMsIGxhYmVsKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCwgbGFiZWwpO1xuXG4gIGlmICghaXNBcnJheShlbnRyaWVzKSkge1xuICAgIHJlamVjdChwcm9taXNlLCBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3Vic2NyaWJlKENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSksIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8qKlxuICBgUlNWUC5Qcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBSU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFJTVlAuUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHsqfSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGlkZW50aWZ5aW5nIHRoZSByZXR1cm5lZCBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QkMShyZWFzb24sIGxhYmVsKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3AsIGxhYmVsKTtcbiAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgZ3VpZEtleSA9ICdyc3ZwXycgKyBub3coKSArICctJztcbnZhciBjb3VudGVyID0gMDtcblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2XigJlzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUlNWUC5Qcm9taXNlXG4gIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIsIGxhYmVsKSB7XG4gIHRoaXMuX2lkID0gY291bnRlcisrO1xuICB0aGlzLl9sYWJlbCA9IGxhYmVsO1xuICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gIGNvbmZpZy5pbnN0cnVtZW50ICYmIGluc3RydW1lbnQoJ2NyZWF0ZWQnLCB0aGlzKTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlLmNhc3QgPSByZXNvbHZlJDE7IC8vIGRlcHJlY2F0ZWRcblByb21pc2UuYWxsID0gYWxsO1xuUHJvbWlzZS5yYWNlID0gcmFjZTtcblByb21pc2UucmVzb2x2ZSA9IHJlc29sdmUkMTtcblByb21pc2UucmVqZWN0ID0gcmVqZWN0JDE7XG5cblByb21pc2UucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcblxuICBfZ3VpZEtleTogZ3VpZEtleSxcblxuICBfb25FcnJvcjogZnVuY3Rpb24gX29uRXJyb3IocmVhc29uKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGNvbmZpZy5hZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvbWlzZS5fb25FcnJvcikge1xuICAgICAgICBjb25maWdbJ3RyaWdnZXInXSgnZXJyb3InLCByZWFzb24sIHByb21pc2UuX2xhYmVsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBDaGFpbmluZ1xuICAgIC0tLS0tLS0tXG4gIFxuICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgIH0pO1xuICBcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlXFwncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlXFwncmUgdW5oYXBweScuXG4gICAgfSk7XG4gICAgYGBgXG4gICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFzc2ltaWxhdGlvblxuICAgIC0tLS0tLS0tLS0tLVxuICBcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBTaW1wbGUgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCByZXN1bHQ7XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xuICBcbiAgICB0cnkge1xuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gIFxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgXG4gICAgfVxuICBcbiAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICBcbiAgICB9XG4gIFxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZEF1dGhvcigpLlxuICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCB0aGVuXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsbWVudFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gIHRoZW46IHRoZW4sXG5cbiAgLyoqXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIFxuICAgIGBgYGpzXG4gICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG5cXCd0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICB9XG4gIFxuICAgIC8vIHN5bmNocm9ub3VzXG4gICAgdHJ5IHtcbiAgICAgIGZpbmRBdXRob3IoKTtcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9XG4gIFxuICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgY2F0Y2hcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICAnY2F0Y2gnOiBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24sIGxhYmVsKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uLCBsYWJlbCk7XG4gIH0sXG5cbiAgLyoqXG4gICAgYGZpbmFsbHlgIHdpbGwgYmUgaW52b2tlZCByZWdhcmRsZXNzIG9mIHRoZSBwcm9taXNlJ3MgZmF0ZSBqdXN0IGFzIG5hdGl2ZVxuICAgIHRyeS9jYXRjaC9maW5hbGx5IGJlaGF2ZXNcbiAgXG4gICAgU3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkge1xuICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEF1dGhvcigpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmaW5kQXV0aG9yKCk7IC8vIHN1Y2NlZWQgb3IgZmFpbFxuICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gYWx3YXlzIHJ1bnNcbiAgICAgIC8vIGRvZXNuJ3QgYWZmZWN0IHRoZSByZXR1cm4gdmFsdWVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEFzeW5jaHJvbm91cyBleGFtcGxlOlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKXtcbiAgICAgIC8vIGF1dGhvciB3YXMgZWl0aGVyIGZvdW5kLCBvciBub3RcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBmaW5hbGx5XG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgJ2ZpbmFsbHknOiBmdW5jdGlvbiBfZmluYWxseShjYWxsYmFjaywgbGFiZWwpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gcHJvbWlzZS5jb25zdHJ1Y3RvcjtcblxuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgIH0pO1xuICAgIH0sIGxhYmVsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gUmVzdWx0KCkge1xuICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xufVxuXG52YXIgRVJST1IgPSBuZXcgUmVzdWx0KCk7XG52YXIgR0VUX1RIRU5fRVJST1IkMSA9IG5ldyBSZXN1bHQoKTtcblxuZnVuY3Rpb24gZ2V0VGhlbiQxKG9iaikge1xuICB0cnkge1xuICAgIHJldHVybiBvYmoudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBFUlJPUi52YWx1ZSA9IGVycm9yO1xuICAgIHJldHVybiBFUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlBcHBseShmLCBzLCBhKSB7XG4gIHRyeSB7XG4gICAgZi5hcHBseShzLCBhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBFUlJPUi52YWx1ZSA9IGVycm9yO1xuICAgIHJldHVybiBFUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlT2JqZWN0KF8sIGFyZ3VtZW50TmFtZXMpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgbGVuZ3RoID0gXy5sZW5ndGg7XG4gIHZhciBhcmdzID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgZm9yICh2YXIgeCA9IDA7IHggPCBsZW5ndGg7IHgrKykge1xuICAgIGFyZ3NbeF0gPSBfW3hdO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIF9uYW1lID0gYXJndW1lbnROYW1lc1tpXTtcbiAgICBvYmpbX25hbWVdID0gYXJnc1tpICsgMV07XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBhcnJheVJlc3VsdChfKSB7XG4gIHZhciBsZW5ndGggPSBfLmxlbmd0aDtcbiAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkobGVuZ3RoIC0gMSk7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGFyZ3NbaSAtIDFdID0gX1tpXTtcbiAgfVxuXG4gIHJldHVybiBhcmdzO1xufVxuXG5mdW5jdGlvbiB3cmFwVGhlbmFibGUoX3RoZW4sIHByb21pc2UpIHtcbiAgcmV0dXJuIHtcbiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsRmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICByZXR1cm4gX3RoZW4uY2FsbChwcm9taXNlLCBvbkZ1bEZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAgYFJTVlAuZGVub2RlaWZ5YCB0YWtlcyBhICdub2RlLXN0eWxlJyBmdW5jdGlvbiBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXRcbiAgd2lsbCByZXR1cm4gYW4gYFJTVlAuUHJvbWlzZWAuIFlvdSBjYW4gdXNlIGBkZW5vZGVpZnlgIGluIE5vZGUuanMgb3IgdGhlXG4gIGJyb3dzZXIgd2hlbiB5b3UnZCBwcmVmZXIgdG8gdXNlIHByb21pc2VzIG92ZXIgdXNpbmcgY2FsbGJhY2tzLiBGb3IgZXhhbXBsZSxcbiAgYGRlbm9kZWlmeWAgdHJhbnNmb3JtcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuICBmcy5yZWFkRmlsZSgnbXlmaWxlLnR4dCcsIGZ1bmN0aW9uKGVyciwgZGF0YSl7XG4gICAgaWYgKGVycikgcmV0dXJuIGhhbmRsZUVycm9yKGVycik7XG4gICAgaGFuZGxlRGF0YShkYXRhKTtcbiAgfSk7XG4gIGBgYFxuXG4gIGludG86XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgZnMgPSByZXF1aXJlKCdmcycpO1xuICBsZXQgcmVhZEZpbGUgPSBSU1ZQLmRlbm9kZWlmeShmcy5yZWFkRmlsZSk7XG5cbiAgcmVhZEZpbGUoJ215ZmlsZS50eHQnKS50aGVuKGhhbmRsZURhdGEsIGhhbmRsZUVycm9yKTtcbiAgYGBgXG5cbiAgSWYgdGhlIG5vZGUgZnVuY3Rpb24gaGFzIG11bHRpcGxlIHN1Y2Nlc3MgcGFyYW1ldGVycywgdGhlbiBgZGVub2RlaWZ5YFxuICBqdXN0IHJldHVybnMgdGhlIGZpcnN0IG9uZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCByZXF1ZXN0ID0gUlNWUC5kZW5vZGVpZnkocmVxdWlyZSgncmVxdWVzdCcpKTtcblxuICByZXF1ZXN0KCdodHRwOi8vZXhhbXBsZS5jb20nKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIC8vIC4uLlxuICB9KTtcbiAgYGBgXG5cbiAgSG93ZXZlciwgaWYgeW91IG5lZWQgYWxsIHN1Y2Nlc3MgcGFyYW1ldGVycywgc2V0dGluZyBgZGVub2RlaWZ5YCdzXG4gIHNlY29uZCBwYXJhbWV0ZXIgdG8gYHRydWVgIGNhdXNlcyBpdCB0byByZXR1cm4gYWxsIHN1Y2Nlc3MgcGFyYW1ldGVyc1xuICBhcyBhbiBhcnJheTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCByZXF1ZXN0ID0gUlNWUC5kZW5vZGVpZnkocmVxdWlyZSgncmVxdWVzdCcpLCB0cnVlKTtcblxuICByZXF1ZXN0KCdodHRwOi8vZXhhbXBsZS5jb20nKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgIC8vIHJlc3VsdFswXSAtPiByZXNcbiAgICAvLyByZXN1bHRbMV0gLT4gYm9keVxuICB9KTtcbiAgYGBgXG5cbiAgT3IgaWYgeW91IHBhc3MgaXQgYW4gYXJyYXkgd2l0aCBuYW1lcyBpdCByZXR1cm5zIHRoZSBwYXJhbWV0ZXJzIGFzIGEgaGFzaDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCByZXF1ZXN0ID0gUlNWUC5kZW5vZGVpZnkocmVxdWlyZSgncmVxdWVzdCcpLCBbJ3JlcycsICdib2R5J10pO1xuXG4gIHJlcXVlc3QoJ2h0dHA6Ly9leGFtcGxlLmNvbScpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgLy8gcmVzdWx0LnJlc1xuICAgIC8vIHJlc3VsdC5ib2R5XG4gIH0pO1xuICBgYGBcblxuICBTb21ldGltZXMgeW91IG5lZWQgdG8gcmV0YWluIHRoZSBgdGhpc2A6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgYXBwID0gcmVxdWlyZSgnZXhwcmVzcycpKCk7XG4gIGxldCByZW5kZXIgPSBSU1ZQLmRlbm9kZWlmeShhcHAucmVuZGVyLmJpbmQoYXBwKSk7XG4gIGBgYFxuXG4gIFRoZSBkZW5vZGlmaWVkIGZ1bmN0aW9uIGluaGVyaXRzIGZyb20gdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLiBJdCB3b3JrcyBpbiBhbGxcbiAgZW52aXJvbm1lbnRzLCBleGNlcHQgSUUgMTAgYW5kIGJlbG93LiBDb25zZXF1ZW50bHkgYWxsIHByb3BlcnRpZXMgb2YgdGhlIG9yaWdpbmFsXG4gIGZ1bmN0aW9uIGFyZSBhdmFpbGFibGUgdG8geW91LiBIb3dldmVyLCBhbnkgcHJvcGVydGllcyB5b3UgY2hhbmdlIG9uIHRoZVxuICBkZW5vZGVpZmllZCBmdW5jdGlvbiB3b24ndCBiZSBjaGFuZ2VkIG9uIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi4gRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCByZXF1ZXN0ID0gUlNWUC5kZW5vZGVpZnkocmVxdWlyZSgncmVxdWVzdCcpKSxcbiAgICAgIGNvb2tpZUphciA9IHJlcXVlc3QuamFyKCk7IC8vIDwtIEluaGVyaXRhbmNlIGlzIHVzZWQgaGVyZVxuXG4gIHJlcXVlc3QoJ2h0dHA6Ly9leGFtcGxlLmNvbScsIHtqYXI6IGNvb2tpZUphcn0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgLy8gY29va2llSmFyLmNvb2tpZXMgaG9sZHMgbm93IHRoZSBjb29raWVzIHJldHVybmVkIGJ5IGV4YW1wbGUuY29tXG4gIH0pO1xuICBgYGBcblxuICBVc2luZyBgZGVub2RlaWZ5YCBtYWtlcyBpdCBlYXNpZXIgdG8gY29tcG9zZSBhc3luY2hyb25vdXMgb3BlcmF0aW9ucyBpbnN0ZWFkXG4gIG9mIHVzaW5nIGNhbGxiYWNrcy4gRm9yIGV4YW1wbGUsIGluc3RlYWQgb2Y6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgZnMgPSByZXF1aXJlKCdmcycpO1xuXG4gIGZzLnJlYWRGaWxlKCdteWZpbGUudHh0JywgZnVuY3Rpb24oZXJyLCBkYXRhKXtcbiAgICBpZiAoZXJyKSB7IC4uLiB9IC8vIEhhbmRsZSBlcnJvclxuICAgIGZzLndyaXRlRmlsZSgnbXlmaWxlMi50eHQnLCBkYXRhLCBmdW5jdGlvbihlcnIpe1xuICAgICAgaWYgKGVycikgeyAuLi4gfSAvLyBIYW5kbGUgZXJyb3JcbiAgICAgIGNvbnNvbGUubG9nKCdkb25lJylcbiAgICB9KTtcbiAgfSk7XG4gIGBgYFxuXG4gIHlvdSBjYW4gY2hhaW4gdGhlIG9wZXJhdGlvbnMgdG9nZXRoZXIgdXNpbmcgYHRoZW5gIGZyb20gdGhlIHJldHVybmVkIHByb21pc2U6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgZnMgPSByZXF1aXJlKCdmcycpO1xuICBsZXQgcmVhZEZpbGUgPSBSU1ZQLmRlbm9kZWlmeShmcy5yZWFkRmlsZSk7XG4gIGxldCB3cml0ZUZpbGUgPSBSU1ZQLmRlbm9kZWlmeShmcy53cml0ZUZpbGUpO1xuXG4gIHJlYWRGaWxlKCdteWZpbGUudHh0JykudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICByZXR1cm4gd3JpdGVGaWxlKCdteWZpbGUyLnR4dCcsIGRhdGEpO1xuICB9KS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgY29uc29sZS5sb2coJ2RvbmUnKVxuICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcil7XG4gICAgLy8gSGFuZGxlIGVycm9yXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGRlbm9kZWlmeVxuICBAc3RhdGljXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge0Z1bmN0aW9ufSBub2RlRnVuYyBhICdub2RlLXN0eWxlJyBmdW5jdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2sgYXNcbiAgaXRzIGxhc3QgYXJndW1lbnQuIFRoZSBjYWxsYmFjayBleHBlY3RzIGFuIGVycm9yIHRvIGJlIHBhc3NlZCBhcyBpdHMgZmlyc3RcbiAgYXJndW1lbnQgKGlmIGFuIGVycm9yIG9jY3VycmVkLCBvdGhlcndpc2UgbnVsbCksIGFuZCB0aGUgdmFsdWUgZnJvbSB0aGVcbiAgb3BlcmF0aW9uIGFzIGl0cyBzZWNvbmQgYXJndW1lbnQgKCdmdW5jdGlvbihlcnIsIHZhbHVlKXsgfScpLlxuICBAcGFyYW0ge0Jvb2xlYW58QXJyYXl9IFtvcHRpb25zXSBBbiBvcHRpb25hbCBwYXJhbXRlciB0aGF0IGlmIHNldFxuICB0byBgdHJ1ZWAgY2F1c2VzIHRoZSBwcm9taXNlIHRvIGZ1bGZpbGwgd2l0aCB0aGUgY2FsbGJhY2sncyBzdWNjZXNzIGFyZ3VtZW50c1xuICBhcyBhbiBhcnJheS4gVGhpcyBpcyB1c2VmdWwgaWYgdGhlIG5vZGUgZnVuY3Rpb24gaGFzIG11bHRpcGxlIHN1Y2Nlc3NcbiAgcGFyYW10ZXJzLiBJZiB5b3Ugc2V0IHRoaXMgcGFyYW10ZXIgdG8gYW4gYXJyYXkgd2l0aCBuYW1lcywgdGhlIHByb21pc2Ugd2lsbFxuICBmdWxmaWxsIHdpdGggYSBoYXNoIHdpdGggdGhlc2UgbmFtZXMgYXMga2V5cyBhbmQgdGhlIHN1Y2Nlc3MgcGFyYW1ldGVycyBhc1xuICB2YWx1ZXMuXG4gIEByZXR1cm4ge0Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYG5vZGVGdW5jYCB0byByZXR1cm4gYW5cbiAgYFJTVlAuUHJvbWlzZWBcbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGRlbm9kZWlmeShub2RlRnVuYywgb3B0aW9ucykge1xuICB2YXIgZm4gPSBmdW5jdGlvbiBmbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGwgKyAxKTtcbiAgICB2YXIgcHJvbWlzZUlucHV0ID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgaWYgKCFwcm9taXNlSW5wdXQpIHtcbiAgICAgICAgLy8gVE9ETzogY2xlYW4gdGhpcyB1cFxuICAgICAgICBwcm9taXNlSW5wdXQgPSBuZWVkc1Byb21pc2VJbnB1dChhcmcpO1xuICAgICAgICBpZiAocHJvbWlzZUlucHV0ID09PSBHRVRfVEhFTl9FUlJPUiQxKSB7XG4gICAgICAgICAgdmFyIHAgPSBuZXcgUHJvbWlzZShub29wKTtcbiAgICAgICAgICByZWplY3QocCwgR0VUX1RIRU5fRVJST1IkMS52YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvbWlzZUlucHV0ICYmIHByb21pc2VJbnB1dCAhPT0gdHJ1ZSkge1xuICAgICAgICAgIGFyZyA9IHdyYXBUaGVuYWJsZShwcm9taXNlSW5wdXQsIGFyZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFyZ3NbaV0gPSBhcmc7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShub29wKTtcblxuICAgIGFyZ3NbbF0gPSBmdW5jdGlvbiAoZXJyLCB2YWwpIHtcbiAgICAgIGlmIChlcnIpIHJlamVjdChwcm9taXNlLCBlcnIpO2Vsc2UgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkgcmVzb2x2ZShwcm9taXNlLCB2YWwpO2Vsc2UgaWYgKG9wdGlvbnMgPT09IHRydWUpIHJlc29sdmUocHJvbWlzZSwgYXJyYXlSZXN1bHQoYXJndW1lbnRzKSk7ZWxzZSBpZiAoaXNBcnJheShvcHRpb25zKSkgcmVzb2x2ZShwcm9taXNlLCBtYWtlT2JqZWN0KGFyZ3VtZW50cywgb3B0aW9ucykpO2Vsc2UgcmVzb2x2ZShwcm9taXNlLCB2YWwpO1xuICAgIH07XG5cbiAgICBpZiAocHJvbWlzZUlucHV0KSB7XG4gICAgICByZXR1cm4gaGFuZGxlUHJvbWlzZUlucHV0KHByb21pc2UsIGFyZ3MsIG5vZGVGdW5jLCBzZWxmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhhbmRsZVZhbHVlSW5wdXQocHJvbWlzZSwgYXJncywgbm9kZUZ1bmMsIHNlbGYpO1xuICAgIH1cbiAgfTtcblxuICBmbi5fX3Byb3RvX18gPSBub2RlRnVuYztcblxuICByZXR1cm4gZm47XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVZhbHVlSW5wdXQocHJvbWlzZSwgYXJncywgbm9kZUZ1bmMsIHNlbGYpIHtcbiAgdmFyIHJlc3VsdCA9IHRyeUFwcGx5KG5vZGVGdW5jLCBzZWxmLCBhcmdzKTtcbiAgaWYgKHJlc3VsdCA9PT0gRVJST1IpIHtcbiAgICByZWplY3QocHJvbWlzZSwgcmVzdWx0LnZhbHVlKTtcbiAgfVxuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvbWlzZUlucHV0KHByb21pc2UsIGFyZ3MsIG5vZGVGdW5jLCBzZWxmKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChhcmdzKS50aGVuKGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUFwcGx5KG5vZGVGdW5jLCBzZWxmLCBhcmdzKTtcbiAgICBpZiAocmVzdWx0ID09PSBFUlJPUikge1xuICAgICAgcmVqZWN0KHByb21pc2UsIHJlc3VsdC52YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbmVlZHNQcm9taXNlSW5wdXQoYXJnKSB7XG4gIGlmIChhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoYXJnLmNvbnN0cnVjdG9yID09PSBQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldFRoZW4kMShhcmcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gIFRoaXMgaXMgYSBjb252ZW5pZW50IGFsaWFzIGZvciBgUlNWUC5Qcm9taXNlLmFsbGAuXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAZm9yIFJTVlBcbiAgQHBhcmFtIHtBcnJheX0gYXJyYXkgQXJyYXkgb2YgcHJvbWlzZXMuXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBBbiBvcHRpb25hbCBsYWJlbC4gVGhpcyBpcyB1c2VmdWxcbiAgZm9yIHRvb2xpbmcuXG4qL1xuZnVuY3Rpb24gYWxsJDEoYXJyYXksIGxhYmVsKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChhcnJheSwgbGFiZWwpO1xufVxuXG5mdW5jdGlvbiBBbGxTZXR0bGVkKENvbnN0cnVjdG9yLCBlbnRyaWVzLCBsYWJlbCkge1xuICB0aGlzLl9zdXBlckNvbnN0cnVjdG9yKENvbnN0cnVjdG9yLCBlbnRyaWVzLCBmYWxzZSwgLyogZG9uJ3QgYWJvcnQgb24gcmVqZWN0ICovbGFiZWwpO1xufVxuXG5BbGxTZXR0bGVkLnByb3RvdHlwZSA9IG9fY3JlYXRlKEVudW1lcmF0b3IucHJvdG90eXBlKTtcbkFsbFNldHRsZWQucHJvdG90eXBlLl9zdXBlckNvbnN0cnVjdG9yID0gRW51bWVyYXRvcjtcbkFsbFNldHRsZWQucHJvdG90eXBlLl9tYWtlUmVzdWx0ID0gbWFrZVNldHRsZWRSZXN1bHQ7XG5BbGxTZXR0bGVkLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdhbGxTZXR0bGVkIG11c3QgYmUgY2FsbGVkIHdpdGggYW4gYXJyYXknKTtcbn07XG5cbi8qKlxuICBgUlNWUC5hbGxTZXR0bGVkYCBpcyBzaW1pbGFyIHRvIGBSU1ZQLmFsbGAsIGJ1dCBpbnN0ZWFkIG9mIGltcGxlbWVudGluZ1xuICBhIGZhaWwtZmFzdCBtZXRob2QsIGl0IHdhaXRzIHVudGlsIGFsbCB0aGUgcHJvbWlzZXMgaGF2ZSByZXR1cm5lZCBhbmRcbiAgc2hvd3MgeW91IGFsbCB0aGUgcmVzdWx0cy4gVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdhbnQgdG8gaGFuZGxlIG11bHRpcGxlXG4gIHByb21pc2VzJyBmYWlsdXJlIHN0YXRlcyB0b2dldGhlciBhcyBhIHNldC5cblxuICBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCB0aGUgZ2l2ZW4gcHJvbWlzZXMgaGF2ZSBiZWVuXG4gIHNldHRsZWQuIFRoZSByZXR1cm4gcHJvbWlzZSBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiB0aGUgc3RhdGVzIG9mXG4gIHRoZSBwcm9taXNlcyBwYXNzZWQgaW50byB0aGUgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudC5cblxuICBFYWNoIHN0YXRlIG9iamVjdCB3aWxsIGVpdGhlciBpbmRpY2F0ZSBmdWxmaWxsbWVudCBvciByZWplY3Rpb24sIGFuZFxuICBwcm92aWRlIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIG9yIHJlYXNvbi4gVGhlIHN0YXRlcyB3aWxsIHRha2Ugb25lIG9mXG4gIHRoZSBmb2xsb3dpbmcgZm9ybWF0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIHsgc3RhdGU6ICdmdWxmaWxsZWQnLCB2YWx1ZTogdmFsdWUgfVxuICAgIG9yXG4gIHsgc3RhdGU6ICdyZWplY3RlZCcsIHJlYXNvbjogcmVhc29uIH1cbiAgYGBgXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IFJTVlAuUHJvbWlzZS5yZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSBSU1ZQLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcignMicpKTtcbiAgbGV0IHByb21pc2UzID0gUlNWUC5Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJzMnKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFJTVlAuYWxsU2V0dGxlZChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gYXJyYXkgPT0gW1xuICAgIC8vICAgeyBzdGF0ZTogJ2Z1bGZpbGxlZCcsIHZhbHVlOiAxIH0sXG4gICAgLy8gICB7IHN0YXRlOiAncmVqZWN0ZWQnLCByZWFzb246IEVycm9yIH0sXG4gICAgLy8gICB7IHN0YXRlOiAncmVqZWN0ZWQnLCByZWFzb246IEVycm9yIH1cbiAgICAvLyBdXG4gICAgLy8gTm90ZSB0aGF0IGZvciB0aGUgc2Vjb25kIGl0ZW0sIHJlYXNvbi5tZXNzYWdlIHdpbGwgYmUgJzInLCBhbmQgZm9yIHRoZVxuICAgIC8vIHRoaXJkIGl0ZW0sIHJlYXNvbi5tZXNzYWdlIHdpbGwgYmUgJzMnLlxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIE5vdCBydW4uIChUaGlzIGJsb2NrIHdvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIGFsbFNldHRsZWQgaGFkIGZhaWxlZCxcbiAgICAvLyBmb3IgaW5zdGFuY2UgaWYgcGFzc2VkIGFuIGluY29ycmVjdCBhcmd1bWVudCB0eXBlLilcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsU2V0dGxlZFxuICBAc3RhdGljXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCAtIG9wdGlvbmFsIHN0cmluZyB0aGF0IGRlc2NyaWJlcyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgdGhlIHNldHRsZWRcbiAgc3RhdGVzIG9mIHRoZSBjb25zdGl0dWVudCBwcm9taXNlcy5cbiovXG5mdW5jdGlvbiBhbGxTZXR0bGVkKGVudHJpZXMsIGxhYmVsKSB7XG4gIHJldHVybiBuZXcgQWxsU2V0dGxlZChQcm9taXNlLCBlbnRyaWVzLCBsYWJlbCkucHJvbWlzZTtcbn1cblxuLyoqXG4gIFRoaXMgaXMgYSBjb252ZW5pZW50IGFsaWFzIGZvciBgUlNWUC5Qcm9taXNlLnJhY2VgLlxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge0FycmF5fSBhcnJheSBBcnJheSBvZiBwcm9taXNlcy5cbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIEFuIG9wdGlvbmFsIGxhYmVsLiBUaGlzIGlzIHVzZWZ1bFxuICBmb3IgdG9vbGluZy5cbiAqL1xuZnVuY3Rpb24gcmFjZSQxKGFycmF5LCBsYWJlbCkge1xuICByZXR1cm4gUHJvbWlzZS5yYWNlKGFycmF5LCBsYWJlbCk7XG59XG5cbmZ1bmN0aW9uIFByb21pc2VIYXNoKENvbnN0cnVjdG9yLCBvYmplY3QsIGxhYmVsKSB7XG4gIHRoaXMuX3N1cGVyQ29uc3RydWN0b3IoQ29uc3RydWN0b3IsIG9iamVjdCwgdHJ1ZSwgbGFiZWwpO1xufVxuXG5Qcm9taXNlSGFzaC5wcm90b3R5cGUgPSBvX2NyZWF0ZShFbnVtZXJhdG9yLnByb3RvdHlwZSk7XG5Qcm9taXNlSGFzaC5wcm90b3R5cGUuX3N1cGVyQ29uc3RydWN0b3IgPSBFbnVtZXJhdG9yO1xuUHJvbWlzZUhhc2gucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9yZXN1bHQgPSB7fTtcbn07XG5cblByb21pc2VIYXNoLnByb3RvdHlwZS5fdmFsaWRhdGVJbnB1dCA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgJiYgdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jztcbn07XG5cblByb21pc2VIYXNoLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdQcm9taXNlLmhhc2ggbXVzdCBiZSBjYWxsZWQgd2l0aCBhbiBvYmplY3QnKTtcbn07XG5cblByb21pc2VIYXNoLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gZW51bWVyYXRvci5wcm9taXNlO1xuICB2YXIgaW5wdXQgPSBlbnVtZXJhdG9yLl9pbnB1dDtcbiAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gaW5wdXQpIHtcbiAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlucHV0LCBrZXkpKSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBwb3NpdGlvbjoga2V5LFxuICAgICAgICBlbnRyeTogaW5wdXRba2V5XVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IHJlc3VsdHMubGVuZ3RoO1xuICBlbnVtZXJhdG9yLl9yZW1haW5pbmcgPSBsZW5ndGg7XG4gIHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCA9IHJlc3VsdHNbaV07XG4gICAgZW51bWVyYXRvci5fZWFjaEVudHJ5KHJlc3VsdC5lbnRyeSwgcmVzdWx0LnBvc2l0aW9uKTtcbiAgfVxufTtcblxuLyoqXG4gIGBSU1ZQLmhhc2hgIGlzIHNpbWlsYXIgdG8gYFJTVlAuYWxsYCwgYnV0IHRha2VzIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGFuIGFycmF5XG4gIGZvciBpdHMgYHByb21pc2VzYCBhcmd1bWVudC5cblxuICBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCB0aGUgZ2l2ZW4gcHJvbWlzZXMgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLiBUaGUgcmV0dXJuZWQgcHJvbWlzZVxuICBpcyBmdWxmaWxsZWQgd2l0aCBhIGhhc2ggdGhhdCBoYXMgdGhlIHNhbWUga2V5IG5hbWVzIGFzIHRoZSBgcHJvbWlzZXNgIG9iamVjdFxuICBhcmd1bWVudC4gSWYgYW55IG9mIHRoZSB2YWx1ZXMgaW4gdGhlIG9iamVjdCBhcmUgbm90IHByb21pc2VzLCB0aGV5IHdpbGxcbiAgc2ltcGx5IGJlIGNvcGllZCBvdmVyIHRvIHRoZSBmdWxmaWxsZWQgb2JqZWN0LlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZXMgPSB7XG4gICAgbXlQcm9taXNlOiBSU1ZQLnJlc29sdmUoMSksXG4gICAgeW91clByb21pc2U6IFJTVlAucmVzb2x2ZSgyKSxcbiAgICB0aGVpclByb21pc2U6IFJTVlAucmVzb2x2ZSgzKSxcbiAgICBub3RBUHJvbWlzZTogNFxuICB9O1xuXG4gIFJTVlAuaGFzaChwcm9taXNlcykudGhlbihmdW5jdGlvbihoYXNoKXtcbiAgICAvLyBoYXNoIGhlcmUgaXMgYW4gb2JqZWN0IHRoYXQgbG9va3MgbGlrZTpcbiAgICAvLyB7XG4gICAgLy8gICBteVByb21pc2U6IDEsXG4gICAgLy8gICB5b3VyUHJvbWlzZTogMixcbiAgICAvLyAgIHRoZWlyUHJvbWlzZTogMyxcbiAgICAvLyAgIG5vdEFQcm9taXNlOiA0XG4gICAgLy8gfVxuICB9KTtcbiAgYGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgUlNWUC5oYXNoYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyB0aGUgcmVhc29uIHRvIHRoZSByZWplY3Rpb24gaGFuZGxlci5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2VzID0ge1xuICAgIG15UHJvbWlzZTogUlNWUC5yZXNvbHZlKDEpLFxuICAgIHJlamVjdGVkUHJvbWlzZTogUlNWUC5yZWplY3QobmV3IEVycm9yKCdyZWplY3RlZFByb21pc2UnKSksXG4gICAgYW5vdGhlclJlamVjdGVkUHJvbWlzZTogUlNWUC5yZWplY3QobmV3IEVycm9yKCdhbm90aGVyUmVqZWN0ZWRQcm9taXNlJykpLFxuICB9O1xuXG4gIFJTVlAuaGFzaChwcm9taXNlcykudGhlbihmdW5jdGlvbihoYXNoKXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdyZWplY3RlZFByb21pc2UnXG4gIH0pO1xuICBgYGBcblxuICBBbiBpbXBvcnRhbnQgbm90ZTogYFJTVlAuaGFzaGAgaXMgaW50ZW5kZWQgZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cyB0aGF0XG4gIGFyZSBqdXN0IGEgc2V0IG9mIGtleXMgYW5kIHZhbHVlcy4gYFJTVlAuaGFzaGAgd2lsbCBOT1QgcHJlc2VydmUgcHJvdG90eXBlXG4gIGNoYWlucy5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgZnVuY3Rpb24gTXlDb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMuZXhhbXBsZSA9IFJTVlAucmVzb2x2ZSgnRXhhbXBsZScpO1xuICB9XG5cbiAgTXlDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSB7XG4gICAgcHJvdG9Qcm9wZXJ0eTogUlNWUC5yZXNvbHZlKCdQcm90byBQcm9wZXJ0eScpXG4gIH07XG5cbiAgbGV0IG15T2JqZWN0ID0gbmV3IE15Q29uc3RydWN0b3IoKTtcblxuICBSU1ZQLmhhc2gobXlPYmplY3QpLnRoZW4oZnVuY3Rpb24oaGFzaCl7XG4gICAgLy8gcHJvdG9Qcm9wZXJ0eSB3aWxsIG5vdCBiZSBwcmVzZW50LCBpbnN0ZWFkIHlvdSB3aWxsIGp1c3QgaGF2ZSBhblxuICAgIC8vIG9iamVjdCB0aGF0IGxvb2tzIGxpa2U6XG4gICAgLy8ge1xuICAgIC8vICAgZXhhbXBsZTogJ0V4YW1wbGUnXG4gICAgLy8gfVxuICAgIC8vXG4gICAgLy8gaGFzaC5oYXNPd25Qcm9wZXJ0eSgncHJvdG9Qcm9wZXJ0eScpOyAvLyBmYWxzZVxuICAgIC8vICd1bmRlZmluZWQnID09PSB0eXBlb2YgaGFzaC5wcm90b1Byb3BlcnR5XG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGhhc2hcbiAgQHN0YXRpY1xuICBAZm9yIFJTVlBcbiAgQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIHRoYXQgZGVzY3JpYmVzIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgcHJvcGVydGllcyBvZiBgcHJvbWlzZXNgXG4gIGhhdmUgYmVlbiBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiovXG5mdW5jdGlvbiBoYXNoKG9iamVjdCwgbGFiZWwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlSGFzaChQcm9taXNlLCBvYmplY3QsIGxhYmVsKS5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBIYXNoU2V0dGxlZChDb25zdHJ1Y3Rvciwgb2JqZWN0LCBsYWJlbCkge1xuICB0aGlzLl9zdXBlckNvbnN0cnVjdG9yKENvbnN0cnVjdG9yLCBvYmplY3QsIGZhbHNlLCBsYWJlbCk7XG59XG5cbkhhc2hTZXR0bGVkLnByb3RvdHlwZSA9IG9fY3JlYXRlKFByb21pc2VIYXNoLnByb3RvdHlwZSk7XG5IYXNoU2V0dGxlZC5wcm90b3R5cGUuX3N1cGVyQ29uc3RydWN0b3IgPSBFbnVtZXJhdG9yO1xuSGFzaFNldHRsZWQucHJvdG90eXBlLl9tYWtlUmVzdWx0ID0gbWFrZVNldHRsZWRSZXN1bHQ7XG5cbkhhc2hTZXR0bGVkLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdoYXNoU2V0dGxlZCBtdXN0IGJlIGNhbGxlZCB3aXRoIGFuIG9iamVjdCcpO1xufTtcblxuLyoqXG4gIGBSU1ZQLmhhc2hTZXR0bGVkYCBpcyBzaW1pbGFyIHRvIGBSU1ZQLmFsbFNldHRsZWRgLCBidXQgdGFrZXMgYW4gb2JqZWN0XG4gIGluc3RlYWQgb2YgYW4gYXJyYXkgZm9yIGl0cyBgcHJvbWlzZXNgIGFyZ3VtZW50LlxuXG4gIFVubGlrZSBgUlNWUC5hbGxgIG9yIGBSU1ZQLmhhc2hgLCB3aGljaCBpbXBsZW1lbnQgYSBmYWlsLWZhc3QgbWV0aG9kLFxuICBidXQgbGlrZSBgUlNWUC5hbGxTZXR0bGVkYCwgYGhhc2hTZXR0bGVkYCB3YWl0cyB1bnRpbCBhbGwgdGhlXG4gIGNvbnN0aXR1ZW50IHByb21pc2VzIGhhdmUgcmV0dXJuZWQgYW5kIHRoZW4gc2hvd3MgeW91IGFsbCB0aGUgcmVzdWx0c1xuICB3aXRoIHRoZWlyIHN0YXRlcyBhbmQgdmFsdWVzL3JlYXNvbnMuIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSB3YW50IHRvXG4gIGhhbmRsZSBtdWx0aXBsZSBwcm9taXNlcycgZmFpbHVyZSBzdGF0ZXMgdG9nZXRoZXIgYXMgYSBzZXQuXG5cbiAgUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgdGhlIGdpdmVuIHByb21pc2VzIGhhdmUgYmVlblxuICBzZXR0bGVkLCBvciByZWplY3RlZCBpZiB0aGUgcGFzc2VkIHBhcmFtZXRlcnMgYXJlIGludmFsaWQuXG5cbiAgVGhlIHJldHVybmVkIHByb21pc2UgaXMgZnVsZmlsbGVkIHdpdGggYSBoYXNoIHRoYXQgaGFzIHRoZSBzYW1lIGtleSBuYW1lcyBhc1xuICB0aGUgYHByb21pc2VzYCBvYmplY3QgYXJndW1lbnQuIElmIGFueSBvZiB0aGUgdmFsdWVzIGluIHRoZSBvYmplY3QgYXJlIG5vdFxuICBwcm9taXNlcywgdGhleSB3aWxsIGJlIGNvcGllZCBvdmVyIHRvIHRoZSBmdWxmaWxsZWQgb2JqZWN0IGFuZCBtYXJrZWQgd2l0aCBzdGF0ZVxuICAnZnVsZmlsbGVkJy5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2VzID0ge1xuICAgIG15UHJvbWlzZTogUlNWUC5Qcm9taXNlLnJlc29sdmUoMSksXG4gICAgeW91clByb21pc2U6IFJTVlAuUHJvbWlzZS5yZXNvbHZlKDIpLFxuICAgIHRoZWlyUHJvbWlzZTogUlNWUC5Qcm9taXNlLnJlc29sdmUoMyksXG4gICAgbm90QVByb21pc2U6IDRcbiAgfTtcblxuICBSU1ZQLmhhc2hTZXR0bGVkKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGhhc2gpe1xuICAgIC8vIGhhc2ggaGVyZSBpcyBhbiBvYmplY3QgdGhhdCBsb29rcyBsaWtlOlxuICAgIC8vIHtcbiAgICAvLyAgIG15UHJvbWlzZTogeyBzdGF0ZTogJ2Z1bGZpbGxlZCcsIHZhbHVlOiAxIH0sXG4gICAgLy8gICB5b3VyUHJvbWlzZTogeyBzdGF0ZTogJ2Z1bGZpbGxlZCcsIHZhbHVlOiAyIH0sXG4gICAgLy8gICB0aGVpclByb21pc2U6IHsgc3RhdGU6ICdmdWxmaWxsZWQnLCB2YWx1ZTogMyB9LFxuICAgIC8vICAgbm90QVByb21pc2U6IHsgc3RhdGU6ICdmdWxmaWxsZWQnLCB2YWx1ZTogNCB9XG4gICAgLy8gfVxuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBSU1ZQLmhhc2hgIGFyZSByZWplY3RlZCwgdGhlIHN0YXRlIHdpbGxcbiAgYmUgc2V0IHRvICdyZWplY3RlZCcgYW5kIHRoZSByZWFzb24gZm9yIHJlamVjdGlvbiBwcm92aWRlZC5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2VzID0ge1xuICAgIG15UHJvbWlzZTogUlNWUC5Qcm9taXNlLnJlc29sdmUoMSksXG4gICAgcmVqZWN0ZWRQcm9taXNlOiBSU1ZQLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigncmVqZWN0aW9uJykpLFxuICAgIGFub3RoZXJSZWplY3RlZFByb21pc2U6IFJTVlAuUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdtb3JlIHJlamVjdGlvbicpKSxcbiAgfTtcblxuICBSU1ZQLmhhc2hTZXR0bGVkKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGhhc2gpe1xuICAgIC8vIGhhc2ggaGVyZSBpcyBhbiBvYmplY3QgdGhhdCBsb29rcyBsaWtlOlxuICAgIC8vIHtcbiAgICAvLyAgIG15UHJvbWlzZTogICAgICAgICAgICAgIHsgc3RhdGU6ICdmdWxmaWxsZWQnLCB2YWx1ZTogMSB9LFxuICAgIC8vICAgcmVqZWN0ZWRQcm9taXNlOiAgICAgICAgeyBzdGF0ZTogJ3JlamVjdGVkJywgcmVhc29uOiBFcnJvciB9LFxuICAgIC8vICAgYW5vdGhlclJlamVjdGVkUHJvbWlzZTogeyBzdGF0ZTogJ3JlamVjdGVkJywgcmVhc29uOiBFcnJvciB9LFxuICAgIC8vIH1cbiAgICAvLyBOb3RlIHRoYXQgZm9yIHJlamVjdGVkUHJvbWlzZSwgcmVhc29uLm1lc3NhZ2UgPT0gJ3JlamVjdGlvbicsXG4gICAgLy8gYW5kIGZvciBhbm90aGVyUmVqZWN0ZWRQcm9taXNlLCByZWFzb24ubWVzc2FnZSA9PSAnbW9yZSByZWplY3Rpb24nLlxuICB9KTtcbiAgYGBgXG5cbiAgQW4gaW1wb3J0YW50IG5vdGU6IGBSU1ZQLmhhc2hTZXR0bGVkYCBpcyBpbnRlbmRlZCBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzIHRoYXRcbiAgYXJlIGp1c3QgYSBzZXQgb2Yga2V5cyBhbmQgdmFsdWVzLiBgUlNWUC5oYXNoU2V0dGxlZGAgd2lsbCBOT1QgcHJlc2VydmUgcHJvdG90eXBlXG4gIGNoYWlucy5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgZnVuY3Rpb24gTXlDb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMuZXhhbXBsZSA9IFJTVlAuUHJvbWlzZS5yZXNvbHZlKCdFeGFtcGxlJyk7XG4gIH1cblxuICBNeUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IHtcbiAgICBwcm90b1Byb3BlcnR5OiBSU1ZQLlByb21pc2UucmVzb2x2ZSgnUHJvdG8gUHJvcGVydHknKVxuICB9O1xuXG4gIGxldCBteU9iamVjdCA9IG5ldyBNeUNvbnN0cnVjdG9yKCk7XG5cbiAgUlNWUC5oYXNoU2V0dGxlZChteU9iamVjdCkudGhlbihmdW5jdGlvbihoYXNoKXtcbiAgICAvLyBwcm90b1Byb3BlcnR5IHdpbGwgbm90IGJlIHByZXNlbnQsIGluc3RlYWQgeW91IHdpbGwganVzdCBoYXZlIGFuXG4gICAgLy8gb2JqZWN0IHRoYXQgbG9va3MgbGlrZTpcbiAgICAvLyB7XG4gICAgLy8gICBleGFtcGxlOiB7IHN0YXRlOiAnZnVsZmlsbGVkJywgdmFsdWU6ICdFeGFtcGxlJyB9XG4gICAgLy8gfVxuICAgIC8vXG4gICAgLy8gaGFzaC5oYXNPd25Qcm9wZXJ0eSgncHJvdG9Qcm9wZXJ0eScpOyAvLyBmYWxzZVxuICAgIC8vICd1bmRlZmluZWQnID09PSB0eXBlb2YgaGFzaC5wcm90b1Byb3BlcnR5XG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGhhc2hTZXR0bGVkXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgdGhhdCBkZXNjcmliZXMgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHdoZW4gYWxsIHByb3BlcnRpZXMgb2YgYHByb21pc2VzYFxuICBoYXZlIGJlZW4gc2V0dGxlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGhhc2hTZXR0bGVkKG9iamVjdCwgbGFiZWwpIHtcbiAgcmV0dXJuIG5ldyBIYXNoU2V0dGxlZChQcm9taXNlLCBvYmplY3QsIGxhYmVsKS5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiByZXRocm93KHJlYXNvbikge1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB0aHJvdyByZWFzb247XG4gIH0pO1xuICB0aHJvdyByZWFzb247XG59XG5cbi8qKlxuICBgUlNWUC5kZWZlcmAgcmV0dXJucyBhbiBvYmplY3Qgc2ltaWxhciB0byBqUXVlcnkncyBgJC5EZWZlcnJlZGAuXG4gIGBSU1ZQLmRlZmVyYCBzaG91bGQgYmUgdXNlZCB3aGVuIHBvcnRpbmcgb3ZlciBjb2RlIHJlbGlhbnQgb24gYCQuRGVmZXJyZWRgJ3NcbiAgaW50ZXJmYWNlLiBOZXcgY29kZSBzaG91bGQgdXNlIHRoZSBgUlNWUC5Qcm9taXNlYCBjb25zdHJ1Y3RvciBpbnN0ZWFkLlxuXG4gIFRoZSBvYmplY3QgcmV0dXJuZWQgZnJvbSBgUlNWUC5kZWZlcmAgaXMgYSBwbGFpbiBvYmplY3Qgd2l0aCB0aHJlZSBwcm9wZXJ0aWVzOlxuXG4gICogcHJvbWlzZSAtIGFuIGBSU1ZQLlByb21pc2VgLlxuICAqIHJlamVjdCAtIGEgZnVuY3Rpb24gdGhhdCBjYXVzZXMgdGhlIGBwcm9taXNlYCBwcm9wZXJ0eSBvbiB0aGlzIG9iamVjdCB0b1xuICAgIGJlY29tZSByZWplY3RlZFxuICAqIHJlc29sdmUgLSBhIGZ1bmN0aW9uIHRoYXQgY2F1c2VzIHRoZSBgcHJvbWlzZWAgcHJvcGVydHkgb24gdGhpcyBvYmplY3QgdG9cbiAgICBiZWNvbWUgZnVsZmlsbGVkLlxuXG4gIEV4YW1wbGU6XG5cbiAgIGBgYGphdmFzY3JpcHRcbiAgIGxldCBkZWZlcnJlZCA9IFJTVlAuZGVmZXIoKTtcblxuICAgZGVmZXJyZWQucmVzb2x2ZShcIlN1Y2Nlc3MhXCIpO1xuXG4gICBkZWZlcnJlZC5wcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAvLyB2YWx1ZSBoZXJlIGlzIFwiU3VjY2VzcyFcIlxuICAgfSk7XG4gICBgYGBcblxuICBAbWV0aG9kIGRlZmVyXG4gIEBzdGF0aWNcbiAgQGZvciBSU1ZQXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZGVmZXIobGFiZWwpIHtcbiAgdmFyIGRlZmVycmVkID0geyByZXNvbHZlOiB1bmRlZmluZWQsIHJlamVjdDogdW5kZWZpbmVkIH07XG5cbiAgZGVmZXJyZWQucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gIH0sIGxhYmVsKTtcblxuICByZXR1cm4gZGVmZXJyZWQ7XG59XG5cbi8qKlxuIGBSU1ZQLm1hcGAgaXMgc2ltaWxhciB0byBKYXZhU2NyaXB0J3MgbmF0aXZlIGBtYXBgIG1ldGhvZCwgZXhjZXB0IHRoYXQgaXRcbiAgd2FpdHMgZm9yIGFsbCBwcm9taXNlcyB0byBiZWNvbWUgZnVsZmlsbGVkIGJlZm9yZSBydW5uaW5nIHRoZSBgbWFwRm5gIG9uXG4gIGVhY2ggaXRlbSBpbiBnaXZlbiB0byBgcHJvbWlzZXNgLiBgUlNWUC5tYXBgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbFxuICBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBtYXBGbmAgb24gdGhlIHZhbHVlcyB0aGUgcHJvbWlzZXNcbiAgYmVjb21lIGZ1bGZpbGxlZCB3aXRoLlxuXG4gIEZvciBleGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcblxuICBsZXQgcHJvbWlzZTEgPSBSU1ZQLnJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IFJTVlAucmVzb2x2ZSgyKTtcbiAgbGV0IHByb21pc2UzID0gUlNWUC5yZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBsZXQgbWFwRm4gPSBmdW5jdGlvbihpdGVtKXtcbiAgICByZXR1cm4gaXRlbSArIDE7XG4gIH07XG5cbiAgUlNWUC5tYXAocHJvbWlzZXMsIG1hcEZuKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0IGlzIFsgMiwgMywgNCBdXG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYFJTVlAubWFwYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZSdzXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gUlNWUC5yZWplY3QobmV3IEVycm9yKCcyJykpO1xuICBsZXQgcHJvbWlzZTMgPSBSU1ZQLnJlamVjdChuZXcgRXJyb3IoJzMnKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIGxldCBtYXBGbiA9IGZ1bmN0aW9uKGl0ZW0pe1xuICAgIHJldHVybiBpdGVtICsgMTtcbiAgfTtcblxuICBSU1ZQLm1hcChwcm9taXNlcywgbWFwRm4pLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJzInXG4gIH0pO1xuICBgYGBcblxuICBgUlNWUC5tYXBgIHdpbGwgYWxzbyB3YWl0IGlmIGEgcHJvbWlzZSBpcyByZXR1cm5lZCBmcm9tIGBtYXBGbmAuIEZvciBleGFtcGxlLFxuICBzYXkgeW91IHdhbnQgdG8gZ2V0IGFsbCBjb21tZW50cyBmcm9tIGEgc2V0IG9mIGJsb2cgcG9zdHMsIGJ1dCB5b3UgbmVlZFxuICB0aGUgYmxvZyBwb3N0cyBmaXJzdCBiZWNhdXNlIHRoZXkgY29udGFpbiBhIHVybCB0byB0aG9zZSBjb21tZW50cy5cblxuICBgYGBqYXZzY3JpcHRcblxuICBsZXQgbWFwRm4gPSBmdW5jdGlvbihibG9nUG9zdCl7XG4gICAgLy8gZ2V0Q29tbWVudHMgZG9lcyBzb21lIGFqYXggYW5kIHJldHVybnMgYW4gUlNWUC5Qcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkXG4gICAgLy8gd2l0aCBzb21lIGNvbW1lbnRzIGRhdGFcbiAgICByZXR1cm4gZ2V0Q29tbWVudHMoYmxvZ1Bvc3QuY29tbWVudHNfdXJsKTtcbiAgfTtcblxuICAvLyBnZXRCbG9nUG9zdHMgZG9lcyBzb21lIGFqYXggYW5kIHJldHVybnMgYW4gUlNWUC5Qcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkXG4gIC8vIHdpdGggc29tZSBibG9nIHBvc3QgZGF0YVxuICBSU1ZQLm1hcChnZXRCbG9nUG9zdHMoKSwgbWFwRm4pLnRoZW4oZnVuY3Rpb24oY29tbWVudHMpe1xuICAgIC8vIGNvbW1lbnRzIGlzIHRoZSByZXN1bHQgb2YgYXNraW5nIHRoZSBzZXJ2ZXIgZm9yIHRoZSBjb21tZW50c1xuICAgIC8vIG9mIGFsbCBibG9nIHBvc3RzIHJldHVybmVkIGZyb20gZ2V0QmxvZ1Bvc3RzKClcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgbWFwXG4gIEBzdGF0aWNcbiAgQGZvciBSU1ZQXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzXG4gIEBwYXJhbSB7RnVuY3Rpb259IG1hcEZuIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBlYWNoIGZ1bGZpbGxlZCBwcm9taXNlLlxuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gIGBtYXBGbmAgb24gZWFjaCBmdWxmaWxsZWQgcHJvbWlzZSBvciB2YWx1ZSB3aGVuIHRoZXkgYmVjb21lIGZ1bGZpbGxlZC5cbiAgIFRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZSBnaXZlbiBgcHJvbWlzZXNgIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIG1hcChwcm9taXNlcywgbWFwRm4sIGxhYmVsKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcywgbGFiZWwpLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIGlmICghaXNGdW5jdGlvbihtYXBGbikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgZnVuY3Rpb24gYXMgbWFwJ3Mgc2Vjb25kIGFyZ3VtZW50LlwiKTtcbiAgICB9XG5cbiAgICB2YXIgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aDtcbiAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcmVzdWx0c1tpXSA9IG1hcEZuKHZhbHVlc1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc3VsdHMsIGxhYmVsKTtcbiAgfSk7XG59XG5cbi8qKlxuICBUaGlzIGlzIGEgY29udmVuaWVudCBhbGlhcyBmb3IgYFJTVlAuUHJvbWlzZS5yZXNvbHZlYC5cblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAZm9yIFJTVlBcbiAgQHBhcmFtIHsqfSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBpZGVudGlmeWluZyB0aGUgcmV0dXJuZWQgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUkMih2YWx1ZSwgbGFiZWwpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSwgbGFiZWwpO1xufVxuXG4vKipcbiAgVGhpcyBpcyBhIGNvbnZlbmllbnQgYWxpYXMgZm9yIGBSU1ZQLlByb21pc2UucmVqZWN0YC5cblxuICBAbWV0aG9kIHJlamVjdFxuICBAc3RhdGljXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0geyp9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgaWRlbnRpZnlpbmcgdGhlIHJldHVybmVkIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdCQyKHJlYXNvbiwgbGFiZWwpIHtcbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbiwgbGFiZWwpO1xufVxuXG4vKipcbiBgUlNWUC5maWx0ZXJgIGlzIHNpbWlsYXIgdG8gSmF2YVNjcmlwdCdzIG5hdGl2ZSBgZmlsdGVyYCBtZXRob2QsIGV4Y2VwdCB0aGF0IGl0XG4gIHdhaXRzIGZvciBhbGwgcHJvbWlzZXMgdG8gYmVjb21lIGZ1bGZpbGxlZCBiZWZvcmUgcnVubmluZyB0aGUgYGZpbHRlckZuYCBvblxuICBlYWNoIGl0ZW0gaW4gZ2l2ZW4gdG8gYHByb21pc2VzYC4gYFJTVlAuZmlsdGVyYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGxcbiAgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSByZXN1bHQgb2YgcnVubmluZyBgZmlsdGVyRm5gIG9uIHRoZSB2YWx1ZXMgdGhlXG4gIHByb21pc2VzIGJlY29tZSBmdWxmaWxsZWQgd2l0aC5cblxuICBGb3IgZXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG5cbiAgbGV0IHByb21pc2UxID0gUlNWUC5yZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSBSU1ZQLnJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IFJTVlAucmVzb2x2ZSgzKTtcblxuICBsZXQgcHJvbWlzZXMgPSBbcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlM107XG5cbiAgbGV0IGZpbHRlckZuID0gZnVuY3Rpb24oaXRlbSl7XG4gICAgcmV0dXJuIGl0ZW0gPiAxO1xuICB9O1xuXG4gIFJTVlAuZmlsdGVyKHByb21pc2VzLCBmaWx0ZXJGbikudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCBpcyBbIDIsIDMgXVxuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBSU1ZQLmZpbHRlcmAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2Unc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBSU1ZQLnJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IFJTVlAucmVqZWN0KG5ldyBFcnJvcignMicpKTtcbiAgbGV0IHByb21pc2UzID0gUlNWUC5yZWplY3QobmV3IEVycm9yKCczJykpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBsZXQgZmlsdGVyRm4gPSBmdW5jdGlvbihpdGVtKXtcbiAgICByZXR1cm4gaXRlbSA+IDE7XG4gIH07XG5cbiAgUlNWUC5maWx0ZXIocHJvbWlzZXMsIGZpbHRlckZuKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICcyJ1xuICB9KTtcbiAgYGBgXG5cbiAgYFJTVlAuZmlsdGVyYCB3aWxsIGFsc28gd2FpdCBmb3IgYW55IHByb21pc2VzIHJldHVybmVkIGZyb20gYGZpbHRlckZuYC5cbiAgRm9yIGluc3RhbmNlLCB5b3UgbWF5IHdhbnQgdG8gZmV0Y2ggYSBsaXN0IG9mIHVzZXJzIHRoZW4gcmV0dXJuIGEgc3Vic2V0XG4gIG9mIHRob3NlIHVzZXJzIGJhc2VkIG9uIHNvbWUgYXN5bmNocm9ub3VzIG9wZXJhdGlvbjpcblxuICBgYGBqYXZhc2NyaXB0XG5cbiAgbGV0IGFsaWNlID0geyBuYW1lOiAnYWxpY2UnIH07XG4gIGxldCBib2IgICA9IHsgbmFtZTogJ2JvYicgfTtcbiAgbGV0IHVzZXJzID0gWyBhbGljZSwgYm9iIF07XG5cbiAgbGV0IHByb21pc2VzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe1xuICAgIHJldHVybiBSU1ZQLnJlc29sdmUodXNlcik7XG4gIH0pO1xuXG4gIGxldCBmaWx0ZXJGbiA9IGZ1bmN0aW9uKHVzZXIpe1xuICAgIC8vIEhlcmUsIEFsaWNlIGhhcyBwZXJtaXNzaW9ucyB0byBjcmVhdGUgYSBibG9nIHBvc3QsIGJ1dCBCb2IgZG9lcyBub3QuXG4gICAgcmV0dXJuIGdldFByaXZpbGVnZXNGb3JVc2VyKHVzZXIpLnRoZW4oZnVuY3Rpb24ocHJpdnMpe1xuICAgICAgcmV0dXJuIHByaXZzLmNhbl9jcmVhdGVfYmxvZ19wb3N0ID09PSB0cnVlO1xuICAgIH0pO1xuICB9O1xuICBSU1ZQLmZpbHRlcihwcm9taXNlcywgZmlsdGVyRm4pLnRoZW4oZnVuY3Rpb24odXNlcnMpe1xuICAgIC8vIHRydWUsIGJlY2F1c2UgdGhlIHNlcnZlciB0b2xkIHVzIG9ubHkgQWxpY2UgY2FuIGNyZWF0ZSBhIGJsb2cgcG9zdC5cbiAgICB1c2Vycy5sZW5ndGggPT09IDE7XG4gICAgLy8gZmFsc2UsIGJlY2F1c2UgQWxpY2UgaXMgdGhlIG9ubHkgdXNlciBwcmVzZW50IGluIGB1c2Vyc2BcbiAgICB1c2Vyc1swXSA9PT0gYm9iO1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBmaWx0ZXJcbiAgQHN0YXRpY1xuICBAZm9yIFJTVlBcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXNcbiAgQHBhcmFtIHtGdW5jdGlvbn0gZmlsdGVyRm4gLSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gZWFjaCByZXNvbHZlZCB2YWx1ZSB0b1xuICBmaWx0ZXIgdGhlIGZpbmFsIHJlc3VsdHMuXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZGVzY3JpYmluZyB0aGUgcHJvbWlzZS4gVXNlZnVsIGZvclxuICB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfVxuKi9cblxuZnVuY3Rpb24gcmVzb2x2ZUFsbChwcm9taXNlcywgbGFiZWwpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLCBsYWJlbCk7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVTaW5nbGUocHJvbWlzZSwgbGFiZWwpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9taXNlLCBsYWJlbCkudGhlbihmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gcmVzb2x2ZUFsbChwcm9taXNlcywgbGFiZWwpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbHRlcihwcm9taXNlcywgZmlsdGVyRm4sIGxhYmVsKSB7XG4gIHZhciBwcm9taXNlID0gaXNBcnJheShwcm9taXNlcykgPyByZXNvbHZlQWxsKHByb21pc2VzLCBsYWJlbCkgOiByZXNvbHZlU2luZ2xlKHByb21pc2VzLCBsYWJlbCk7XG4gIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIGlmICghaXNGdW5jdGlvbihmaWx0ZXJGbikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgZnVuY3Rpb24gYXMgZmlsdGVyJ3Mgc2Vjb25kIGFyZ3VtZW50LlwiKTtcbiAgICB9XG5cbiAgICB2YXIgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aDtcbiAgICB2YXIgZmlsdGVyZWQgPSBuZXcgQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGZpbHRlcmVkW2ldID0gZmlsdGVyRm4odmFsdWVzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzb2x2ZUFsbChmaWx0ZXJlZCwgbGFiZWwpLnRoZW4oZnVuY3Rpb24gKGZpbHRlcmVkKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgdmFyIG5ld0xlbmd0aCA9IDA7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGZpbHRlcmVkW2ldKSB7XG4gICAgICAgICAgcmVzdWx0c1tuZXdMZW5ndGhdID0gdmFsdWVzW2ldO1xuICAgICAgICAgIG5ld0xlbmd0aCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdHMubGVuZ3RoID0gbmV3TGVuZ3RoO1xuXG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciBsZW4gPSAwO1xudmFyIHZlcnR4TmV4dCA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZSQxW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWUkMVtsZW4gKyAxXSA9IGFyZztcbiAgbGVuICs9IDI7XG4gIGlmIChsZW4gPT09IDIpIHtcbiAgICAvLyBJZiBsZW4gaXMgMSwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgc2NoZWR1bGVGbHVzaCQxKCk7XG4gIH1cbn1cblxudmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoe30pLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIG5vZGVcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuICB2YXIgbmV4dFRpY2sgPSBwcm9jZXNzLm5leHRUaWNrO1xuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgLy8gc2V0SW1tZWRpYXRlIHNob3VsZCBiZSB1c2VkIGluc3RlYWQgaW5zdGVhZFxuICB2YXIgdmVyc2lvbiA9IHByb2Nlc3MudmVyc2lvbnMubm9kZS5tYXRjaCgvXig/OihcXGQrKVxcLik/KD86KFxcZCspXFwuKT8oXFwqfFxcZCspJC8pO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2ZXJzaW9uKSAmJiB2ZXJzaW9uWzFdID09PSAnMCcgJiYgdmVyc2lvblsyXSA9PT0gJzEwJykge1xuICAgIG5leHRUaWNrID0gc2V0SW1tZWRpYXRlO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIGlmICh0eXBlb2YgdmVydHhOZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlJDEgPSBuZXcgQXJyYXkoMTAwMCk7XG5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWUkMVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWUkMVtpICsgMV07XG5cbiAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgcXVldWUkMVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZSQxW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0ZXgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHIgPSByZXF1aXJlO1xuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCQxID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCQxID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCQxID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoJDEgPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCQxID0gYXR0ZW1wdFZlcnRleCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCQxID0gdXNlU2V0VGltZW91dCgpO1xufVxuXG52YXIgcGxhdGZvcm0gPSB1bmRlZmluZWQ7XG5cbi8qIGdsb2JhbCBzZWxmICovXG5pZiAodHlwZW9mIHNlbGYgPT09ICdvYmplY3QnKSB7XG4gIHBsYXRmb3JtID0gc2VsZjtcblxuICAvKiBnbG9iYWwgZ2xvYmFsICovXG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnKSB7XG4gICAgcGxhdGZvcm0gPSBnbG9iYWw7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdubyBnbG9iYWw6IGBzZWxmYCBvciBgZ2xvYmFsYCBmb3VuZCcpO1xuICB9XG5cbnZhciBfYXN5bmMkZmlsdGVyO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG4vLyBkZWZhdWx0c1xuXG4vLyB0aGUgZGVmYXVsdCBleHBvcnQgaGVyZSBpcyBmb3IgYmFja3dhcmRzIGNvbXBhdDpcbi8vICAgaHR0cHM6Ly9naXRodWIuY29tL3RpbGRlaW8vcnN2cC5qcy9pc3N1ZXMvNDM0XG5jb25maWcuYXN5bmMgPSBhc2FwO1xuY29uZmlnLmFmdGVyID0gZnVuY3Rpb24gKGNiKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGNiLCAwKTtcbn07XG52YXIgY2FzdCA9IHJlc29sdmUkMjtcblxudmFyIGFzeW5jID0gZnVuY3Rpb24gYXN5bmMoY2FsbGJhY2ssIGFyZykge1xuICByZXR1cm4gY29uZmlnLmFzeW5jKGNhbGxiYWNrLCBhcmcpO1xufTtcblxuZnVuY3Rpb24gb24oKSB7XG4gIGNvbmZpZ1snb24nXS5hcHBseShjb25maWcsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIG9mZigpIHtcbiAgY29uZmlnWydvZmYnXS5hcHBseShjb25maWcsIGFyZ3VtZW50cyk7XG59XG5cbi8vIFNldCB1cCBpbnN0cnVtZW50YXRpb24gdGhyb3VnaCBgd2luZG93Ll9fUFJPTUlTRV9JTlRSVU1FTlRBVElPTl9fYFxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3dbJ19fUFJPTUlTRV9JTlNUUlVNRU5UQVRJT05fXyddID09PSAnb2JqZWN0Jykge1xuICB2YXIgY2FsbGJhY2tzID0gd2luZG93WydfX1BST01JU0VfSU5TVFJVTUVOVEFUSU9OX18nXTtcbiAgY29uZmlndXJlKCdpbnN0cnVtZW50JywgdHJ1ZSk7XG4gIGZvciAodmFyIGV2ZW50TmFtZSBpbiBjYWxsYmFja3MpIHtcbiAgICBpZiAoY2FsbGJhY2tzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcbiAgICAgIG9uKGV2ZW50TmFtZSwgY2FsbGJhY2tzW2V2ZW50TmFtZV0pO1xuICAgIH1cbiAgfVxufXZhciByc3ZwID0gKF9hc3luYyRmaWx0ZXIgPSB7XG4gIGNhc3Q6IGNhc3QsXG4gIFByb21pc2U6IFByb21pc2UsXG4gIEV2ZW50VGFyZ2V0OiBFdmVudFRhcmdldCxcbiAgYWxsOiBhbGwkMSxcbiAgYWxsU2V0dGxlZDogYWxsU2V0dGxlZCxcbiAgcmFjZTogcmFjZSQxLFxuICBoYXNoOiBoYXNoLFxuICBoYXNoU2V0dGxlZDogaGFzaFNldHRsZWQsXG4gIHJldGhyb3c6IHJldGhyb3csXG4gIGRlZmVyOiBkZWZlcixcbiAgZGVub2RlaWZ5OiBkZW5vZGVpZnksXG4gIGNvbmZpZ3VyZTogY29uZmlndXJlLFxuICBvbjogb24sXG4gIG9mZjogb2ZmLFxuICByZXNvbHZlOiByZXNvbHZlJDIsXG4gIHJlamVjdDogcmVqZWN0JDIsXG4gIG1hcDogbWFwXG59LCBfZGVmaW5lUHJvcGVydHkoX2FzeW5jJGZpbHRlciwgJ2FzeW5jJywgYXN5bmMpLCBfZGVmaW5lUHJvcGVydHkoX2FzeW5jJGZpbHRlciwgJ2ZpbHRlcicsIC8vIGJhYmVsIHNlZW1zIHRvIGVycm9yIGlmIGFzeW5jIGlzbid0IGEgY29tcHV0ZWQgcHJvcCBoZXJlLi4uXG5maWx0ZXIpLCBfYXN5bmMkZmlsdGVyKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gcnN2cDtcbmV4cG9ydHMuY2FzdCA9IGNhc3Q7XG5leHBvcnRzLlByb21pc2UgPSBQcm9taXNlO1xuZXhwb3J0cy5FdmVudFRhcmdldCA9IEV2ZW50VGFyZ2V0O1xuZXhwb3J0cy5hbGwgPSBhbGwkMTtcbmV4cG9ydHMuYWxsU2V0dGxlZCA9IGFsbFNldHRsZWQ7XG5leHBvcnRzLnJhY2UgPSByYWNlJDE7XG5leHBvcnRzLmhhc2ggPSBoYXNoO1xuZXhwb3J0cy5oYXNoU2V0dGxlZCA9IGhhc2hTZXR0bGVkO1xuZXhwb3J0cy5yZXRocm93ID0gcmV0aHJvdztcbmV4cG9ydHMuZGVmZXIgPSBkZWZlcjtcbmV4cG9ydHMuZGVub2RlaWZ5ID0gZGVub2RlaWZ5O1xuZXhwb3J0cy5jb25maWd1cmUgPSBjb25maWd1cmU7XG5leHBvcnRzLm9uID0gb247XG5leHBvcnRzLm9mZiA9IG9mZjtcbmV4cG9ydHMucmVzb2x2ZSA9IHJlc29sdmUkMjtcbmV4cG9ydHMucmVqZWN0ID0gcmVqZWN0JDI7XG5leHBvcnRzLm1hcCA9IG1hcDtcbmV4cG9ydHMuYXN5bmMgPSBhc3luYztcbmV4cG9ydHMuZmlsdGVyID0gZmlsdGVyO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnN2cC5tYXAiXX0=\n"]}